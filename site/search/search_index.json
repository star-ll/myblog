{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/","title":"\u5f15\u8a00","text":"<p>\u8bf4\u5230\u6027\u80fd\u4f18\u5316\uff0c\u7f51\u4e0a\u6709\u7740\u5927\u91cf\u76f8\u5173\u7684\u6280\u672f\u6587\u7ae0\uff0c\u4f46\u662f\u5927\u591a\u6570\u90fd\u662f\u96f6\u96f6\u6563\u6563\u5730\u603b\u7ed3\u4e86\u4e00\u5806\u524d\u7aef\u6027\u80fd\u4f18\u5316\u7684\u65b9\u6cd5\uff0c\u5f88\u5c11\u6709\u80fd\u5c06\u524d\u7aef\u6027\u80fd\u95ee\u9898\u4e32\u8054\u8d77\u6765\u5206\u6790\u7684\u6587\u7ae0\uff0c\u800c\u5c06\u524d\u7aef\u6027\u80fd\u95ee\u9898\u7684\u672c\u8d28\u66b4\u9732\u51fa\u6765\u5e76\u5f62\u6210\u4f18\u5316\u6a21\u578b\u7684\u5c31\u66f4\u5c11\u4e86\u3002</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_2","title":"\u524d\u7aef\u6027\u80fd\u4f18\u5316\u6a21\u578b","text":""},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_3","title":"\u6784\u5efa\u5c42\uff08\u524d\u7aef\u5de5\u7a0b\u5316\uff09","text":"<p>\u5f53\u524d\u524d\u7aef\u5e94\u5bf9\u5927\u578b\u9879\u76ee\u57fa\u672c\u90fd\u91c7\u7528\u524d\u7aef\u5de5\u7a0b\u5316\u7684\u5f62\u5f0f\u8fdb\u884c\u5f00\u53d1\uff0c\u800c\u4e0d\u518d\u662f\u4f20\u7edf\u7684 HTML\u3001CSS \u548c JS \u4e09\u4ef6\u5957\uff0c\u8fd9\u50ac\u751f\u51fa\u4e86\u9700\u6c42\u524d\u7aef\u6846\u67b6\u548c\u6253\u5305\u5de5\u5177\uff0c\u6bd4\u5982 webpack\u3001repack \u548c vite \u7b49\u3002</p> <p>\u524d\u7aef\u6784\u5efa\u7684\u8d44\u6e90\u6700\u7ec8\u662f\u90e8\u7f72\u5230\u670d\u52a1\u5668\uff0c\u7136\u540e\u88ab\u6d4f\u89c8\u5668\u8bf7\u6c42\u52a0\u8f7d\uff0c\u56e0\u6b64\u6253\u5305\u7b56\u7565\u7684\u4e0d\u540c\u4e5f\u4f1a\u5bf9\u524d\u7aef\u6027\u80fd\u9020\u6210\u4e0d\u5c0f\u7684\u5f71\u54cd\u3002\u8fd9\u4e5f\u5c31\u662f\u4e3a\u4ec0\u4e48\u50cf webpack \u8fd9\u4e9b\u6253\u5305\u5de5\u5177\u90fd\u4f1a\u63d0\u4f9b\u538b\u7f29\u3001Tree-Shaking \u3001\u4ee3\u7801\u5206\u5272\u7b49\u529f\u80fd\u3002</p> <p>\u5176\u5b9e\u4e25\u8c28\u7684\u6765\u8bf4\uff0c\u6784\u5efa\u5c42\u5f71\u54cd\u7684\u662f\u7f51\u7edc\u4f20\u8f93\uff0c\u5e94\u8be5\u88ab\u5f52\u7c7b\u5230\u7f51\u7edc\u4f20\u8f93\u5c42\uff0c\u4f46\u662f\u8003\u8651\u524d\u7aef\u5de5\u7a0b\u5316\u7684\u591a\u6837\u6027\u548c\u590d\u6742\u6027\uff0c\u9664\u4e86\u524d\u9762\u6240\u8bf4\u5e38\u89c1\u7684\u538b\u7f29\u3001\u4ee3\u7801\u5206\u5272\u548c tree-shaking \u5916\uff0c\u8fd8\u53ef\u80fd\u6d89\u53ca\u5230\u5fae\u524d\u7aef\u7b49\u590d\u6742\u7684\u9886\u57df\uff0c\u56e0\u6b64\u72ec\u7acb\u4f5c\u4e3a\u7b2c\u4e00\u5c42\uff0c\u56e0\u4e3a\u8fd9\u662f\u524d\u7aef\u4ea4\u4e92\u7684\u8d77\u70b9\u3002</p> <p>\u603b\u7ed3\u6765\u8bf4\uff0c\u6784\u5efa\u5c42\u6838\u5fc3\u76ee\u6807\u662f\u5c3d\u53ef\u80fd\u5730\u51cf\u5c11\u8d44\u6e90\u7684\u4f53\u79ef\u3002</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_4","title":"\u7f51\u7edc\u4f20\u8f93\u5c42","text":"<p>\u5f53\u7528\u6237\u6253\u5f00\u4e00\u4e2a\u9875\u9762\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u53d1\u8d77\u5bf9\u5e94 HTML \u6587\u4ef6\u7684\u8bf7\u6c42\uff0c\u6d4f\u89c8\u5668\u4e2d\u7684 HTML \u89e3\u6790\u5668\u9996\u5148\u4f1a\u52a0\u8f7d\u5e76\u89e3\u6790 HTML \u6587\u4ef6\uff0c\u6784\u5efa\u6210 DOM\uff0c\u4e0e\u6b64\u540c\u65f6 HTML \u89e3\u6790\u5668\u548c\u9884\u89e3\u6790\u5668\u8fd8\u4f1a\u52a0\u8f7d HTML \u4e2d\u58f0\u660e\u6216 Script \u4e2d JS \u52a8\u6001\u521b\u5efa\u7684\u8d44\u6e90\uff08CSS\u3001JS \u3001\u97f3\u89c6\u9891\u7b49\uff09\u3002</p> <p>\u5373\u4f7f\u5728\u6784\u5efa\u5c42\u5df2\u7ecf\u5c3d\u91cf\u538b\u7f29\u4e86\u8d44\u6e90\u7684\u4f53\u79ef\uff0c\u4f46\u662f\u5982\u679c\u7f51\u7edc\u4f20\u8f93\u4e2d\u5b58\u5728\u7f51\u7edc\u5ef6\u8fdf\u8fc7\u9ad8\u7b49\u95ee\u9898\uff0c\u4e5f\u4f9d\u7136\u4f1a\u5f71\u54cd\u7cfb\u7edf\u6027\u80fd\uff0c\u56e0\u6b64\u7f51\u7edc\u4f20\u8f93\u5c42\u4e5f\u662f\u6211\u4eec\u5173\u6ce8\u7684\u91cd\u70b9\u3002\u53ef\u4ee5\u901a\u8fc7 TTFB \u7b49\u6307\u6807\u6765\u5206\u6790\u7f51\u7edc\u4f20\u8f93\u5c42\u7684\u6027\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 CDN\u3001HTTP \u7f13\u5b58\u3001keep-alive\u957f\u94fe\u63a5\u7b49\u624b\u6bb5\u6765\u4f18\u5316\u8fd9\u4e00\u5c42\u7684\u6027\u80fd\u95ee\u9898\u3002</p> <p>\u9664\u4e86\u7f51\u7edc\u65b9\u9762\u7684\u95ee\u9898\u5916\uff0c\u4ece\u524d\u7aef\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u9700\u8981\u989d\u5916\u5173\u6ce8\u4e24\u70b9\uff1a 1. \u961f\u5934\u963b\u585e 2. \u51cf\u5c11\u4e0d\u5fc5\u8981\u3001\u91cd\u590d\u7684\u8bf7\u6c42</p> <p>\u524d\u8005\u53ef\u4ee5\u501f\u52a9 HTTP 2 \u548c\u8bf7\u6c42\u961f\u5217\u7b49\u65b9\u5f0f\u4f18\u5316\uff0c\u540e\u8005\u5219\u53ef\u4ee5\u501f\u52a9\u8282\u6d41\u548c\u9632\u6296\u7b49\u6280\u672f\u7f13\u89e3\u3002</p> <p>\u603b\u7ed3\u6765\u8bf4\uff0c\u7f51\u7edc\u4f20\u8f93\u5c42\u4f18\u5316\u7684\u672c\u8d28\uff0c\u5c31\u662f\u63d0\u9ad8\u7f51\u7edc\u4f20\u8f93\u901f\u5ea6\u3001\u7f13\u89e3\u961f\u5934\u963b\u585e\u95ee\u9898\u3001\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u91cd\u590d\u8bf7\u6c42\u3002</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_5","title":"\u5e94\u7528\u52a0\u8f7d\u5c42","text":"<p>\u5f53 HTML \u88ab\u8f6c\u6362\u6210 DOM \u540e\uff0c\u6d4f\u89c8\u5668\u4e2d\u7684\u6e32\u67d3\u5f15\u64ce\u534f\u8c03\u4e3b\u7ebf\u7a0b\u3001\u5408\u6210\u7ebf\u7a0b\u548c GPU \u5171\u540c\u4f5c\u7528\u5c06 DOM \u8f6c\u6362\u6210\u5c4f\u5e55\u4e2d\u7684\u50cf\u7d20\uff0c\u8fd9\u4e2a\u6b65\u9aa4\u79f0\u4e3a\u6e32\u67d3\u7ba1\u7ebf\u3002\u6e32\u67d3\u7ba1\u7ebf\u5177\u4f53\u6d41\u7a0b\u53ef\u4ee5\u53c2\u8003[[\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce III\uff1aChromium\u5206\u5c42\u5408\u6210 vs Firefox WebRender\u7684GPU\u9769\u547d]]</p> <p>\u5e94\u7528\u52a0\u8f7d\u5c42\u5305\u62ec\u4e86\uff1a 1. HTML \u7684\u52a0\u8f7d 2. HTML \u7684\u89e3\u6790 3. \u9996\u6b21\u6e32\u67d3</p> <p>HTML \u52a0\u8f7d\u3001\u89e3\u6790\u6d41\u7a0b\u53ef\u4ee5\u53c2\u8003[[\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce II\uff1aHTML \u89e3\u6790\u5168\u6d41\u7a0b\u2014\u2014\u4ece\u5b57\u8282\u6d41\u5230 DOM \u6784\u5efa]]</p> <p>\u5e94\u7528\u52a0\u8f7d\u5c42\u4f18\u5316\u7684\u6838\u5fc3\u5728\u4e8e\u9996\u5c4f\u52a0\u8f7d\u7b56\u7565\uff0c\u53ef\u4ee5\u901a\u8fc7 LCP\u3001FCP \u7b49\u6027\u80fd\u6307\u6807\u8fdb\u884c\u8bc4\u4ef7\u5206\u6790\u3002</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_6","title":"\u8fd0\u884c\u65f6","text":"<p>\u5f53\u5e94\u7528\u52a0\u8f7d\u5b8c\u6bd5\u4e14\u5b8c\u6210\u9996\u6b21\u6e32\u67d3\u540e\uff0c\u5c31\u53ef\u4ee5\u8ba4\u4e3a\u8fdb\u5165\u4e86\u8fd0\u884c\u65f6\u9636\u6bb5\u3002\u6d4f\u89c8\u5668\u5b58\u5728\u6709\u4e00\u4e2a\u6267\u884c\u6808\u548c\u4e8b\u4ef6\u5faa\u73af\u6a21\u578b\uff0c\u8fd9\u662f JS \u6267\u884c\u548c\u6e32\u67d3\u7684\u57fa\u77f3\uff0c\u4e8b\u4ef6\u5faa\u73af\u6a21\u578b\u6bcf\u4e2a\u5468\u671f\u90fd\u4f1a\u68c0\u6d4b\u662f\u5426\u9700\u8981\u91cd\u65b0\u6e32\u67d3\uff0c\u5f53\u7528\u6237\u4e0e\u9875\u9762\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u53ef\u80fd\u4f1a\u89e6\u53d1\u91cd\u65b0\u6e32\u67d3\uff0c\u5219\u4f1a\u91cd\u65b0\u524d\u9762\u7684\u6e32\u67d3\u7ba1\u7ebf\u4e2d\u7684\u64cd\u4f5c\uff0c\u4e0d\u8fc7\u4e0d\u9700\u8981\u91cd\u65b0\u52a0\u8f7d HTML\u3002</p> <p>\u8fd0\u884c\u65f6\u7684\u4e3b\u8981\u74f6\u9888\u5728\u4e8e\u4e3b\u7ebf\u7a0b\u548c\u6e32\u67d3\u7ba1\u7ebf\uff0c\u4e3b\u7ebf\u7a0b\u9664\u4e86\u6267\u884c JS \u5916\u8fd8\u8d1f\u8d23 GC \u548c\u6e32\u67d3\u7684\u90e8\u5206\u4efb\u52a1\uff0c\u56e0\u6b64\u5982\u679c\u957f\u4efb\u52a1\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u90a3\u4e48\u5c31\u5f88\u5bb9\u6613\u9020\u6210\u4e22\u5e27\u5361\u987f\u3002\u53e6\u4e00\u4e2a\u74f6\u9888\u5728\u4e8e\u6e32\u67d3\u7ba1\u7ebf\uff0c\u6e32\u67d3\u7ba1\u7ebf\u662f\u7531\u4e3b\u7ebf\u7a0b\u3001\u5408\u6210\u7ebf\u7a0b\u548c GPU \u5171\u540c\u5b8c\u6210\u7684\uff0c\u5373\u4f7f\u4e3b\u7ebf\u7a0b\u672a\u88ab\u963b\u585e\uff0c\u5927\u91cf\u91cd\u590d\u6e32\u67d3\u4e5f\u4f9d\u7136\u53ef\u80fd\u5f71\u54cd\u5408\u6210\u7ebf\u7a0b\u548c GPU \u7684\u6027\u80fd\uff0c\u4ece\u800c\u5bfc\u81f4\u5361\u987f\u3002</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_7","title":"\u4e3b\u7ebf\u7a0b","text":"<p>JS \u662f\u5355\u7ebf\u7a0b\u6a21\u578b</p> <p>\u4e3b\u7ebf\u7a0b\u4f18\u5316\u7684\u6838\u5fc3\u5728\u4e8e\u907f\u514d\u4e3b\u7ebf\u7a0b\u963b\u585e</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_8","title":"\u6e32\u67d3\u7ba1\u7ebf","text":"<p>\u6e32\u67d3\u7ba1\u7ebf\u4f18\u5316\u7684\u6838\u5fc3\u5728\u4e8e\u51cf\u5c11\u91cd\u590d\u65e0\u7528\u7684\u6e32\u67d3</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_9","title":"\u5185\u5b58\u7ba1\u7406","text":"<p>\u7531\u4e8e JS \u5f15\u64ce\u4f1a\u81ea\u52a8\u8fdb\u884c\u5783\u573e\u56de\u6536\uff0c\u5e76\u6ca1\u6709\u66b4\u9732\u624b\u52a8\u5185\u5b58\u5206\u914d\u4e0e\u56de\u6536\u7684\u76f8\u5173 API\uff0c\u56e0\u6b64\u5185\u5b58\u95ee\u9898\u4e5f\u5f88\u5bb9\u6613\u88ab\u5ffd\u7565\uff0c\u4f46\u662f\u4e00\u65e6\u53d1\u751f\u5185\u5b58\u95ee\u9898\uff0c\u90a3\u4e48\u5f71\u54cd\u4e5f\u4f1a\u5f88\u5927\uff0c\u4f8b\u5982\u5185\u5b58\u6cc4\u9732\u5f88\u5bb9\u6613\u5bfc\u81f4\u9875\u9762\u5d29\u6e83\uff0c\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002</p> <p>\u5e38\u89c1\u7684\u524d\u7aef\u5185\u5b58\u95ee\u9898\u6709\u4e09\u7c7b\uff1a - \u5185\u5b58\u6cc4\u6f0f - \u6808\u6ea2\u51fa - \u5806\u6ea2\u51fa</p> <p>\u5185\u5b58\u6cc4\u6f0f</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_10","title":"\u5e95\u5c42\u4f18\u5316\u5c42","text":"<p>\u5728\u8fd9\u4e00\u5c42\u4e2d\uff0c\u4f60\u9700\u8981\u6df1\u5165\u7406\u89e3\u66f4\u52a0\u5e95\u5c42\u7684\u77e5\u8bc6\u624d\u80fd\u8fdb\u884c\u66f4\u597d\u7684\u4f18\u5316\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u5212\u5206\u6210\u4e24\u5c42\uff1a - \u6846\u67b6\u5c42 - JS \u5c42</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_11","title":"\u6846\u67b6\u5c42","text":"<p>\u6df1\u5165\u7406\u89e3\u6846\u67b6\u5e95\u5c42\u53ef\u4ee5\u5e2e\u5fd9\u6211\u4eec\u5199\u51fa\u6027\u80fd\u66f4\u597d\u7684\u4ee3\u7801\uff0c\u4f8b\u5982\u5bf9\u4e8e Vue \u548c React \u8fd9\u4e9b\u57fa\u4e8e\u865a\u62df DOM \u7684\u6846\u67b6\uff0c\u5217\u8868\u8282\u70b9\u901a\u5e38\u5efa\u8bae\u91c7\u7528\u552f\u4e00\u56fa\u5b9a\u503c\u4f5c\u4e3a\u5217\u8868\u5143\u7d20\u7684 key \u503c\uff0c\u8fd9\u662f\u4e3a\u4e86\u5728\u6846\u67b6\u5e95\u5c42\u8fdb\u884c diff \u65f6\u6765\u6807\u8bc6\u8282\u70b9\uff0c\u4ee5 Vue3 \u4e3a\u4f8b\uff0c\u6709 key \u548c\u6ca1\u6709 key \u4e24\u79cd\u573a\u666f\u4e0b Vue \u91c7\u7528\u7684\u7b56\u7565\u5b8c\u5168\u4e0d\u4e00\u6837\uff0c\u6027\u80fd\u4e0a\u4e5f\u6709\u8f83\u5927\u5dee\u5f02\u3002</p> \u7b56\u7565 \u6027\u80fd \u6709 key \u63a5\u8fd1 O (n) \u65e0 key \u6700\u574f\u60c5\u51b5\u662f O (n^2)"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#js","title":"JS \u5c42","text":"<p>JS \u662f\u4e00\u4e2a\u5f31\u7c7b\u578b\u7684\u89e3\u91ca\u578b\u8bed\u8a00\uff0c\u901a\u8fc7 JS \u5f15\u64ce\u6765\u4f18\u5316\u3001\u6267\u884c\uff0c\u5e38\u89c1\u7684 JS \u5f15\u64ce\u5982\u4e0b\u6240\u793a\uff1a</p> \u5730\u4f4d \u5e94\u7528 SpiderMonkey \u4e16\u754c\u4e0a\u7b2c\u4e00\u4e2a JavaScript \u5f15\u64ce Firefox \u6d4f\u89c8\u5668 V8 \u5f53\u524d\u5e94\u7528\u6700\u5e7f\u6cdb\u7684 JavaScript \u5f15\u64ce Chromium\u3001Nodejs \u6df1\u5165\u4e86\u89e3 JS \u5f15\u64ce\u80fd\u591f\u5e2e\u52a9\u5f00\u53d1\u8005\u5728\u6781\u7aef\u6027\u80fd\u573a\u666f\u4e0b\u627e\u5230\u4f18\u5316\u7a81\u7834\u53e3\uff0c\u5176\u4e2d\u9690\u85cf\u7c7b\uff08Hidden Classes\uff09\u4fbf\u662f JS \u5f15\u64ce\u666e\u904d\u91c7\u7528\u7684\u5173\u952e\u4f18\u5316\u624b\u6bb5\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u9690\u85cf\u7c7b\u662f JS \u5f15\u64ce\u5728\u8fd0\u884c\u65f6\u4e3a\u5bf9\u8c61\u52a8\u6001\u521b\u5efa\u7684\u5185\u90e8\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u7684\u6838\u5fc3\u4f5c\u7528\u662f\u5c06\u52a8\u6001\u7684 JavaScript \u5bf9\u8c61 \u201c\u9759\u6001\u5316\u201d\uff0c\u4ece\u800c\u8ba9\u5f15\u64ce\u80fd\u591f\u50cf\u5904\u7406\u9759\u6001\u7c7b\u578b\u8bed\u8a00\uff08\u5982 Java\u3001C++\uff09\u4e2d\u7684\u5bf9\u8c61\u4e00\u6837\u9ad8\u6548\u5730\u8bbf\u95ee\u5c5e\u6027\u3002\u5177\u4f53\u53ef\u4ee5\u53c2\u8003[[\u6df1\u5165JavaScript II\uff1a\u4eceJS\u5f15\u64ce\u770bJS\u7684\u8fd0\u884c\u4e0e\u4f18\u5316]] <p>\u4ee5\u4e00\u4e2a\u4f8b\u5b50\u6765\u5bf9\u6bd4\u9690\u85cf\u7c7b\u4f18\u5316\u751f\u6548\u548c\u672a\u751f\u6548\u4e24\u79cd\u60c5\u51b5\u4e0b\u7684\u6027\u80fd\uff1a</p> <pre><code>// \u2705 \u7a33\u5b9a\u7ed3\u6784\uff0c\u9690\u85cf\u7c7b\u53ef\u4f18\u5316\nfunction createStable() {\n    return {a: 1, b: 2};\n}\n\n// \u274c \u52a8\u6001\u7ed3\u6784\uff0c\u9690\u85cf\u7c7b\u672a\u751f\u6548\nfunction createUnstable() {\n    const obj = {};\n    obj.a = 1;\n    obj.b = 2;\n    obj.c = 3\n    delete obj.c\n    return obj;\n}\n\n// \u6d4b\u8bd5\u51fd\u6570\nfunction test(obj) {\n    for (let i = 0; i &lt; 10e7; i++) {\n        obj.a = i;\n    }\n}\n\n// === \u6027\u80fd\u6d4b\u8bd5 ===\nconsole.time('\u7a33\u5b9a\u9690\u85cf\u7c7b');\ntest(createStable());\nconsole.timeEnd('\u7a33\u5b9a\u9690\u85cf\u7c7b');\n// \u7a33\u5b9a\u9690\u85cf\u7c7b: 70.7470703125 ms\n\nconsole.time('\u4e0d\u7a33\u5b9a\u9690\u85cf\u7c7b');\ntest(createUnstable());\nconsole.timeEnd('\u4e0d\u7a33\u5b9a\u9690\u85cf\u7c7b');\n// \u4e0d\u7a33\u5b9a\u9690\u85cf\u7c7b: 361.491943359375 ms\n</code></pre> <p>\u4e24\u8005\u6267\u884c\u6240\u6d88\u8017\u7684\u65f6\u95f4\u76f8\u5dee\u8db3\u8db3\u6709\u4e94\u500d\uff0c\u5e76\u4e14\u968f\u7740\u6570\u636e\u91cf\u7684\u589e\u591a\uff0c\u4e24\u8005\u7684\u6027\u80fd\u5dee\u5f02\u4f1a\u8d8a\u6765\u8d8a\u5927\u3002</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_12","title":"\u7528\u6237\u4f53\u9a8c\u4e0e\u4e1a\u52a1\u5c42","text":"<p>\u524d\u9762\u4e94\u5c42\u504f\u5411\u6280\u672f\uff0c\u800c\u6700\u540e\u4e00\u5c42\u6ce8\u91cd\u7684\u662f\u7528\u6237\u4f53\u9a8c\u4e0e\u4e1a\u52a1\u5173\u8054\u7684\u4f18\u5316\u3002</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_13","title":"\u7528\u6237\u4f53\u9a8c","text":"<p>\u524d\u7aef\u662f\u79bb\u7528\u6237\u6700\u8fd1\u7684\u5f00\u53d1\uff0c\u56e0\u6b64\u524d\u7aef\u4e0d\u80fd\u4ec5\u4ec5\u5173\u6ce8\u6280\u672f\u4e0a\u7684\u6027\u80fd\u4f18\u5316\uff0c\u5bf9\u4e8e\u524d\u7aef\u800c\u8a00\uff0c\u6709\u4e00\u4e9b\u53ef\u4ee5\u63d0\u9ad8\u7528\u6237\u611f\u77e5\u7684\u6027\u80fd\u4f18\u5316\u65b9\u6cd5\uff0c\u8fd9\u7c7b\u65b9\u6cd5\u867d\u7136\u4e0d\u80fd\u591f\u5728\u5ba2\u89c2\u4e0a\u63d0\u9ad8\u6027\u80fd\uff0c\u4f46\u662f\u53ef\u4ee5\u5728\u7528\u6237\u4e3b\u89c2\u4e0a\u63d0\u9ad8\u7528\u6237\u4f53\u9a8c\u548c\u6027\u80fd\u611f\u77e5\uff0c\u8ba9\u7528\u6237\u201c\u611f\u89c9\u52a0\u8f7d\u901f\u5ea6\u6bd4\u8f83\u5feb\u4e86\u201d\u3002</p> <p>\u5e38\u89c1\u7684\u6280\u672f\u6709\uff1a - \u9aa8\u67b6\u5c4f - loading - \u5360\u4f4d\u56fe - \u9996\u5c4f\u4f18\u5148\u6e32\u67d3</p>"},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_14","title":"\u4e1a\u52a1\u76f8\u5173","text":""},{"location":"%E6%80%A7%E8%83%BD%E7%AF%87/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%85%AD%E5%B1%82%E6%A8%A1%E5%9E%8B/#_15","title":"\u603b\u7ed3","text":"<p>\u901a\u8fc7\u524d\u7aef\u6027\u80fd\u4f18\u5316\u516d\u5c42\u6a21\u578b\uff0c\u53ef\u4ee5\u4e86\u89e3\u524d\u7aef\u6027\u80fd\u4f18\u5316\u4e0d\u540c\u5c42\u9762\u7684\u74f6\u9888\uff0c</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86III%EF%BC%9AFiber%E6%9E%B6%E6%9E%84%E9%9D%A9%E5%91%BD/","title":"\u6df1\u5165React\u539f\u7406III\uff1aFiber\u67b6\u6784\u9769\u547d","text":"<ul> <li> <p>\u865a\u62dfDOM\u672c\u8d28\uff1a\u8f7b\u91cfJS\u5bf9\u8c61\u63cf\u8ff0UI</p> </li> <li> <p>Fiber\u8282\u70b9\u7ed3\u6784\uff1a<code>tag</code>/<code>stateNode</code>/<code>child</code>/<code>lanes</code></p> </li> <li> <p>\u53cc\u7f13\u5b58\u673a\u5236\uff1acurrent\u6811\u4e0eworkInProgress\u6811</p> </li> <li> <p>\u6e90\u7801\u5b9a\u4f4d\uff1a<code>ReactFiber.js</code>\u5173\u952e\u5b57\u6bb5\u89e3\u6790</p> </li> <li> <p>Fiber\u8282\u70b9\u8bbe\u8ba1</p> <ul> <li> <p>\u94fe\u8868\u7ed3\u6784\uff1a<code>child</code>/<code>sibling</code>/<code>return</code>\u904d\u5386\u8def\u5f84</p> </li> <li> <p>\u53cc\u7f13\u5b58\u6811\uff1a<code>current</code>\u4e0e<code>workInProgress</code>\u5207\u6362\u7b56\u7565</p> </li> </ul> </li> <li> <p>\u534f\u8c03\u7b97\u6cd5</p> <ul> <li> <p>Diff\u4f18\u5316\uff1a\u5355\u8282\u70b9/\u591a\u8282\u70b9\u6bd4\u5bf9\u7b56\u7565\uff08<code>reconcileChildFibers</code>\uff09</p> </li> <li> <p>\u526f\u4f5c\u7528\u6536\u96c6\uff1a<code>subtreeFlags</code>\u5192\u6ce1\u6807\u8bb0</p> </li> </ul> </li> <li> <p>\u63d0\u4ea4\u9636\u6bb5</p> <ul> <li> <p>\u4e09\u9636\u6bb5\u5212\u5206\uff1aBeforeMutation\u2192Mutation\u2192Layout</p> </li> <li> <p>DOM\u539f\u5b50\u64cd\u4f5c\uff1a<code>commitPlacement</code>\u8282\u70b9\u63d2\u5165</p> </li> </ul> </li> <li> <p>\u6e90\u7801\u7cbe\u8bfb\uff1a<code>ReactFiberWorkLoop.js</code>\u6784\u5efa\u6d41\u7a0b</p> </li> </ul>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/","title":"\u5f15\u8a00","text":"<p>\u5728\u6d4f\u89c8\u5668\u5355\u7ebf\u7a0b\u6a21\u578b\u4e2d\uff0cJavaScript \u6267\u884c\u3001\u5783\u573e\u56de\u6536\uff08GC\uff09\u3001\u7528\u6237\u4ea4\u4e92\u54cd\u5e94\u4e0e UI \u6e32\u67d3\u7ade\u4e89\u540c\u4e00\u4e3b\u7ebf\u7a0b\u8d44\u6e90\u3002\u7528\u6237\u5c4f\u5e55\u4ee5 60Hz \u5237\u65b0\u7387\u8fd0\u884c\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u5fc5\u987b\u5728\u00a016.6ms\u00a0\u5185\u5b8c\u6210\u6bcf\u5e27\u6e32\u67d3\u4efb\u52a1\u2014\u2014\u4e00\u65e6 JavaScript \u6267\u884c\u8d85\u65f6\uff0c\u5c06\u89e6\u53d1\u6e32\u67d3\u5e27\u4e22\u5931\uff08Dropped Frames\uff09\uff0c\u5bfc\u81f4\u9875\u9762\u5361\u987f\u751a\u81f3\u4ea4\u4e92\u51bb\u7ed3\u3002 React \u4f5c\u4e3a\u6570\u636e\u9a71\u52a8\u578b UI \u6846\u67b6\uff0c\u9762\u4e34\u6838\u5fc3\u6311\u6218\uff1a 1. \u8d44\u6e90\u74f6\u9888\uff1a\u7ec4\u4ef6\u6811\u6df1\u5ea6\u904d\u5386\uff08\u5982\u4e07\u7ea7\u8282\u70b9 diff\uff09\u53ef\u80fd\u963b\u585e\u4e3b\u7ebf\u7a0b 2. \u4f18\u5148\u7ea7\u51b2\u7a81\uff1a\u7528\u6237\u4ea4\u4e92\uff08\u70b9\u51fb/\u8f93\u5165\uff09\u9700\u5373\u65f6\u54cd\u5e94\uff0c\u6570\u636e\u52a0\u8f7d\u53ef\u5ef6\u8fdf 3. \u4efb\u52a1\u7ade\u4e89\uff1a\u6e32\u67d3\u66f4\u65b0\u4e0e JS \u903b\u8f91\u5171\u4eab\u6709\u9650\u8ba1\u7b97\u8d44\u6e90 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0cReact \u8bbe\u8ba1\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8c03\u5ea6\u7cfb\u7edf\u548c\u4f18\u5148\u7ea7\u6a21\u578b\uff0c\u6838\u5fc3\u601d\u8def\u662f\u901a\u8fc7\u65f6\u95f4\u5207\u7247\u6765\u5c06\u957f\u4efb\u52a1\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u4efb\u52a1\u6267\u884c\uff0c\u907f\u514d\u963b\u585e\u6e32\u67d3\u5e27\uff0c\u6b64\u5916\u57fa\u4e8e\u4f18\u5148\u7ea7\u6a21\u578b\u5bf9\u4efb\u52a1\u6839\u636e\u7d27\u6025\u7a0b\u5ea6\u6765\u8bbe\u7f6e\u4f18\u5148\u7ea7\uff0c\u4ee5\u4fbf\u4f18\u5148\u5904\u7406\u7d27\u6025\u7684\u4efb\u52a1\uff0c\u5982\u7528\u6237\u8f93\u5165\u3002</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_2","title":"\u8c03\u5ea6\u7cfb\u7edf\u7684\u5b9e\u73b0","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_3","title":"\u62bd\u8c61\u63a5\u53e3","text":"<p>React \u4f5c\u4e3a\u6784\u5efa\u7528\u6237\u754c\u9762\u7684 JavaScript \u5e93\uff0c\u5176\u534f\u8c03\u5668\uff08Reconciler\uff09\u9700\u8981\u5904\u7406\u8bf8\u5982\u72b6\u6001\u66f4\u65b0\u3001\u7ec4\u4ef6\u6302\u8f7d/\u5378\u8f7d\u3001\u526f\u4f5c\u7528\u6267\u884c\u7b49\u591a\u6837\u5316\u7684\u4efb\u52a1\u3002\u8fd9\u4e9b\u4efb\u52a1\u867d\u7136\u5728\u89e6\u53d1\u573a\u666f\u548c\u6267\u884c\u903b\u8f91\u4e0a\u5b58\u5728\u663e\u8457\u5dee\u5f02\uff0c\u4f46 React \u5e76\u672a\u4e3a\u6bcf\u7c7b\u4efb\u52a1\u5355\u72ec\u8bbe\u8ba1\u8c03\u5ea6\u903b\u8f91\uff0c\u800c\u662f\u5c06\u4efb\u52a1\u62bd\u8c61\u6210\u4e00\u4e2a\u7279\u5b9a\u7684 Task \u63a5\u53e3\uff0c\u6240\u6709\u9700\u8981\u88ab\u8c03\u5ea6\u7cfb\u7edf\u6267\u884c\u7684\u4efb\u52a1\u90fd\u9700\u8981\u7b26\u5408\u8be5\u63a5\u53e3\u7684\u89c4\u8303\u3002</p> <pre><code>type Task = {\n  id: number, // \u4efb\u52a1\u552f\u4e00\u6807\u8bc6\n  callback: Callback | null, // \u56de\u8c03\n  priorityLevel: PriorityLevel, // \u4f18\u5148\u7ea7\n  startTime: number, // \u8ba1\u5212\u5f00\u59cb\u65f6\u95f4\n  expirationTime: number, // \u8fc7\u671f\u65f6\u95f4\n  sortIndex: number, // \u5728\u4efb\u52a1\u961f\u5217\u4e2d\u6392\u5e8f\u4f7f\u7528\uff0ctimerQueue\u53d6\u81eastartTime\uff0ctaskQueue\u53d6\u81eaexpirationTime\n  isQueued?: boolean, // \u662f\u5426\u5df2\u7ecf\u5728\u4efb\u52a1\u961f\u5217\u4e2d\n};\n</code></pre> <p>\u6211\u4eec\u79f0\u5b9e\u73b0 Task \u63a5\u53e3\u7684 js \u5bf9\u8c61\u4e3a task\uff0ctask \u662f\u8c03\u5ea6\u7cfb\u7edf\u7684\u6700\u5c0f\u8c03\u5ea6\u5355\u5143\u3002\u4ece Task \u53ef\u4ee5\u770b\u51fa\uff0c\u6bcf\u4e2a task \u90fd\u6709\u4e00\u4e2a id\u3001callback\u3001priorityLevel\u3001startTime \u7b49\u5b57\u6bb5\uff0c\u6bcf\u4e2a\u5b57\u6bb5\u90fd\u6709\u5404\u81ea\u7684\u4f5c\u7528\uff0c\u4f8b\u5982\u8c03\u5ea6\u7cfb\u7edf\u6267\u884c task \u6700\u7ec8\u6267\u884c\u7684\u5176\u5b9e\u662f <code>task.callback</code>, priorityLevel \u8bb0\u5f55\u4e86\u8be5 task \u7684\u4f18\u5148\u7ea7\u3002</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_4","title":"\u53cc\u4efb\u52a1\u961f\u5217\u8bbe\u8ba1\u4e0e\u6700\u5c0f\u5806","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_5","title":"\u4f18\u5148\u7ea7\u961f\u5217","text":"<p>\u73b0\u4ee3\u524d\u7aef\u6846\u67b6\u7684\u8c03\u5ea6\u7cfb\u7edf\u9700\u8981\u7edf\u7b79\u5f02\u6b65\u4efb\u52a1\u7684\u4f18\u5148\u7ea7\u4e0e\u6267\u884c\u65f6\u673a\u3002\u4f20\u7edf\u5355\u961f\u5217\uff08FIFO\uff09\u7ed3\u6784\u65e0\u6cd5\u6ee1\u8db3\u5dee\u5f02\u5316\u8c03\u5ea6\u9700\u6c42\uff0c\u56e0\u6b64\u4e3b\u6d41\u65b9\u6848\u91c7\u7528\u4f18\u5148\u7ea7\u961f\u5217 \uff08Priority Queue\uff09\u5b9e\u73b0\u4efb\u52a1\u6392\u5e8f\u3002React \u8c03\u5ea6\u5668\u5728\u6b64\u57fa\u7840\u4e0a\u521b\u65b0\u6027\u5730\u5f15\u5165\u53cc\u961f\u5217\u67b6\u6784 \uff0c\u901a\u8fc7\u4e24\u4e2a\u57fa\u4e8e\u5c0f\u9876\u5806\uff08Min-Heap\uff09\u5b9e\u73b0\u7684\u4f18\u5148\u7ea7\u961f\u5217\u534f\u540c\u5de5\u4f5c\uff1a - taskQueue \uff08\u7acb\u5373\u6267\u884c\u961f\u5217\uff09\uff1a\u5b58\u50a8\u5df2\u5c31\u7eea\u7684\u9ad8\u4f18\u4efb\u52a1\uff08\u5982\u7528\u6237\u4ea4\u4e92\uff09\uff0c\u57fa\u4e8e\u8fc7\u671f\u65f6\u95f4 \uff08expirationTime\uff09\u6392\u5e8f\u3002\u8fc7\u671f\u65f6\u95f4\u8d8a\u65e9\uff08\u6570\u503c\u8d8a\u5c0f\uff09\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u961f\u5217\u9876\u90e8\u59cb\u7ec8\u662f\u5f53\u524d\u6700\u7d27\u6025\u4efb\u52a1 - timerQueue \uff08\u5ef6\u8fdf\u6267\u884c\u961f\u5217\uff09\uff1a\u5b58\u50a8\u5c1a\u672a\u5c31\u7eea\u7684\u4f4e\u4f18\u4efb\u52a1\uff08\u5982\u6570\u636e\u9884\u52a0\u8f7d\uff09\uff0c\u57fa\u4e8e\u8ba1\u5212\u65f6\u95f4 \uff08startTime\uff09\u6392\u5e8f\u3002\u8ba1\u5212\u65f6\u95f4\u8d8a\u65e9\uff08\u6570\u503c\u8d8a\u5c0f\uff09\uff0c\u89e6\u53d1\u8c03\u5ea6\u7684\u65f6\u673a\u8d8a\u5feb \u5f53\u4efb\u52a1\u88ab\u521b\u5efa\u65f6\uff0cReact\u4f1a\u6839\u636e <code>task.startTime</code> \u6765\u51b3\u5b9a\u5b58\u50a8\u5230\u54ea\u4e2a\u961f\u5217\u4e2d: - \u82e5 <code>task.startTime&gt;currentTime</code>\uff0c\u4f4e\u4f18\u5148\u4efb\u52a1\uff0c\u5b58\u50a8\u5230 timerQueue \u5ef6\u540e\u6267\u884c\u3002 - \u82e5 <code>task.startTime&lt;=currentTime</code>\uff0c\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\uff0c\u5b58\u50a8\u5230 taskQueue \u5c3d\u5feb\u6267\u884c\u3002 React \u8c03\u5ea6\u7cfb\u7edf\u53ea\u4f1a\u6267\u884c taskQueue \u4e2d\u7684\u4efb\u52a1\uff0c\u5e76\u4e14\u4f1a\u4e0d\u65f6\u5730\u68c0\u67e5 timerQueue \u961f\u5217\uff0c\u5982\u679c\u6709 <code>task.startTime&lt;=currentTime</code> \u7684\u4efb\u52a1\uff0c\u4f1a\u88ab\u63d0\u5347\u5230 taskQueue \u961f\u5217\u4e2d\u3002</p> <pre><code>function advanceTimers(currentTime: number) {\n  // \u68c0\u67e5timerQueue\u662f\u5426\u6709\u8fc7\u671f\u4efb\u52a1\uff0c\u5e76\u5c06\u5176\u79fb\u52a8\u5230taskQueue\u4e2d\n  let timer = peek(timerQueue);\n  while (timer !== null) {\n    if (timer.callback === null) {\n      // \u4efb\u52a1\u88ab\u53d6\u6d88\uff0c\u51fa\u961f\n      pop(timerQueue);\n    } else if (timer.startTime &lt;= currentTime) {\n      // \u4efb\u52a1\u8fc7\u671f\uff0c\u79fb\u52a8\u5230taskQueue\u4e2d\u5c3d\u5feb\u6267\u884c\n      pop(timerQueue);\n      timer.sortIndex = timer.expirationTime;\n      push(taskQueue, timer);\n      if (enableProfiling) {\n        markTaskStart(timer, currentTime);\n        timer.isQueued = true;\n      }\n    } else {\n      return;\n    }\n    timer = peek(timerQueue);\n  }\n}\n</code></pre> <p><code>advanceTimers</code> \u4e13\u95e8\u8d1f\u8d23\u68c0\u67e5 timerQueue \u961f\u5217\u662f\u5426\u6709\u8fc7\u671f\u7684\u4efb\u52a1\uff0c\u5982\u679c\u6709\u5219\u79fb\u52a8\u5230 taskQueue \u4e2d\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u867d\u7136 timerQueue \u548c taskQueue \u6211\u4eec\u79f0\u4e3a\u961f\u5217\uff0c\u4f46\u662f\u672c\u8d28\u4e0a\u4e24\u8005\u90fd\u662f\u4ee5\u6700\u5c0f\u5806\u7684\u5f62\u5f0f\u5b58\u5728\u3002 <code>peek</code> \u51fd\u6570\u8fd4\u56de\u7684\u662f\u6700\u5c0f\u5806\u7684\u5806\u9876\uff0ctimerQueue \u548c taskQueue \u90fd\u91c7\u7528 sortIndex \u5b57\u6bb5\u6765\u51b3\u5b9a\u5143\u7d20\u5728\u5806\u4e2d\u7684\u4f4d\u7f6e\uff0c\u4f46\u662f\u4e24\u8005 sortIndex \u5b57\u6bb5\u7684\u53d6\u503c\u4e0d\u540c\uff0ctimerQueue \u53d6\u81ea startTime\uff0ctaskQueue \u53d6\u81ea expirationTime\uff0c\u5373 timerQueue \u8d8a\u524d\u9762\u7684\u5143\u7d20 startTime \u8d8a\u5c0f\uff0c\u9700\u8981\u8d8a\u65e9\u6267\u884c\uff0c\u800c taskQueue \u8d8a\u524d\u9762\u7684\u5143\u7d20\u8fc7\u671f\u65f6\u95f4\u8d8a\u957f\uff0c\u8d8a\u9700\u8981\u5c3d\u5feb\u6267\u884c\u3002 \u5728 advanceTimers \u51fd\u6570\u4e2d\u4e0d\u65ad\u53d6\u51fa\uff08\u4e0d\u51fa\u5806\uff09\u5806\u9876\uff0c\u6bcf\u6b21\u9047\u5230\u8fc7\u671f\u4efb\u52a1\u5c31\u4ece\u5806\u4e2d <code>pop</code> \u5806\u9876\u5e76 <code>push</code> \u5230 taskQueue \u4e2d\uff0c\u4e0d\u65ad\u91cd\u590d\u6b64\u64cd\u4f5c\uff0c\u76f4\u5230\u5806\u4e3a\u7a7a\u6216\u8005\u5806\u9876\u8ba1\u5212\u5f00\u59cb\u65f6\u95f4\u5927\u4e8e\u5f53\u524d\u65f6\u95f4\u3002 \u5982\u679c\u5806\u9876\u8ba1\u5212\u5f00\u59cb\u65f6\u95f4\u5927\u4e8e\u5f53\u524d\u65f6\u95f4\uff0c\u7531\u4e8e\u6700\u5c0f\u5806\u5806\u9876\u6700\u5c0f\u7684\u7279\u6027\uff0c\u540e\u9762\u7684\u5143\u7d20\u7684\u8ba1\u5212\u5f00\u59cb\u65f6\u95f4\u90fd\u5fc5\u7136\u5927\u4e8e\u5806\u9876\u5143\u7d20\u7684\u8ba1\u5212\u5f00\u59cb\u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u8bf4\u540e\u9762\u7684\u5143\u7d20\u4e5f\u5fc5\u7136\u6ca1\u6709\u8fc7\u671f\uff0c\u56e0\u6b64\u76f4\u63a5 <code>return</code> \u9000\u51fa\u51fd\u6570\u3002</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_6","title":"\u6700\u5c0f\u5806","text":"<p>\u5806\uff08Heap\uff09 \u662f\u4e00\u79cd\u7279\u6b8a\u7684\u6811\u5f62\u6570\u636e\u7ed3\u6784\uff0c\u901a\u5e38\u662f\u4e00\u4e2a \u5b8c\u5168\u4e8c\u53c9\u6811\uff08Complete Binary Tree\uff09 \uff0c\u5b83\u6ee1\u8db3\u4ee5\u4e0b\u6027\u8d28\uff1a - \u7236\u8282\u70b9\u4e0e\u5b50\u8282\u70b9\u4e4b\u95f4\u6ee1\u8db3\u5806\u5e8f\u5173\u7cfb \uff1a     - \u5728 \u6700\u5927\u5806\uff08Max Heap\uff09 \u4e2d\uff0c\u7236\u8282\u70b9\u7684\u503c\u603b\u662f\u5927\u4e8e\u6216\u7b49\u4e8e\u5176\u5b50\u8282\u70b9\u7684\u503c\u3002     - \u5728 \u6700\u5c0f\u5806\uff08Min Heap\uff09 \u4e2d\uff0c\u7236\u8282\u70b9\u7684\u503c\u603b\u662f\u5c0f\u4e8e\u6216\u7b49\u4e8e\u5176\u5b50\u8282\u70b9\u7684\u503c\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a\u6700\u5c0f\u5806\u7684\u4f8b\u5b50</p> <pre><code>    1\n   / \\\n  2   3\n / \\\n4   5\n</code></pre> <p>\u867d\u7136\u5806\u662f\u6811\u5f62\u7ed3\u6784\uff0c\u4f46\u662f\u5b9e\u9645\u4f7f\u7528\u65f6\u4e5f\u53ef\u4ee5\u7528\u5c42\u7ea7\u6392\u5e8f\u7684\u6570\u7ec4\u8868\u793a\uff0c\u6b64\u65f6\u5806\u5177\u6709\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u89c4\u5f8b\uff1a</p> \u8282\u70b9 \u7d22\u5f15 \u6839\u8282\u70b9 0 \u5de6\u5b50\u8282\u70b9 i*2 + 1 \u53f3\u5b50\u8282\u70b9 i*2 + 2 \u7236\u8282\u70b9 floor((i-1)/2) \u6216 (i-1) &gt;&gt;&gt; 1 \u5728\u5b8c\u5168\u4e8c\u53c9\u6811\u4e2d\uff0c\u9664\u4e86\u6700\u540e\u4e00\u5c42\u5916\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e24\u4e2a\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u7b2c k \uff08\u4ece 0 \u5f00\u59cb\uff09\u5c42\u7684\u8282\u70b9\u6570\u5c31\u662f <code>2^k - 1</code>\uff0c\u7b2c k \uff08\u4ece 0 \u5f00\u59cb\uff09\u5c42\u7b2c m \uff08\u4ece 0 \u5f00\u59cb\uff09\u4e2a\u8282\u70b9\u7d22\u5f15 i \u5c31\u662f <code>2^k - 1 + m</code>\uff0c\u90a3\u4e48\u5176\u5de6\u5b50\u8282\u70b9\u5728\u7b2c k+1 \u5c42\u7b2c 2 m \u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u5c31\u662f\uff1a <pre><code>2^(k+1) - 1 + 2m = 2(2^k + m) - 1 = 2(i + 1) - 1 = 2i + 1\n</code></pre> <p>\u53f3\u5b50\u8282\u70b9\u53ea\u8981\u5728\u5de6\u5b50\u8282\u70b9\u57fa\u7840\u4e0a\u52a0 1 \u5c31\u884c\u4e86\u662f\uff0c\u5373 <code>2i + 2</code>\u3002\u540c\u65f6\u4e5f\u53ef\u4ee5\u53cd\u63a8\u4f1a\u7236\u8282\u70b9\u4e0b\u6807 i\uff0c\u63a8\u5bfc\u8fc7\u7a0b\u7565\uff0c\u6709\u5174\u8da3\u53ef\u4ee5\u81ea\u884c\u67e5\u8be2\u3002 \u5806\u6709\u4e09\u4e2a\u91cd\u8981\u7684\u64cd\u4f5c\uff1a - peek\uff1a\u8fd4\u56de\u5806\u9876 - Insert/push\uff1a\u63d2\u5165\u5143\u7d20 - pop\uff1a\u53d6\u51fa\u5806\u9876</p> <pre><code>export function peek&lt;T: Node&gt;(heap: Heap&lt;T&gt;): T | null {\n  return heap.length === 0 ? null : heap[0];\n}\n</code></pre> <p>peek \u64cd\u4f5c\u65f6\u95f4\u590d\u6742\u5ea6\u662f O (1)\uff0c\u800c\u63d2\u5165\u5143\u7d20\u4e3a\u4e86\u4fdd\u6301\u5806\u5e8f\u9700\u8981\u6267\u884c\u4e0a\u6d6e\uff0c\u540c\u7406\uff0c\u53d6\u51fa\u5806\u9876\u540e\u4e3a\u4e86\u4fdd\u6301\u5806\u5e8f\u9700\u8981\u6267\u884c\u4e0b\u6c89\u3002 \u6240\u8c13\u7684\u4e0a\u6d6e\u662f\u6307\u5143\u7d20\u63d2\u5165\u5230\u672b\u5c3e\u540e\uff0c\u901a\u8fc7\u4e0d\u65ad\u4e0e\u7236\u8282\u70b9\u6bd4\u8f83\u4ea4\u6362\uff0c\u4ece\u800c\u4fdd\u6301\u539f\u6709\u5806\u5e8f\u7684\u6548\u679c\u7684\u64cd\u4f5c\u3002</p> <pre><code>export function push&lt;T: Node&gt;(heap: Heap&lt;T&gt;, node: T): void {\n  const index = heap.length;\n  heap.push(node);\n  siftUp(heap, node, index);\n}\nfunction siftUp&lt;T: Node&gt;(heap: Heap&lt;T&gt;, node: T, i: number): void {\n  let index = i;\n  while (index &gt; 0) {\n    const parentIndex = (index - 1) &gt;&gt;&gt; 1;\n    const parent = heap[parentIndex];\n    if (compare(parent, node) &gt; 0) {\n      // The parent is larger. Swap positions.\n      heap[parentIndex] = node;\n      heap[index] = parent;\n      index = parentIndex;\n    } else {\n      // The parent is smaller. Exit.\n      return;\n    }\n  }\n}\n</code></pre> <p>\u4e0b\u6c89\u5219\u662f\u6307\u5728\u5806\u5f39\u51fa\u5806\u9876\u540e\uff0c\u5c06\u5806\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u79fb\u52a8\u5230\u961f\u5934\u4f4d\u7f6e\uff0c\u6b64\u65f6\u6b64\u5143\u7d20\u4f5c\u4e3a\u5806\u9876\uff0c\u7136\u540e\u4e0d\u65ad\u5c06\u5176\u4e0e\u5de6\u53f3\u5b50\u8282\u70b9\u6bd4\u8f83\u4ea4\u6362\uff0c\u6700\u540e\u4fdd\u6301\u539f\u6709\u5806\u5e8f\u7684\u64cd\u4f5c\u3002</p> <pre><code>export function pop&lt;T: Node&gt;(heap: Heap&lt;T&gt;): T | null {\n  if (heap.length === 0) {\n    return null;\n  }\n  const first = heap[0];\n  const last = heap.pop();\n  if (last !== first) {\n    heap[0] = last;\n    siftDown(heap, last, 0);\n  }\n  return first;\n}\n\nfunction siftDown&lt;T: Node&gt;(heap: Heap&lt;T&gt;, node: T, i: number): void {\n  let index = i;\n  const length = heap.length;\n  const halfLength = length &gt;&gt;&gt; 1;\n  while (index &lt; halfLength) {\n    const leftIndex = (index + 1) * 2 - 1;\n    const left = heap[leftIndex];\n    const rightIndex = leftIndex + 1;\n    const right = heap[rightIndex];\n\n    // If the left or right node is smaller, swap with the smaller of those.\n    if (compare(left, node) &lt; 0) {\n      if (rightIndex &lt; length &amp;&amp; compare(right, left) &lt; 0) {\n        heap[index] = right;\n        heap[rightIndex] = node;\n        index = rightIndex;\n      } else {\n        heap[index] = left;\n        heap[leftIndex] = node;\n        index = leftIndex;\n      }\n    } else if (rightIndex &lt; length &amp;&amp; compare(right, node) &lt; 0) {\n      heap[index] = right;\n      heap[rightIndex] = node;\n      index = rightIndex;\n    } else {\n      // Neither child is smaller. Exit.\n      return;\n    }\n  }\n}\n</code></pre> <p>\u4e0a\u6d6e\u548c\u4e0b\u6c89\u4e24\u8005\u6700\u574f\u60c5\u51b5\u4e0b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f O (logn)\uff0c\u8fd9\u4f7f\u5f97\u5806\u7684\u63d2\u5165\u548c\u5f39\u51fa\u90fd\u975e\u5e38\u9ad8\u6548\uff0c\u9002\u7528\u4e8e\u9700\u8981\u9891\u7e41\u63d2\u5165\u7684\u573a\u666f\u3002 \u5982\u679c\u91c7\u7528\u4f20\u7edf\u961f\u5217\uff08FIFO\uff09+ \u4e8c\u5206\u641c\u7d22\u7684\u65b9\u5f0f\u5b9e\u73b0\u4efb\u52a1\u961f\u5217\uff0c\u4e8c\u5206\u641c\u7d22\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f O(logn)\uff0c\u4f46\u662f\u6bcf\u6b21\u63d2\u5165\u90fd\u4f1a\u5bfc\u81f4\u63d2\u5165\u4f4d\u7f6e\u540e\u9762\u6240\u6709\u7684\u5143\u7d20\u79fb\u52a8\u540e\u4e00\u4f4d\uff0c\u8fd9\u4f7f\u5f97\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u9000\u5316\u81f3 O (n)\u3002\u540c\u7406\uff0c\u6bcf\u6b21\u5f39\u51fa\u961f\u5934\u5143\u7d20\u90fd\u4f1a\u4f7f\u540e\u9762\u7684\u5143\u7d20\u5411\u524d\u79fb\u52a8\u4e00\u4f4d\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u662f O (n)\uff0c\u800c\u6700\u5c0f\u5806\u4e0a\u6d6e\u548c\u4e0b\u6c89\u90fd\u662f\u901a\u8fc7\u4ea4\u6362\u8282\u70b9\u5b9e\u73b0\u7684\uff0c\u5e76\u4e14\u4e0a\u6d6e\u6216\u4e0b\u6c89\u5728\u6700\u574f\u7684\u60c5\u51b5\u4e0b\u4e5f\u53ea\u8981\u8fdb\u884c logn \u6b21\u4ea4\u6362\uff0c\u56e0\u6b64\u6bcf\u6b21\u5e73\u5747\u65f6\u95f4\u590d\u6742\u5ea6\u662f O (logn)\uff0c\u6027\u80fd\u66f4\u597d\uff0c\u66f4\u9002\u5408\u8fd9\u79cd\u9891\u7e41\u63d2\u5165\u3001\u5f39\u51fa\u7684\u64cd\u4f5c\u3002</p> \u64cd\u4f5c \u6700\u5c0f\u5806 \u4f20\u7edf\u6392\u5e8f\u961f\u5217\uff08FIFO\uff09 \u53d6\u6700\u5c0f\u503c O (1) O (1) \u5f39\u51fa\u6700\u5c0f\u503c O (logn) O (n) \u63d2\u5165\u5143\u7d20 O (logn) O (n) \u7a7a\u95f4\u590d\u6742\u5ea6 O (n) O (n)"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_7","title":"\u6267\u884c\u7684\u65f6\u673a","text":"<p>\u8c03\u5ea6\u4efb\u52a1\u4f1a\u4e34\u65f6\u5b58\u50a8\u5728\u53cc\u961f\u5217\u4e2d\uff0c\u6700\u7ec8\u603b\u5f52\u662f\u8981\u6267\u884c\u7684\uff0c\u800c\u6267\u884c\u7684\u65f6\u673a\u975e\u5e38\u91cd\u8981\u3002\u6211\u4eec\u77e5\u9053\u6d4f\u89c8\u5668\u8fd0\u884c\u65f6\u5e95\u5c42\u662f\u7531\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u5b9e\u73b0\u5f02\u6b65\u7684\uff0c\u5f02\u6b65\u4efb\u52a1\u4e5f\u5206\u4e3a\u5fae\u4efb\u52a1\u548c\u5b8f\u4efb\u52a1\uff0c\u5fae\u4efb\u52a1\u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u6bcf\u4e2a\u4e8b\u4ef6\u5faa\u73af\u5468\u671f\u5185\u90fd\u4f1a\u6267\u884c\u5b8c\u6240\u6709\u5fae\u4efb\u52a1\uff0c\u800c\u5b8f\u4efb\u52a1\u4f18\u5148\u7ea7\u8f83\u4f4e\uff0c\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\u5468\u671f\u53ea\u6267\u884c\u4e00\u4e2a\u5b8f\u4efb\u52a1,\uff0c\u800c React \u8c03\u5ea6\u4efb\u52a1\u4e3b\u8981\u662f\u5728\u5b8f\u4efb\u52a1\u4e2d\u6267\u884c\u7684\u3002</p> <pre><code>function unstable_scheduleCallback(\n  priorityLevel: PriorityLevel,\n  callback: Callback,\n  options?: {delay: number},\n): Task {\n  var currentTime = getCurrentTime();\n\n  var startTime;\n  if (typeof options === 'object' &amp;&amp; options !== null) {\n    var delay = options.delay;\n    if (typeof delay === 'number' &amp;&amp; delay &gt; 0) {\n      startTime = currentTime + delay;\n    } else {\n      startTime = currentTime;\n    }\n  } else {\n    startTime = currentTime;\n  }\n\n  var timeout;\n  switch (priorityLevel) {\n    case ImmediatePriority:\n      // Times out immediately\n      timeout = -1;\n      break;\n    case UserBlockingPriority:\n      // Eventually times out\n      timeout = userBlockingPriorityTimeout;\n      break;\n    case IdlePriority:\n      // Never times out\n      timeout = maxSigned31BitInt;\n      break;\n    case LowPriority:\n      // Eventually times out\n      timeout = lowPriorityTimeout;\n      break;\n    case NormalPriority:\n    default:\n      // Eventually times out\n      timeout = normalPriorityTimeout;\n      break;\n  }\n\n  var expirationTime = startTime + timeout;\n\n  var newTask: Task = {\n    id: taskIdCounter++,\n    callback,\n    priorityLevel,\n    startTime,\n    expirationTime,\n    sortIndex: -1,\n  };\n  if (enableProfiling) {\n    newTask.isQueued = false;\n  }\n\n  if (startTime &gt; currentTime) {\n    // This is a delayed task.\n    newTask.sortIndex = startTime;\n    push(timerQueue, newTask);\n    if (peek(taskQueue) === null &amp;&amp; newTask === peek(timerQueue)) {\n      // All tasks are delayed, and this is the task with the earliest delay.\n      if (isHostTimeoutScheduled) {\n        // Cancel an existing timeout.\n        cancelHostTimeout();\n      } else {\n        isHostTimeoutScheduled = true;\n      }\n      // Schedule a timeout.\n      requestHostTimeout(handleTimeout, startTime - currentTime);\n    }\n  } else {\n    newTask.sortIndex = expirationTime;\n    push(taskQueue, newTask);\n    if (enableProfiling) {\n      markTaskStart(newTask, currentTime);\n      newTask.isQueued = true;\n    }\n    // Schedule a host callback, if needed. If we're already performing work,\n    // wait until the next time we yield.\n    if (!isHostCallbackScheduled &amp;&amp; !isPerformingWork) {\n      isHostCallbackScheduled = true;\n      requestHostCallback();\n    }\n  }\n\n  return newTask;\n}\n</code></pre> <p><code>Unstable_scheduleCallback</code> \u51fd\u6570\u662f React \u66b4\u9732\u7ed9\u5916\u5c42\u4f7f\u7528\u7684\u521b\u5efa\u8c03\u5ea6\u4efb\u52a1\u7684 API\uff0c\u6b63\u5982\u6211\u4eec\u524d\u9762\u6240\u8bf4\u7684\uff0c<code>Unstable_scheduleCallback</code> \u51fd\u6570\u4f1a\u6839\u636e\u4f18\u5148\u7ea7\uff08priorityLevel\uff09\u6765\u786e\u5b9a\u8ba1\u5212\u5f00\u59cb\u65f6\u95f4\uff08startTime\uff09\uff0c\u5e76\u901a\u8fc7\u5224\u65ad\u8ba1\u5212\u5f00\u59cb\u65f6\u95f4\u6765\u51b3\u5b9a\u5c06\u4efb\u52a1\u5b58\u50a8\u5728 timerQueue \u8fd8\u662f taskQueue \u4e2d\uff0c\u5e76\u4e14\u4f1a\u6267\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u3002</p> <pre><code>graph TD\n    A[\u521b\u5efa\u65b0\u4efb\u52a1] --&gt; B{startTime &gt; currentTime?}\n    B --&gt;|\u662f| C[\u52a0\u5165timerQueue]\n    B --&gt;|\u5426| D[\u52a0\u5165taskQueue]\n    C --&gt; E[\u8bbe\u7f6ehostTimeout]\n    D --&gt; F[requestHostCallback]\n    E --&gt;|\u8d85\u65f6| G[advanceTimers]\n    G --&gt; H[\u8fc1\u79fb\u5230taskQueue]\n    H --&gt; F\n</code></pre> <p>\u6839\u636e\u524d\u9762\u7684\u4ee3\u7801\u5206\u6790\uff0c\u4efb\u52a1\u6267\u884c\u7684\u5173\u952e\u5728\u4e8e <code>requestHostCallback</code> \u51fd\u6570\u548c <code>requestHostTimeout</code> \u51fd\u6570\u3002 \u9996\u5148\u6765\u770b <code>requestHostTimeout</code> \u548c <code>handleTimeout</code>\u3002<code>requestHostTimeout</code> \u51fd\u6570\u672c\u8d28\u4e0a\u662f\u5bf9 setTimeout \u7684\u5c01\u88c5\u3002</p> <pre><code>// \u6355\u83b7\u5bf9\u672c\u5730API\u7684\u672c\u5730\u5f15\u7528\uff0c\u4ee5\u9632polyfill\u8986\u76d6\u5b83\nconst localSetTimeout = typeof setTimeout === 'function' ? setTimeout : null;\nfunction requestHostTimeout(\n  callback: (currentTime: number) =&gt; void,\n  ms: number,\n) {\n // \u4fdd\u5b58\u5b9a\u65f6\u5668id\uff0c\u4ee5\u4fbf\u540e\u9762\u53ef\u4ee5\u53d6\u6d88\u65f6\u53ef\u4ee5\u4f7f\u7528\n  taskTimeoutID = localSetTimeout(() =&gt; {\n    callback(getCurrentTime());\n  }, ms);\n}\n</code></pre> <p>\u5173\u952e\u5728\u4e8e <code>handleTimeout</code> \u51fd\u6570\uff0c\u5b9a\u65f6\u5668\u5230\u671f\u65f6\u4f1a\u6267\u884c\u6b64\u51fd\u6570\u3002</p> <pre><code>function handleTimeout(currentTime: number) {\n  isHostTimeoutScheduled = false; // \u6807\u8bb0\u5f53\u524d\u6ca1\u6709\u5b9a\u65f6\u5668\u6267\u884c\u8c03\u5ea6\u4efb\u52a1\n  advanceTimers(currentTime); // \u68c0\u67e5timerQueue\u662f\u5426\u6709\u8fc7\u671f\u4efb\u52a1\n\n  if (!isHostCallbackScheduled) { // \u5982\u679c\u4efb\u52a1\u961f\u5217\u6ca1\u6709\u88ab\u8c03\u5ea6\u6267\u884c\n    if (peek(taskQueue) !== null) { // taskQueue\u4e0d\u4e3a\u7a7a\n       // \u6267\u884c\u8c03\u5ea6\uff0c\u540c\u65f6\u6807\u8bb0\n      isHostCallbackScheduled = true;\n      requestHostCallback();\n    } else {\n      // \u5982\u679ctaskQueue\u662f\u7a7a\u7684\uff0c\u5219\u76f4\u63a5\u53d6timerQueue\u5806\u9876\u8c03\u5ea6\u5b9a\u65f6\u5668\u5ef6\u8fdf\u6267\u884c\n      const firstTimer = peek(timerQueue);\n      if (firstTimer !== null) {\n        requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n      }\n    }\n  }\n}\n</code></pre> <p>\u5728 <code>handleTimeout</code> \u51fd\u6570\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u5176\u6700\u7ec8\u6267\u884c\u7684\u4e5f\u662f <code>requestHostCallback</code> \u51fd\u6570\uff0c\u6240\u4ee5\u524d\u9762\u672c\u8d28\u4e0a\u53ea\u662f\u4f7f\u7528\u4e86\u5b9a\u65f6\u5668\u5ef6\u8fdf\u6267\u884c\u4e86 requestHostCallback \u51fd\u6570\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u91cd\u70b9\u5173\u6ce8 <code>requestHostCallback</code> \u51fd\u6570\u3002</p> <pre><code>function requestHostCallback() {\n  if (!isMessageLoopRunning) {\n    isMessageLoopRunning = true;\n    schedulePerformWorkUntilDeadline();\n  }\n}\n</code></pre> <p><code>requestHostCallback</code> \u51fd\u6570\u5f88\u77ed\uff0c\u6838\u5fc3\u903b\u8f91\u53ea\u6709 <code>isMessageLoopRunning</code> \u6807\u5fd7\u548c <code>schedulePerformWorkUntilDeadline</code> \u51fd\u6570\u8c03\u7528\u3002</p> <pre><code>let schedulePerformWorkUntilDeadline;\nif (typeof localSetImmediate === 'function') {\n  schedulePerformWorkUntilDeadline = () =&gt; {\n    localSetImmediate(performWorkUntilDeadline);\n  };\n} else if (typeof MessageChannel !== 'undefined') {\n  const channel = new MessageChannel();\n  const port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = () =&gt; {\n    port.postMessage(null);\n  };\n} else {\n  schedulePerformWorkUntilDeadline = () =&gt; {\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\n}\n</code></pre> <p><code>schedulePerformWorkUntilDeadline</code> \u548c\u524d\u9762\u7684 <code>localSetTimeout</code> \u51fd\u6570\u4e00\u6837\uff0c\u90fd\u662f\u5bf9\u539f\u751f API \u7684\u5c01\u88c5\uff0c<code>SchedulePerformWorkUntilDeadline</code> \u4f1a\u6839\u636e\u4e0d\u540c\u7684\u73af\u5883\u91c7\u7528\u4e0d\u540c\u7684 API\uff1a 1. Node \u6216\u8005 IE \u6d4f\u89c8\u5668\u73af\u5883\u4e0b\uff0c\u4f7f\u7528 <code>setImmediate</code> \u51fd\u6570\u3002 2. DOM \u6216\u8005 Worker \u73af\u5883\u4e0b\uff0c\u4f7f\u7528 <code>MessageChannel</code>\u3002 3. \u4f7f\u7528 <code>setTimeout</code> \u8fdb\u884c\u515c\u5e95\uff0c\u56e0\u4e3a <code>setTimeout</code> \u5728\u7edd\u5927\u591a\u6570\u73af\u5883\u548c\u65e7\u6d4f\u89c8\u5668\u4e2d\u90fd\u5177\u6709\u826f\u597d\u7684\u517c\u5bb9\u6027\u3002 React \u5728 DOM \u73af\u5883\u4e0b\u4f18\u5148\u4f7f\u7528 MessageChannel \u800c\u4e0d\u662f\u76f4\u63a5\u4f7f\u7528 setTimeout\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728 HTML \u89c4\u8303\u4e2d\uff0c\u5d4c\u5957 5 \u6b21\u4ee5\u4e0a\u7684\u00a0<code>setTimeout(..., 0)</code>\u00a0\u5f3a\u5236 4ms \u6700\u5c0f\u5ef6\u8fdf\uff0c\u5e76\u4e14\u76f8\u8f83\u4e8e setTimeout\uff0cMessageChannel \u4e0d\u4ec5\u540c\u6837\u5177\u6709\u826f\u597d\u7684\u517c\u5bb9\u6027\uff0c\u800c\u4e14\u5ef6\u8fdf\u66f4\u4f4e\u3002</p> <p>Timers can be nested; after five such nested timers, however, the interval is forced to be at least four milliseconds.</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_8","title":"\u65f6\u95f4\u5207\u7247","text":"<p>React \u521b\u65b0\u6027\u5730\u5f15\u5165\u4e86\u65f6\u95f4\u5207\u7247\u7279\u6027\uff0c\u6240\u8c13\u7684\u65f6\u95f4\u5207\u7247\u662f\u6307\u5c06\u957f\u4efb\u52a1\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u4efb\u52a1\u95f4\u9694\u6027\u5730\u6267\u884c\uff0c\u4ece\u800c\u907f\u514d\u957f\u65f6\u95f4\u5730\u963b\u585e\u4e3b\u7ebf\u7a0b\u3002\u65f6\u95f4\u5207\u7247\u662f\u4e00\u79cd\u975e\u5e38\u6709\u6548\u7684\u4f18\u5316\u957f\u4efb\u52a1\u7684\u65b9\u5f0f\u3002\u7531\u4e8e\u5fae\u4efb\u52a1\u548c\u540c\u6b65\u4efb\u52a1\u5177\u6709\u963b\u585e\u6027\uff0c\u4f1a\u5360\u7528\u4e3b\u7ebf\u7a0b\u963b\u585e UI \u6e32\u67d3\uff0c\u56e0\u6b64\u53ef\u4ee5\u770b\u5230 React \u91c7\u7528 MessageChannel \u548c setTimeout \u5b8f\u4efb\u52a1\u6765\u907f\u514d\u963b\u585e\u3002</p> <p>\u6ce8\u610f\uff1aNodejs \u4e2d\u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u548c\u6d4f\u89c8\u5668\u4e2d\u7684\u6709\u6240\u4e0d\u540c\uff0c\u56e0\u6b64setImmediate \u4e0d\u80fd\u4ee5\u5b8f\u4efb\u52a1/\u5fae\u4efb\u52a1\u7684\u89c6\u89d2\u6765\u770b\u5f85\uff0c\u4f46\u662f\u4f7f\u7528\u65b9\u5f0f\u5982\u4f55\uff0c\u5176\u76ee\u7684\u90fd\u662f\u4e3a\u4e86\u907f\u514d\u963b\u585e\u3002</p> <p><code>performWorkUntilDeadline</code> \u662f\u65f6\u95f4\u5207\u7247\u7684\u5165\u53e3\u51fd\u6570\uff0c\u4ece <code>schedulePerformWorkUntilDeadline</code> \u51fd\u6570\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c <code>schedulePerformWorkUntilDeadline</code> \u9488\u5bf9\u4e0d\u540c\u73af\u5883\u91c7\u7528\u5bf9\u5e94\u7684\u5f02\u6b65 API \u6765\u8c03\u7528 <code>performWorkUntilDeadline</code> \u51fd\u6570\uff0c\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7ee7\u7eed\u5173\u6ce8 <code>performWorkUntilDeadline</code>\u3002</p> <pre><code>const performWorkUntilDeadline = () =&gt; {\n  if (enableRequestPaint) {\n    needsPaint = false;\n  }\n  if (isMessageLoopRunning) {\n    const currentTime = getCurrentTime();\n    // Keep track of the start time so we can measure how long the main thread\n    // has been blocked.\n    startTime = currentTime;\n\n    // If a scheduler task throws, exit the current browser task so the\n    // error can be observed.\n    //\n    // Intentionally not using a try-catch, since that makes some debugging\n    // techniques harder. Instead, if `flushWork` errors, then `hasMoreWork` will\n    // remain true, and we'll continue the work loop.\n    let hasMoreWork = true;\n    try {\n      hasMoreWork = flushWork(currentTime);\n    } finally {\n      if (hasMoreWork) {\n        // If there's more work, schedule the next message event at the end\n        // of the preceding one.\n        schedulePerformWorkUntilDeadline();\n      } else {\n        isMessageLoopRunning = false;\n      }\n    }\n  }\n};\n</code></pre> <p><code>performWorkUntilDeadline</code> \u51fd\u6570\u901a\u8fc7\u8c03\u7528 <code>flushWork</code> \u51fd\u6570\u53bb\u6267\u884c\u8c03\u5ea6\u4efb\u52a1\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u903b\u8f91\u5c31\u662f <code>hasMoreWork</code>\uff0c\u5b83\u6807\u5fd7\u7740\u4efb\u52a1\u961f\u5217\u662f\u5426\u6267\u884c\u5b8c\u6bd5\uff0c\u5982\u679c\u6ca1\u6709\u6267\u884c\u5b8c\uff0c\u90a3\u4e48\u5c31\u7ee7\u7eed\u518d\u8c03\u7528 <code>schedulePerformWorkUntilDeadline</code> \u51fd\u6570\u53bb\u5f02\u6b65\u8c03\u7528\u81ea\u8eab\u3002</p> <pre><code>function flushWork(initialTime: number) {\n  // ... \u7701\u7565\u90e8\u5206\u4ee3\u7801\n  // We'll need a host callback the next time work is scheduled.\n  isHostCallbackScheduled = false;\n  if (isHostTimeoutScheduled) {\n    // We scheduled a timeout but it's no longer needed. Cancel it.\n    isHostTimeoutScheduled = false;\n    cancelHostTimeout();\n  }\n\n  isPerformingWork = true;\n  const previousPriorityLevel = currentPriorityLevel;\n  try {\n      return workLoop(initialTime);\n    }\n  } finally {\n    currentTask = null;\n    currentPriorityLevel = previousPriorityLevel;\n    isPerformingWork = false;\n  }\n}\n</code></pre> <p><code>flushWork</code> \u4e0b\u4e00\u6b65\u8c03\u7528 <code>workLoop</code> \u51fd\u6570\uff0c\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u5728 <code>isHostCallbackScheduled</code> \u548c <code>isPerformingWork</code> \u4e24\u4e2a\u6807\u5fd7\u7684\u8bbe\u7f6e\u3002</p> <pre><code>function workLoop(initialTime: number) {\n  let currentTime = initialTime;\n  advanceTimers(currentTime);\n  currentTask = peek(taskQueue);\n  while (currentTask !== null) {\n    if (!enableAlwaysYieldScheduler) {\n      if (currentTask.expirationTime &gt; currentTime &amp;&amp; shouldYieldToHost()) {\n        // This currentTask hasn't expired, and we've reached the deadline.\n        break;\n      }\n    }\n    // $FlowFixMe[incompatible-use] found when upgrading Flow\n    const callback = currentTask.callback;\n    if (typeof callback === 'function') {\n      // $FlowFixMe[incompatible-use] found when upgrading Flow\n      currentTask.callback = null;\n      // $FlowFixMe[incompatible-use] found when upgrading Flow\n      currentPriorityLevel = currentTask.priorityLevel;\n      // $FlowFixMe[incompatible-use] found when upgrading Flow\n      const didUserCallbackTimeout = currentTask.expirationTime &lt;= currentTime;\n      if (enableProfiling) {\n        // $FlowFixMe[incompatible-call] found when upgrading Flow\n        markTaskRun(currentTask, currentTime);\n      }\n      const continuationCallback = callback(didUserCallbackTimeout);\n      currentTime = getCurrentTime();\n      if (typeof continuationCallback === 'function') {\n        // If a continuation is returned, immediately yield to the main thread\n        // regardless of how much time is left in the current time slice.\n        // $FlowFixMe[incompatible-use] found when upgrading Flow\n        currentTask.callback = continuationCallback;\n        if (enableProfiling) {\n          // $FlowFixMe[incompatible-call] found when upgrading Flow\n          markTaskYield(currentTask, currentTime);\n        }\n        advanceTimers(currentTime);\n        return true;\n      } else {\n        if (enableProfiling) {\n          // $FlowFixMe[incompatible-call] found when upgrading Flow\n          markTaskCompleted(currentTask, currentTime);\n          // $FlowFixMe[incompatible-use] found when upgrading Flow\n          currentTask.isQueued = false;\n        }\n        if (currentTask === peek(taskQueue)) {\n          pop(taskQueue);\n        }\n        advanceTimers(currentTime);\n      }\n    } else {\n      pop(taskQueue);\n    }\n    currentTask = peek(taskQueue);\n    if (enableAlwaysYieldScheduler) {\n      if (currentTask === null || currentTask.expirationTime &gt; currentTime) {\n        // This currentTask hasn't expired we yield to the browser task.\n        break;\n      }\n    }\n  }\n  // Return whether there's additional work\n  if (currentTask !== null) {\n    return true;\n  } else {\n    const firstTimer = peek(timerQueue);\n    if (firstTimer !== null) {\n      requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n    }\n    return false;\n  }\n}\n</code></pre> <p>\u4ece\u4ee3\u7801\u4e2d\u53ef\u4ee5\u770b\u51fa <code>workLoop</code> \u5c31\u662f React \u4efb\u52a1\u8c03\u5ea6\u6267\u884c\u7684\u6700\u7ec8\u6267\u884c\u51fd\u6570\u4e86\uff0c\u5b83\u6700\u7ec8\u6267\u884c\u7684\u662f <code>task.callback</code>\u3002\u901a\u8fc7 while \u4e0d\u65ad\u53d6\u51fa taskQueue \u5806\u9876\u4efb\u52a1\u6267\u884c\u3002 while \u5faa\u73af\u4e2d\u6709\u4e00\u4e2a\u4e2d\u65ad\u5206\u652f\uff0c\u5176\u4e2d\u7684 <code>enableAlwaysYieldScheduler</code> \u662f\u7528\u4e8e\u6d4b\u8bd5\u7684\uff0c\u751f\u4ea7\u73af\u5883\u901a\u5e38\u4e3afalse\u3002<code>currentTask.expirationTime &gt; currentTime</code> \u5219\u662f\u5224\u65ad\u5f53\u524d\u4efb\u52a1\u662f\u5426\u672a\u8fc7\u671f\uff0c\u5982\u679c\u5f53\u524d\u4efb\u52a1\u672a\u8fc7\u671f\uff0c\u90a3\u4e48\u5c31\u7406\u89e3\u4e2d\u65ad\u5faa\u73af\u3002\u4e2d\u65ad\u7684\u53e6\u4e00\u4e2a\u56e0\u7d20\u662f <code>shouldYieldToHost</code> \u51fd\u6570\uff0c <code>shouldYieldToHost</code> \u51fd\u6570\u4e3b\u8981\u662f\u7528\u4e8e\u5224\u65ad\u6267\u884c\u65f6\u95f4\u662f\u5426\u8fc7\u957f\uff08\u5373\u4ea7\u751f\u957f\u4efb\u52a1\uff09\uff0c<code>shouldYieldToHost</code> \u51fd\u6570\u662f\u5b9e\u73b0\u65f6\u95f4\u5207\u7247\u7684\u5173\u952e\u3002</p> <pre><code>export const frameYieldMs = 5;\n\nlet frameInterval = frameYieldMs;\nlet startTime = -1;\n\nfunction shouldYieldToHost(): boolean {\n  // ... \u7701\u7565\u90e8\u5206\u4ee3\u7801\n  const timeElapsed = getCurrentTime() - startTime;\n  if (timeElapsed &lt; frameInterval) {\n    // The main thread has only been blocked for a really short amount of time;\n    // smaller than a single frame. Don't yield yet.\n    return false;\n  }\n  // Yield now.\n  return true;\n}\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c<code>shouldYieldToHost</code> \u51fd\u6570\u7684\u4f5c\u7528\u662f\u6bd4\u8f83 <code>getCurrentTime () - startTime</code>\uff0c\u5224\u65ad\u5f53\u524d\u65f6\u95f4\u8ddd\u79bb\u5f00\u59cb\u65f6\u95f4\u662f\u5426\u8d85\u8fc7\u4e86 <code>frameInterval</code>\uff0c\u4e5f\u5c31\u662f <code>5 ms</code>\uff0c\u5982\u679c\u8d85\u8fc7\u4e86\u8fd9\u4e2a\u65f6\u95f4 <code>shouldYieldToHost</code> \u5c31\u4f1a\u8fd4\u56de <code>false</code>\uff0c\u4ece\u800c\u4e2d\u65ad <code>workLoop</code> \u51fd\u6570\u4e2d\u7684\u5faa\u73af\uff0c\u5373\u4e2d\u65ad\u4efb\u52a1\u961f\u5217\u7684\u6267\u884c\u3002 \u5728 <code>while</code> \u5faa\u73af\u7ed3\u675f\u540e\uff0cReact \u4f1a\u68c0\u67e5\u662f\u5426\u5b58\u5728\u672a\u5b8c\u6210\u7684\u4efb\u52a1\uff0c\u5982\u679c\u6709\u5c31\u8fd4\u56de <code>true</code>\uff0c<code>performWorkUntilDeadline</code> \u5c06\u5176\u5b58\u50a8\u4e3a <code>hasMoreWork</code>\uff0c\u5e76\u91cd\u65b0\u6267\u884c <code>schedulePerformWorkUntilDeadline</code>\uff0c\u4ece\u800c\u518d\u6b21\u5f02\u6b65\u8c03\u7528 <code>workLoop</code>\uff0c\u6b64\u65f6\u7b2c\u4e00\u4e2a\u672a\u88ab\u5b8c\u6210\u7684\u4efb\u52a1\u5c31\u662f taskQueue \u7684\u5806\u9876\uff0c\u4f1a\u88ab\u91cd\u65b0\u6267\u884c\uff0c\u8fd9\u5c31\u5b9e\u73b0\u4e86\u4efb\u52a1\u6267\u884c\u7684\u6062\u590d\u3002\u901a\u8fc7\u8fd9\u6837\u4e00\u4e2a\u5de7\u5999\u5730\u8bbe\u8ba1\uff0cReact \u5b9e\u73b0\u4e86\u65f6\u95f4\u5207\u7247\u6765\u6539\u5584\u957f\u4efb\u52a1\u7684\u963b\u585e\u95ee\u9898\u3002</p> <pre><code>sequenceDiagram\n    Scheduler-&gt;&gt;+Browser: \u8bf7\u6c42\u8c03\u5ea6 (requestHostCallback)\n    Browser-&gt;&gt;+Scheduler: \u6267\u884c\u4efb\u52a1 (performWorkUntilDeadline)\n    Scheduler-&gt;&gt;Scheduler: workLoop(hasTimeRemaining, initialTime)\n    Scheduler-&gt;&gt;Task: \u6267\u884c\u4efb\u52a1\u5355\u5143 (performTask)\n    Scheduler-&gt;&gt;Browser: \u68c0\u67e5\u5269\u4f59\u65f6\u95f4 (shouldYield)\n    alt \u65f6\u95f4\u5145\u8db3\n        Scheduler-&gt;&gt;Task: \u7ee7\u7eed\u6267\u884c\n    else \u65f6\u95f4\u4e0d\u8db3\n        Scheduler-&gt;&gt;Browser: \u6682\u505c\u5e76\u8bf7\u6c42\u540e\u7eed\u8c03\u5ea6\n    end\n</code></pre>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#_9","title":"\u4f18\u5148\u7ea7\u6a21\u578b","text":"<pre><code>graph TD\n    A[ImmediatePriority] --&gt;|\u6700\u9ad8| B[UserBlockingPriority]\n    B --&gt; C[NormalPriority]\n    C --&gt; D[LowPriority]\n    D --&gt;|\u6700\u4f4e| E[IdlePriority]\n</code></pre> <ul> <li> <p>\u7d27\u6025\u5347\u7ea7\uff1a\u7528\u6237\u4ea4\u4e92\u89e6\u53d1\u7684\u81ea\u52a8\u4f18\u5148\u7ea7\u63d0\u5347</p> </li> <li> <p>\u9965\u997f\u9632\u62a4\uff1a\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u7b49\u5f85\u8d85\u65f6\u540e\u7684\u81ea\u52a8\u5347\u7ea7</p> </li> <li> <p>\u8fc7\u6e21\u66f4\u65b0\uff1a<code>startTransition</code>\u00a0API \u7684\u4f18\u5148\u7ea7\u63a7\u5236\u539f\u7406</p> </li> </ul>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#settransition","title":"setTransition","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86II%EF%BC%9A%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E4%BC%98%E5%85%88%E7%BA%A7%E6%A8%A1%E5%9E%8B/#transition","title":"\u8fc7\u6e21\u66f4\u65b0(Transition)\u539f\u7406","text":"<ul> <li> <p><code>startTransition</code>\u00a0\u7684\u5b9e\u73b0\u673a\u5236</p> </li> <li> <p>\u8fc7\u6e21\u6807\u8bb0\u5728\u8c03\u5ea6\u7cfb\u7edf\u7684\u4f20\u64ad</p> </li> <li> <p>\u53ef\u4e2d\u65ad\u6e32\u67d3\u7684\u8fb9\u754c\u63a7\u5236</p> </li> </ul>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86IV%EF%BC%9AHook%E5%8E%9F%E7%90%86%E4%B8%8E%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6/","title":"\u6df1\u5165React\u539f\u7406IV\uff1aHook\u539f\u7406\u4e0e\u72b6\u6001\u7ba1\u7406\u673a\u5236","text":"<ul> <li> <p>Hooks\u67b6\u6784</p> <ul> <li> <p>\u94fe\u8868\u7ed3\u6784\uff1a<code>fiber.memoizedState</code>\u4e32\u8054Hooks</p> </li> <li> <p>\u5168\u5c40\u8c03\u5ea6\u5668\uff1a<code>ReactCurrentDispatcher</code>\u5207\u6362</p> </li> </ul> </li> <li> <p>\u6838\u5fc3Hook\u539f\u7406</p> <ul> <li> <p><code>useState</code>\uff1a\u72b6\u6001\u66f4\u65b0\u6279\u5904\u7406\u4e0e<code>lane</code>\u7ed1\u5b9a</p> </li> <li> <p><code>useEffect</code>\uff1a\u5f02\u6b65\u8c03\u5ea6\u4e0e\u4f9d\u8d56\u6bd4\u5bf9\uff08<code>areHookInputsEqual</code>\uff09</p> </li> <li> <p><code>useRef</code>\uff1a\u8de8\u751f\u547d\u5468\u671f\u5f15\u7528\u5b9e\u73b0</p> </li> </ul> </li> <li> <p>\u81ea\u5b9a\u4e49Hook</p> <ul> <li>\u903b\u8f91\u590d\u7528\uff1a\u95ed\u5305\u9677\u9631\u4e0e\u4f9d\u8d56\u5904\u7406\u89c4\u8303</li> </ul> </li> <li> <p>\u6e90\u7801\u89e3\u5bc6\uff1a<code>ReactFiberHooks.js</code>\u8c03\u5ea6\u903b\u8f91</p> </li> </ul>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/","title":"React","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#_1","title":"\u8bbe\u8ba1\u54f2\u5b66","text":"<p>React \u662f\u7531\u00a0Facebook\uff08Meta\uff09\u00a0\u4e8e 2013 \u5e74\u5f00\u6e90\u7684\u00a0\u9769\u547d\u6027 JavaScript \u5e93\uff0c\u4e13\u6ce8\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\uff08UI\uff09\u3002\u5b83\u901a\u8fc7\u00a0\u7ec4\u4ef6\u5316\u67b6\u6784\u00a0\u4e0e\u00a0\u58f0\u660e\u5f0f\u7f16\u7a0b\u6a21\u578b\uff0c\u5f7b\u5e95\u6539\u53d8\u4e86\u5f00\u53d1\u8005\u6784\u5efa Web \u5e94\u7528\u7684\u65b9\u5f0f\uff0c\u4f7f\u590d\u6742 UI \u7684\u5f00\u53d1\u53d8\u5f97\u9ad8\u6548\u3001\u53ef\u7ef4\u62a4\u4e14\u6027\u80fd\u5353\u8d8a\u3002 React \u7684\u8bf8\u591a\u521b\u65b0\u601d\u60f3\u2014\u2014\u5982\u7ec4\u4ef6\u5316\u67b6\u6784\u3001\u5355\u5411\u6570\u636e\u6d41\u3001Hooks \u673a\u5236\u548c\u865a\u62df DOM \u6a21\u578b\u2014\u2014\u6df1\u523b\u91cd\u5851\u4e86\u524d\u7aef\u5f00\u53d1\u8303\u5f0f\u3002\u6df1\u5165\u7406\u89e3\u8fd9\u4e9b\u8bbe\u8ba1\uff0c\u4e0d\u4ec5\u80fd\u663e\u8457\u63d0\u5347 React \u5f00\u53d1\u80fd\u529b\uff0c\u66f4\u80fd\u5e2e\u52a9\u5f00\u53d1\u8005\u6d1e\u5bdf\u73b0\u4ee3\u524d\u7aef\u6846\u67b6\u7684\u5171\u901a\u8bbe\u8ba1\u8bed\u8a00\u3002 \u603b\u7684\u6765\u8bf4\uff0cReact \u7684\u672c\u8d28\u662f\u00a0\u6784\u5efa\u53ef\u9884\u6d4b UI \u7684\u58f0\u660e\u5f0f\u7ec4\u4ef6\u5f15\u64ce\u3002\u5b83\u901a\u8fc7\u00a0\u7ea6\u675f\uff08\u5355\u5411\u6570\u636e\u6d41/\u4e0d\u53ef\u53d8\u6027\uff09\u5e26\u6765\u00a0\u81ea\u7531\uff08\u7ec4\u5408\u6269\u5c55/\u8de8\u5e73\u53f0\uff09\uff0c\u901a\u8fc7\u00a0\u62bd\u8c61\uff08\u865a\u62dfDOM/Hooks\uff09\u89e3\u51b3\u00a0\u672c\u8d28\u590d\u6742\u5ea6\uff08DOM\u64cd\u4f5c/\u526f\u4f5c\u7528\u7ba1\u7406\uff09\u3002</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#react_1","title":"React\u57fa\u672c\u67b6\u6784","text":"<p>React\u6e90\u7801\u91c7\u7528Monorepo\u7ed3\u6784\uff0c\u5c06\u4e0d\u540c\u529f\u80fd\u7684\u6e90\u4ee3\u7801\u62c6\u5206\u5230\u4e0d\u540c\u7684\u5b50\u5305\u4e2d\uff0c\u5176\u4e2d\u6709\u4e09\u4e2a\u5305\u662f\u6700\u5e38\u7528\u4e5f\u662f\u6700\u91cd\u8981\u7684\uff0c\u5373\uff1a - packages/react\uff1a\u5305\u542bReact\u6838\u5fc3\u6e90\u7801\uff0c\u4e0e\u73af\u5883\u65e0\u5173\uff0c\u5305\u62ec\u5404\u9879API\u548cHook\u7b49\u3002 - packages/scheduler: \u5305\u542bReact\u8c03\u5ea6\u7cfb\u7edf\u76f8\u5173\u6e90\u7801\uff0c\u8d1f\u8d23\u8c03\u5ea6React\u5185\u90e8\u7684\u5404\u9879\u4efb\u52a1\u3002 - packages/react-DOM\uff1a\u5305\u542bReact\u5c06\u7ec4\u4ef6\u8f6c\u6362\u6210DOM\u76f8\u5173\u7684\u6e90\u7801\uff0c\u8d1f\u8d23\u5c06\uff08JSX\u7f16\u8bd1\u540e\u7684\uff09ReactElement\u8f6c\u5316\u6210DOM\uff0c\u4ece\u800c\u6e32\u67d3\u5230\u5c4f\u5e55\u4e0a\u3002</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#_2","title":"\u6838\u5fc3\u5305","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#react_2","title":"React","text":"<p>React\u5305\u662f\u6574\u4e2aReact\u6846\u67b6\u7684\u6838\u5fc3\uff0c\u5176\u6709\u591a\u4e2a\u91cd\u8981\u4f5c\u7528\uff1a - \u63d0\u4f9b\u76f8\u5173\u7684TypeScript\u7c7b\u578b - \u63d0\u4f9bHook\uff0c\u4f8b\u5982useState\u3001useEffect\u7b49\uff0c\u4f9bReact\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4f7f\u7528 - \u63d0\u4f9bcache\u3001memo\u3001lazy\u7b49API - \u63d0\u4f9bFragment\u7b49\u5185\u7f6e\u7ec4\u4ef6 - \u63d0\u4f9bReact.createElement\uff0c\u7f16\u8bd1\u5668\u4f1a\u5c06JSX\u8f6c\u5316\u6210React.createElement\u51fd\u6570\u8c03\u7528\u5f62\u5f0f\u6765\u521b\u5efaReactElement</p>"},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#scheduler","title":"Scheduler","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#react-dom","title":"React-DOM","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#jsxelement","title":"\u4eceJSX\u5230Element","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#react_3","title":"React\u4e2d\u7684\u4e8b\u4ef6\u7cfb\u7edf","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86I%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84/#react_4","title":"React\u4e2d\u7684\u4f4d\u8fd0\u7b97","text":""},{"location":"%E6%A1%86%E6%9E%B6%E7%AF%87/React/%E6%B7%B1%E5%85%A5React%E5%8E%9F%E7%90%86V%EF%BC%9AReact19%E4%B8%8E%E6%9C%AA%E6%9D%A5%E5%B1%95%E6%9C%9B/","title":"\u6df1\u5165React\u539f\u7406V\uff1aReact19\u4e0e\u672a\u6765\u5c55\u671b","text":"<ul> <li> <p>React 19\u524d\u77bb</p> <ul> <li> <p>Actions\uff1a\u670d\u52a1\u7aef\u7ec4\u4ef6\u6570\u636e\u89c4\u8303</p> </li> <li> <p>\u7f16\u8bd1\u5668\u4f18\u5316\uff1aReact Forget\u81ea\u52a8Memo</p> </li> <li> <p>\u5143\u6846\u67b6\u652f\u6301\uff1aNext.js\u96c6\u6210\u4f18\u5316</p> </li> </ul> </li> <li> <p>\u67b6\u6784\u8d8b\u52bf</p> <ul> <li> <p>\u54cd\u5e94\u5f0f\u6f14\u8fdb\uff1a\u4fe1\u53f7\uff08Signal\uff09\u4e0e\u7f16\u8bd1\u65f6\u4f18\u5316</p> </li> <li> <p>\u5168\u6808\u80fd\u529b\uff1aServer Components\u843d\u5730\u5b9e\u8df5</p> </li> </ul> </li> </ul>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/","title":"\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce III\uff1aChromium\u5206\u5c42\u5408\u6210 vs Firefox WebRender\u7684GPU\u9769\u547d","text":""},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_1","title":"\u6e32\u67d3\u7ba1\u7ebf","text":"<p>\u5c06 HTML \u4ece\u6e90\u4ee3\u7801\u8f6c\u5316\u6210\u5c4f\u5e55\u50cf\u7d20\u8fd9\u4e00\u8fc7\u7a0b\u79f0\u4e3a\u6e32\u67d3\u7ba1\u7ebf\uff0c\u4e0d\u540c\u6e32\u67d3\u5f15\u64ce\u7684\u5b9e\u73b0\u65b9\u5f0f\u6709\u6240\u533a\u522b\uff0c\u4f46\u662f\u5927\u4f53\u4e0a\u90fd\u53ef\u4ee5\u5206\u4e3a\u4e94\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u89e3\u6790</li> <li>\u6837\u5f0f\u8ba1\u7b97</li> <li>\u5e03\u5c40</li> <li>\u7ed8\u5236</li> <li>\u5408\u6210 &amp; \u6e32\u67d3</li> </ol> <p>![[./images/Pasted image 20250714205605.png]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_2","title":"\u89e3\u6790","text":"<p>HTML \u89e3\u6790\u5668\u5c06 HTML \u6587\u6863\u6e90\u4ee3\u7801\u8f6c\u6362\u4e3a\u00a0\u6587\u6863\u5bf9\u8c61\u6a21\u578b\uff08DOM\uff09\u3002DOM \u5177\u6709\u4e24\u4e2a\u5173\u952e\u4f5c\u7528\uff1a 1. \u63d0\u4f9b JavaScript \u7f16\u7a0b\u63a5\u53e3\uff1a\u00a0DOM \u4f5c\u4e3a JavaScript \u64cd\u4f5c\u9875\u9762\u5185\u5bb9\u3001\u7ed3\u6784\u548c\u6837\u5f0f\u7684\u4e3b\u8981\u63a5\u53e3\uff0c\u901a\u8fc7\u4fee\u6539 DOM \u53ef\u4ee5\u52a8\u6001\u6539\u53d8\u9875\u9762\u7684\u6700\u7ec8\u5448\u73b0\u6548\u679c\u3002 2. \u4f5c\u4e3a\u6e32\u67d3\u7ba1\u7ebf\u7684\u6838\u5fc3\u6570\u636e\u7ed3\u6784\uff1a\u00a0DOM \u662f\u6d4f\u89c8\u5668\u5c06 HTML \u6587\u6863\u8f6c\u6362\u4e3a\u5c4f\u5e55\u50cf\u7d20\u7684\u6574\u4e2a\u6e32\u67d3\u7ba1\u7ebf\u4e2d\u7684\u57fa\u7840\u6570\u636e\u7ed3\u6784\u548c\u5173\u952e\u8f93\u5165\u3002 HTML \u89e3\u6790\u5668\u7684\u5de5\u4f5c\u539f\u7406\u5728\u524d\u9762\u7684[[\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce II\uff1aHTML \u89e3\u6790\u5168\u6d41\u7a0b\u2014\u2014\u4ece\u5b57\u8282\u6d41\u5230 DOM \u6784\u5efa]]\u4e00\u7ae0\u4e2d\u5df2\u7ecf\u8be6\u7ec6\u4ecb\u7ecd\u8fc7\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002</p> <p>![[Pasted image 20250712201804.png]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_3","title":"\u6837\u5f0f\u8ba1\u7b97","text":"<p>\u5728\u6837\u5f0f\u8ba1\u7b97\u4e2d\uff0cCSS \u5f15\u64ce\u4f1a\u5c06 CSS \u89c4\u5219\u5e94\u7528\u5230\u5bf9\u5e94\u7684 DOM \u8282\u70b9\u4e0a\uff0c\u4ece\u800c\u751f\u6210\u6e32\u67d3\u6811\uff08Render Tree\uff09\u3002\u6e32\u67d3\u6811\u5728 DOM \u6811\u7684\u57fa\u7840\u4e0a\u8fd8\u5305\u542b\u4e86\u6bcf\u4e2a\u5143\u7d20\u8282\u70b9\u7684 CSS \u6837\u5f0f\u3002</p> <p>CSS \u5168\u79f0\u5c42\u53e0\u6837\u5f0f\u8868\uff0c\u5b83\u5177\u6709\u5c42\u53e0\u6027\u3001\u7ee7\u627f\u6027\u548c\u4f18\u5148\u7ea7\u8fd9\u4e09\u5927\u7279\u5f81\u3002</p> <ul> <li>\u5c42\u53e0\u6027\uff1a\u6837\u5f0f\u51b2\u7a81\u65f6\uff0c\u4f18\u5148\u7ea7\u9ad8\u7684\u6837\u5f0f\u751f\u6548\u3002</li> <li>\u7ee7\u627f\u6027\uff1a\u67d0\u4e9b\u6837\u5f0f\uff08\u5982 color\u3001font-size\uff09\u4f1a\u81ea\u52a8\u7ee7\u627f\u7236\u5143\u7d20\u8282\u70b9\u3002</li> <li>\u591a\u4e2a css \u89c4\u5219\u4f5c\u7528\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u901a\u8fc7\u6743\u91cd\u6765\u51b3\u5b9a\u54ea\u4e2a\u89c4\u5219\u751f\u6548\u3002</li> </ul> <p>\u8fd9\u4e9b\u7279\u6027\u5171\u540c\u4f5c\u7528\uff0c\u51b3\u5b9a\u4e86\u6700\u7ec8\u6e32\u67d3\u5728\u9875\u9762\u4e0a\u7684\u6837\u5f0f\u7ed3\u679c\u3002\u5728\u6837\u5f0f\u8ba1\u7b97\u9636\u6bb5\uff0cCSS \u5f15\u64ce\u8ba1\u7b97\u6240\u6709\u7684 CSS \u89c4\u5219\uff0c\u5e76\u5c06\u5339\u914d\u7684 CSS \u89c4\u5219\u7684\u6837\u5f0f\u5c5e\u6027\u6dfb\u52a0\u5230 DOM \u6811\u5bf9\u5e94\u7684\u8282\u70b9\u4e2d\u3002</p> <p>![[Pasted image 20250712202236.png]]</p> <p>\u5177\u4f53\u6765\u8bf4\uff0cCSS \u5f15\u64ce\u4f1a\u9010\u4e2a\u904d\u5386\u6bcf\u4e2a DOM \u8282\u70b9\uff0c\u5e76\u627e\u51fa\u8be5 DOM \u8282\u70b9\u7684\u6837\u5f0f\u3002\u4f5c\u4e3a\u6b64\u8fc7\u7a0b\u7684\u4e00\u90e8\u5206\uff0c\u5b83\u4f1a\u4e3a DOM \u8282\u70b9\u7684\u6bcf\u4e2a CSS \u5c5e\u6027\u8d4b\u4e88\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff0c\u5373\u4f7f\u6837\u5f0f\u8868\u6ca1\u6709\u4e3a\u8be5\u5c5e\u6027\u58f0\u660e\u503c\u3002</p> <p>\u5bf9\u4e8e\u6bcf\u4e2a DOM \u8282\u70b9\uff0cCSS \u5f15\u64ce\u9700\u8981\u904d\u5386\u6240\u6709\u89c4\u5219\u6765\u6267\u884c\u9009\u62e9\u5668\u5339\u914d\u3002\u4f46\u662f\u5bf9\u4e8e\u5927\u591a\u6570\u8282\u70b9\uff0c\u8fd9\u79cd\u5339\u914d\u53ef\u80fd\u4e0d\u4f1a\u7ecf\u5e38\u6539\u53d8\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7528\u6237\u5c06\u9f20\u6807\u60ac\u505c\u5728\u7236\u8282\u70b9\u4e0a\uff0c\u4e0e\u5176\u5339\u914d\u7684\u89c4\u5219\u53ef\u80fd\u4f1a\u53d1\u751f\u53d8\u5316\u3002\u7531\u4e8e CSS \u7684\u7ee7\u627f\u7279\u6027\uff0c\u6211\u4eec\u4ecd\u7136\u9700\u8981\u91cd\u65b0\u8ba1\u7b97\u5176\u540e\u4ee3\u7684\u6837\u5f0f\u6765\u5904\u7406\u5c5e\u6027\u7ee7\u627f\uff0c\u4f46\u4e0e\u8fd9\u4e9b\u540e\u4ee3\u5143\u7d20\u81ea\u8eab\u6240\u5339\u914d\u7684\u89c4\u5219\u53ef\u80fd\u4e0d\u4f1a\u6539\u53d8\u3002</p> <p>\u56e0\u6b64 CSS \u5f15\u64ce\u4f1a\u4e3a DOM \u8282\u70b9\u627e\u5230\u6240\u6709\u5339\u914d\u7684\u89c4\u5219\uff0c\u5e76\u6309\u7167\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u5f62\u6210\u4e00\u4e2a\u94fe\u8868\u7ed3\u6784\u3002\u591a\u4e2a\u94fe\u8868\u7531\u7ec4\u6210\u4e86\u4e00\u9897\u6811\u72b6\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6211\u4eec\u79f0\u4e3a CSS \u89c4\u5219\u6811\u3002CSS \u89c4\u5219\u6811\u53ea\u4fdd\u5b58\u4e86\u5143\u7d20\u81ea\u8eab\u5339\u914d\u7684\u7ed3\u6784\uff0c\u4e0d\u4f1a\u4fdd\u5b58\u7ee7\u627f\u7684\u5c5e\u6027\u3002</p> <p>\u5728\u8fd9\u68f5 CSS \u89c4\u5219\u6811\u4e2d\uff0c\u53f6\u5b50\u8282\u70b9\u5c31\u662f\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u89c4\u5219\uff0c\u6839\u636e\u5c42\u7ea7\u7684\u4ece\u9ad8\u5230\u4f4e\uff0c\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u4e5f\u7531\u4f4e\u5230\u9ad8\uff0cDOM \u8282\u70b9\u5c06\u4fdd\u5b58\u53f6\u5b50\u8282\u70b9\u7684\u6307\u9488\uff0c\u5728\u672c\u4f8b\u4e2d\u662f <code>div#warning</code>\u3002</p> <p>![[Pasted image 20250712212433.png]]</p> <p>\u5f53\u7236\u8282\u70b9\u6539\u53d8\u65f6\uff0c\u5f15\u64ce\u4f1a\u5feb\u901f\u68c0\u67e5\u5bf9\u7236\u7ea7\u7684\u66f4\u6539\u662f\u5426\u4f1a\u6539\u53d8\u4e0e\u5b50\u7ea7\u5339\u914d\u7684\u89c4\u5219\u3002\u5982\u679c\u6ca1\u6709\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6240\u6709\u540e\u4ee3\u8282\u70b9\uff0c\u76f4\u63a5\u901a\u8fc7\u4fdd\u5b58\u7684\u53f6\u5b50\u8282\u70b9\u7684\u6307\u9488\u81ea\u4e0b\u800c\u4e0a\u5f97\u904d\u5386\u5230\u6839\u8282\u70b9\uff0c\u5c31\u80fd\u83b7\u5f97\u5339\u914d\u89c4\u5219\u7684\u5b8c\u6574\u5217\u8868\u3002</p> <p>CSS \u89c4\u5219\u6811\u7f13\u5b58\u4e86\u6bcf\u4e2a DOM \u8282\u70b9\u5339\u914d\u7684 css \u89c4\u5219\u5217\u8868\uff0c\u5f53\u91cd\u65b0\u6837\u5f0f\u8ba1\u7b97\u65f6\uff0c\u53ef\u4ee5\u5feb\u901f\u5730\u627e\u5230\u6240\u6709\u5339\u914d\u89c4\u5219\u7684\u5b8c\u6574\u5217\u8868\uff0c\u907f\u514d\u518d\u6b21\u904d\u5386\u6240\u6709\u89c4\u5219\u6765\u786e\u8ba4\u5339\u914d\u7684\u89c4\u5219\u3002\u4e0d\u8fc7\uff0c\u8fd9\u53ea\u662f\u4f5c\u4e3a\u91cd\u65b0\u6837\u5f0f\u8ba1\u7b97\u7684\u4f18\u5316\u624b\u6bb5\uff0c\u5728\u521d\u6b21\u6837\u5f0f\u8ba1\u7b97\u65f6\uff0c\u4ecd\u7136\u9700\u8981\u904d\u5386\u6240\u6709\u89c4\u5219\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_4","title":"\u5e03\u5c40","text":"<p>\u63a5\u4e0b\u6765\uff0c\u6e32\u67d3\u5f15\u64ce\u4f1a\u8ba1\u7b97\u6e32\u67d3\u6811\uff0c\u6765\u786e\u5b9a\u6bcf\u4e00\u4e2a\u5143\u7d20\u7684\u5728\u9875\u9762\u4e2d\u7684\u4f4d\u7f6e\u548c\u5bbd\u9ad8\u7b49\u51e0\u4f55\u5c5e\u6027\uff0c\u8fd9\u4f1a\u751f\u6210\u5e03\u5c40\u6811\uff08Layout Tree\uff09\uff0c\u5e03\u5c40\u6811\u4e0a\u4ec5\u5305\u542b\u53ef\u89c1\u7684\u5143\u7d20\u8282\u70b9\uff0c\u4e0d\u53ef\u89c1\u7684\u5143\u7d20\u8282\u70b9\uff08\u5982 <code>display:none</code>\uff09\u4e0d\u4f1a\u4fdd\u5b58\u5728\u5e03\u5c40\u6811\u4e2d\u3002</p> <p>![[Pasted image 20250712204048.png]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#chromium","title":"\u7ed8\u5236 &amp; \u5408\u6210 \uff08Chromium\uff09","text":"<p>\u4e0d\u540c\u6d4f\u89c8\u5668\u5185\u6838\u5bf9\u4e8e\u7ed8\u5236\u548c\u5408\u6210\u8fd9\u4e24\u6b65\u7684\u5b9e\u73b0\u601d\u8def\u548c\u65b9\u5f0f\u5dee\u5f02\u5f88\u5927\uff0c\u5728\u8fd9\u4e00\u8282\uff0c\u6211\u4eec\u4ee5 Chromium \u4e3a\u4f8b\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_5","title":"\u7ed8\u5236","text":"<p>\u5728\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\uff0c\u6e32\u67d3\u5f15\u64ce\u4f1a\u5c06\u9875\u9762\u5212\u5206\u6210\u591a\u4e2a\u56fe\u5c42\uff0c\u8fd9\u7c7b\u4f3c PS \u7684\u56fe\u5c42\u6982\u5ff5\u3002\u4e00\u4e2a\u56fe\u5c42\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u5f20\u4e8c\u7ef4\u7684\u7eb8\u5f20\uff08x \u8f74 * y \u8f74\uff09\uff0c\u800c\u591a\u4e2a\u56fe\u5c42\u4f1a\u4e0a\u4e0b\u5806\u53e0\u5728\u4e00\u8d77\uff08z \u8f74\uff09\uff0c\u4ece\u800c\u5f62\u6210\u4e863\u7ef4\u7a7a\u95f4\u3002</p> <p>\u56fe\u5c42\u6ca1\u6709\u7236\u5b50\u5173\u7cfb\uff0c\u6e32\u67d3\u5f15\u64ce\u4f1a\u5c06\u56fe\u5c42\u7531\u540e\u5230\u524d\u5730\u4fdd\u5b58\u5728\u4e00\u4e2a\u5e73\u7ea7\u5217\u8868\u4e2d\uff0cChromium \u5b98\u65b9\u5c06\u5176\u79f0\u4e3a\u5c42\u6811\uff08Layer Tree\uff09\uff0c\u56e0\u4e3a\u8fd9\u66fe\u7ecf\u662f\u4e00\u9897\u6811\u3002</p> <p>\u6e32\u67d3\u5f15\u64ce\u4f1a\u904d\u5386\u5c42\u6811\uff0c\u4e3a\u6bcf\u4e2a\u56fe\u5c42\u751f\u6210\u7ed8\u5236\u6307\u4ee4\u5217\u8868\uff0c\u5e76\u5c06\u591a\u4e2a\u56fe\u5c42\u7684\u7ed8\u5236\u6307\u4ee4\u5217\u8868\u7684\u96c6\u5408\u4ea4\u7ed9\u5408\u6210\u7ebf\u7a0b\u5904\u7406\u3002</p> <p>\u6ce8\u610f\uff1a\u7ed8\u5236\u5b9e\u9645\u4e0a\u662f\u751f\u6210\u7ed8\u5236\u6307\u4ee4\uff0c\u6700\u7ec8\u9700\u8981\u7ecf\u8fc7\u5408\u6210\u7ebf\u7a0b\u548c GPU \u8fdb\u7a0b\u7684\u5171\u540c\u64cd\u4f5c\u6765\u8f6c\u5316\u4e3a\u50cf\u7d20\u5e76\u6e32\u67d3\u5230\u5c4f\u5e55\u4e0a\u3002</p> <p>![[Pasted image 20250712210757.png]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_6","title":"\u5408\u6210","text":"<p>\u5728 Chromium \u4e2d\uff0c\u4e0a\u9762\u56db\u4e2a\u6b65\u9aa4\u901a\u5e38\u662f\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u5b8c\u6210\u7684\uff0c\u800c\u6700\u540e\u4e00\u6b65\u5408\u6210\u64cd\u4f5c\uff0c\u6e32\u67d3\u5f15\u64ce\u901a\u5e38\u4f1a\u4ea4\u7531\u5408\u6210\u7ebf\u7a0b\u6765\u5b8c\u6210\uff0c\u4ee5\u5c3d\u91cf\u51cf\u5c11\u4e3b\u7ebf\u7a0b\u7684\u5de5\u4f5c\u3002\u5408\u6210\u7ebf\u7a0b\u4f1a\u901a\u8fc7\u4e0e GPU \u8fdb\u7a0b\u7684\u5171\u540c\u534f\u4f5c\u6765\u5b9e\u73b0\u5c06\u7ed8\u5236\u6307\u4ee4\u8f6c\u6362\u6210\u50cf\u7d20\u6e32\u67d3\u5230\u5c4f\u5e55\u4e0a\u3002</p> <p>\u5408\u6210\u7ebf\u7a0b\u4f1a\u5c06\u56fe\u5c42\u8fdb\u4e00\u6b65\u5212\u5206\u66f4\u5c0f\u7684\u56fe\u5757\uff0c\u7136\u540e\u4ea4\u7531 GPU \u8fdb\u7a0b\u4e2d\u7684\u4e13\u95e8\u8fdb\u884c\u5149\u6805\u5316\uff08rasterization\uff09\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6c60\u8fdb\u884c\u5149\u6805\u5316\uff0c\u4ece\u800c\u8f93\u51fa\u4e3a\u4f4d\u56fe\u3002\u5728 Chromium \u4e2d\uff0c\u8fd9\u662f\u7531 Skia \u56fe\u50cf\u5e93\u5b9e\u73b0\u7684\uff0c\u800c Firefox \u4e2d\uff0c\u8fd9\u7531 WebRender \u76f4\u63a5\u8c03\u7528 GPU \u5b9e\u73b0\u3002</p> <p>\u5728\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\uff0c\u79bb\u89c6\u53e3\u8d8a\u8fd1\u7684\u56fe\u5757\u5149\u6805\u5316\u7684\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u89c6\u53e3\u5185\u7684\u56fe\u5757\u5149\u6805\u5316\u4f18\u5148\u7ea7\u6700\u9ad8\uff0c\u4ee5\u4fbf\u5728\u6eda\u52a8\u65f6\u80fd\u591f\u751f\u6210\u6d41\u7545\u7684\u6eda\u52a8\u52a8\u753b\u6548\u679c\u3002</p> <p>\u5149\u6805\u5316\u662f\u6307\u5c06\u56fe\u5f62\u6216\u7ed8\u5236\u6307\u4ee4\u8f6c\u6362\u4e3a\u50cf\u7d20\u7ea7\u7684\u56fe\u50cf\u6570\u636e\uff08\u4f4d\u56fe\uff09\uff0c\u4e5f\u5c31\u662f\u628a\u201c\u8be5\u753b\u4ec0\u4e48\u201d\u53d8\u6210\u201c\u5728\u5c4f\u5e55\u7684\u54ea\u4e9b\u50cf\u7d20\u4e0a\u753b\u4ec0\u4e48\u989c\u8272\u201d\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\uff0c\u5b83\u662f\u5c06\u56fe\u5c42\u5185\u5bb9\u8f6c\u4e3a\u53ef\u4ee5\u4e0a\u4f20\u7ed9 GPU \u663e\u793a\u7684\u56fe\u50cf\u5757\u7684\u8fc7\u7a0b\u3002</p> <p>GPU \u8fdb\u7a0b\u5b8c\u6210\u5149\u6805\u5316\u540e\uff0c\u5c06\u751f\u6210\u597d\u7684\u4f4d\u56fe\u4ea4\u8fd8\u7ed9\u5408\u6210\u7ebf\u7a0b\uff0c\u7136\u540e\u5408\u6210\u7ebf\u7a0b\u5c06\u5176\u5408\u6210\u4e3a\u5e27 \uff0c\u7136\u540e\u4ea4\u7ed9 GPU \u8fdb\u7a0b\u4e2d\u7684 Viz \u7ebf\u7a0b\uff0cViz \u7ebf\u7a0b\u4f1a\u540c\u6b65\u8fd9\u4e9b\u5e27\u5e76\u5904\u7406\u4f9d\u8d56\u5173\u7cfb\uff0c\u6309\u7167\u987a\u5e8f\u901a\u8fc7 Skia \u56fe\u50cf\u5e93\u5c06\u8fd9\u4e9b\u5e27\u6e32\u67d3\u5230\u5c4f\u5e55\u4e0a\uff0c\u5f62\u6210\u52a8\u753b\u5e27\u3002</p> <p>![[Pasted image 20250712211133.png]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#firefox","title":"\u7ed8\u5236 &amp; \u5408\u6210 \uff08FireFox\uff09","text":"<p>Firefox \u5728\u7ed8\u5236\u548c\u5408\u6210\u8fd9\u4e24\u6b65\u64cd\u4f5c\u548c Chromium \u6709\u7740\u663e\u8457\u7684\u5dee\u5f02\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_7","title":"\u56fe\u5c42\u7684\u5f0a\u7aef","text":"<p>\u5728\u524d\u9762\uff0c\u6211\u4eec\u8bb2\u5230\u7ed8\u5236\u8fc7\u7a0b\u4e2d\u4f1a\u5212\u5206\u56fe\u5c42\uff0c\u751f\u6210\u5c42\u6811\uff0c\u6309\u7167\u56fe\u5c42\u6765\u751f\u6210\u7ed8\u5236\u6307\u4ee4\u3002\u5212\u5206\u56fe\u5c42\u7684\u4f18\u52bf\u603b\u7ed3\u8d77\u6765\u6709\u4e24\u70b9\uff1a</p> <ol> <li>\u4e00\u4e2a\u56fe\u5c42\u53d1\u751f\u53d8\u5316\u540e\uff0c\u53ea\u9700\u8981\u91cd\u65b0\u5e03\u5c40\u3001\u7ed8\u5236\u548c\u5408\u6210\u8be5\u56fe\u5c42\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u56fe\u5c42\u3002</li> <li>\u5212\u5206\u56fe\u5c42\u540e\uff0c\u53ef\u4ee5\u5c06\u591a\u4e2a\u56fe\u5c42\u5e76\u884c\u5730\u8fdb\u884c\u5149\u6805\u5316\uff0c\u63d0\u9ad8\u6548\u7387\u3002</li> </ol> <p>\u4f46\u5728 Firefox \u5f00\u53d1\u56e2\u961f\u770b\u6765\uff0c\u4f7f\u7528\u5c42\u7ea7\u4e5f\u6709\u5f0a\u7aef\u3002\u5b83\u4eec\u4f1a\u5360\u7528\u5927\u91cf\u5185\u5b58\uff0c\u5b9e\u9645\u4e0a\u8fd8\u4f1a\u964d\u4f4e\u8fd0\u884c\u901f\u5ea6\u3002\u6d4f\u89c8\u5668\u9700\u8981\u5728\u5408\u7406\u7684\u5730\u65b9\u5408\u5e76\u5c42\u7ea7\uff0c\u4f46\u5f88\u96be\u5224\u65ad\u5728\u54ea\u91cc\u5408\u7406\u3002</p> <p>\u5e38\u7528\u7684 <code>will-change</code> \u548c <code>transform</code> \u7b49\u5c5e\u6027\u80fd\u591f\u63d0\u5347\u56fe\u5c42\uff0c\u4f46\u662f\u4e5f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6ee5\u7528\u3002\u5982\u679c\u56fe\u5c42\u8fc7\u591a\uff0c\u8fd9\u4e9b\u56fe\u5c42\u4f1a\u586b\u6ee1\u5185\u5b58\uff0c\u5e76\u4e14\u4f20\u8f93\u5230\u5408\u6210\u5668\u9700\u8981\u5f88\u957f\u65f6\u95f4\u3002</p> <p>![[Pasted image 20250714222955.png]]</p> <p>\u5982\u679c\u56fe\u5c42\u8fc7\u5927\u4e14\u6ca1\u6709\u88ab\u5408\u7406\u7684\u62c6\u5206\uff0c\u90a3\u4e48\u8fd9\u4e2a\u56fe\u5c42\u4f1a\u88ab\u4e0d\u65ad\u91cd\u7ed8\u5e76\u4f20\u8f93\u5230\u5408\u6210\u5668\uff0c\u5408\u6210\u5668\u4f1a\u5728\u4e0d\u505a\u4efb\u4f55\u6539\u53d8\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u5408\u6210\u3002\u8fd9\u610f\u5473\u7740\u4f60\u9700\u8981\u7ed8\u5236\u7684\u91cf\u52a0\u500d\u4e86\uff0c\u6bcf\u4e2a\u50cf\u7d20\u90fd\u8981\u4fee\u6539\u4e24\u6b21\uff0c\u5374\u6ca1\u6709\u4efb\u4f55\u6548\u679c\u3002\u5982\u679c\u76f4\u63a5\u6e32\u67d3\u9875\u9762\uff0c\u7701\u53bb\u5408\u6210\u6b65\u9aa4\uff0c\u901f\u5ea6\u4f1a\u66f4\u5feb\u3002</p> <p>![[Pasted image 20250714223149.png]]</p> <p>\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u56fe\u5c42\u7684\u4f5c\u7528\u5e76\u4e0d\u5927\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u4e3a\u80cc\u666f\u989c\u8272\u6dfb\u52a0\u52a8\u753b\u6548\u679c\uff0c\u6574\u4e2a\u56fe\u5c42\u65e0\u8bba\u5982\u4f55\u90fd\u5fc5\u987b\u91cd\u65b0\u7ed8\u5236\u3002\u8fd9\u4e9b\u56fe\u5c42\u53ea\u80fd\u5bf9\u5c11\u91cf\u7684 CSS \u5c5e\u6027\u6709\u6240\u5e2e\u52a9\u3002</p> <p>\u5373\u4f7f\u5927\u591a\u6570\u5e27\u90fd\u5904\u4e8e\u6700\u4f73\u60c5\u51b5\uff08\u5373\u5b83\u4eec\u53ea\u5360\u7528\u5e27\u9884\u7b97\u7684\u4e00\u5c0f\u90e8\u5206\uff09\uff0c\u4ecd\u7136\u53ef\u80fd\u4f1a\u51fa\u73b0\u8fd0\u52a8\u4e0d\u6d41\u7545\u7684\u60c5\u51b5\u3002\u5bf9\u4e8e\u53ef\u5bdf\u89c9\u7684\u5361\u987f\uff0c\u53ea\u9700\u51e0\u5e27\u5904\u4e8e\u6700\u5dee\u60c5\u51b5\u5373\u53ef\u3002\u8fd9\u4e9b\u573a\u666f\u88ab\u79f0\u4e3a\u6027\u80fd\u60ac\u5d16\u3002\u4f60\u7684\u5e94\u7528\u770b\u4f3c\u8fd0\u884c\u826f\u597d\uff0c\u76f4\u5230\u9047\u5230\u8fd9\u4e9b\u6700\u574f\u7684\u60c5\u51b5\uff08\u4f8b\u5982\u80cc\u666f\u989c\u8272\u52a8\u753b\uff09\uff0c\u4f60\u7684\u5e94\u7528\u5e27\u7387\u7a81\u7136\u8dcc\u843d\u5230\u4e34\u754c\u70b9\u3002</p> <p>![[Pasted image 20250714223316.png]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_8","title":"\u6e32\u67d3","text":"<p>\u57fa\u4e8e\u4ee5\u4e0a\u95ee\u9898\uff0cfirefox \u81ea\u7814\u4e86 Webrender \u5f15\u64ce\uff0c\u76f8\u5bf9\u4e8e Chromium \u7684\u7ed8\u5236\u548c\u5408\u6210\u6b65\u9aa4\u6709\u4e00\u4e9b\u663e\u8457\u7684\u6539\u53d8\uff1a</p> <ol> <li>\u4e0d\u518d\u6709\u56fe\u5c42\uff0c\u800c\u662f\u91c7\u7528\u7edf\u4e00\u7684 3D \u5750\u6807\u7cfb\u7684\u6982\u5ff5\uff0c\u5e03\u5c40\u73b0\u5728\u63d0\u4f9b\u7684\u662f\u663e\u793a\u5217\u8868\uff08display list\uff09 \u800c\u4e0d\u662f\u5e03\u5c40\u6811\u3002</li> <li>\u7ed8\u5236\u548c\u5408\u6210\u4e4b\u95f4\u4e0d\u518d\u6709\u533a\u522b\uff0c\u5b83\u4eec\u88ab\u5408\u5e76\u5728\u6e32\u67d3\u8fd9\u4e00\u4e2a\u6b65\u9aa4\u4e2d\u3002</li> <li>GPU \u5c06\u627f\u62c5\u66f4\u591a\u4efb\u52a1</li> </ol> <p>![[Pasted image 20250716220619.png]]</p> <p>\u73b0\u5728\uff0c\u6ca1\u6709\u56fe\u5c42\uff0c\u53ea\u6709\u4e00\u4e2a\u7edf\u4e00\u7684 3D \u5750\u6807\u7cfb\uff0c\u4e00\u5207\u5143\u7d20\u90fd\u901a\u8fc7 x\u3001y\u3001z \u5750\u6807\u6765\u786e\u5b9a\u4f4d\u7f6e\uff0c\u8fd9\u4e9b\u5143\u7d20\u90fd\u4f4d\u7f6e\u4fe1\u606f\u4fdd\u5b58\u5728\u663e\u793a\u5217\u8868\u4e2d\uff0c\u7531\u70b9\u6210\u7ebf\uff0c\u7531\u7ebf\u6210\u9762\u3002</p> <p>![[Pasted image 20250716220447.png]]</p> <p>\u663e\u793a\u5217\u8868\u662f\u4e00\u7ec4\u9ad8\u7ea7\u7ed8\u56fe\u6307\u4ee4\u3002\u5b83\u544a\u8bc9\u6211\u4eec\u9700\u8981\u7ed8\u5236\u4ec0\u4e48\uff0c\u800c\u65e0\u9700\u7279\u5b9a\u4e8e\u4efb\u4f55\u56fe\u5f62 API\u3002\u4f46\u662f GPU \u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528\u8fd9\u90e8\u5206\u4ee3\u7801\uff0c\u800c\u662f\u901a\u8fc7\u57fa\u4e8e WebRender \u5728 CPU \u4e0a\u521b\u5efa\u7684 RenderBackend \u7ebf\u7a0b\u6765\u5c06\u6307\u4ee4\u8f6c\u6362\u6210 GPU \u8c03\u7528\uff0c\u518d\u901a\u8fc7\u5408\u6210\u7ebf\u7a0b\u6309\u6279\u6b21\u4e2d\u8f6c\u4f20\u9012\u7ed9 GPU \u540e\uff0c\u624d\u80fd\u88ab\u8c03\u7528\u3002</p> <p>![[Pasted image 20250716221914.png]]</p> <p>\u901a\u8fc7 WebRender \u5f15\u64ce\uff0cCPU\u5c06\u4e0d\u518d\u9700\u8981\u9891\u7e41\u5730\u8fdb\u884c\u7ed8\u5236\u3001\u56fe\u5c42\u8ba1\u7b97\u548c\u5408\u6210\u7b49\u64cd\u4f5c\uff1a</p> <ol> <li>\u4e3b\u7ebf\u7a0b\u4e0d\u518d\u9700\u8981\u5b8c\u6210\u5168\u90e8\u7684\u7ed8\u5236\u4efb\u52a1\uff0c\u5927\u90e8\u5206\u7684\u7ed8\u5236\u5c06\u7531 GPU \u627f\u62c5\u3002\uff08\u90e8\u5206\u7ed8\u5236\u4efb\u52a1\u4ecd\u7136\u53ea\u80fd\u8003 CPU \u5b8c\u6210\uff09</li> <li>\u5408\u6210\u7ebf\u7a0b\u4e0d\u518d\u9700\u8981\u9891\u7e41\u5730\u5212\u5206\u56fe\u5757\u548c\u5408\u6210\uff0c\u73b0\u5728\u53ea\u9700\u8981\u540c\u6b65\u5e27\u7387\u548c\u6279\u91cf\u8f6c\u53d1 RenderBackend \u7ebf\u7a0b\u4f20\u9012\u7684 CPU \u8c03\u7528\u5373\u53ef\u3002</li> <li>GPU \u73b0\u5728\u627f\u62c5\u5927\u90e8\u5206\u7684\u7ed8\u5236\u3001\u5149\u6805\u5316\u7b49\u5de5\u4f5c\uff0cCPU \u5f97\u5230\u91ca\u653e\u3002</li> </ol> <p>\u968f\u7740\u786c\u4ef6\u7684\u53d1\u5c55\uff0cGPU \u7684\u80fd\u529b\u8d8a\u6765\u8d8a\u5f3a\u5927\uff0c\u901a\u8fc7\u5c06\u66f4\u591a\u7684\u4efb\u52a1\u4ea4\u7ed9GPU\uff0c\u53ef\u4ee5\u8ba9 CPU \u66f4\u4e13\u6ce8\u5904\u7406 JavaScript \u6267\u884c\u548c\u5783\u573e\u56de\u6536\u7b49\u5de5\u4f5c\uff0c\u8fd9\u5bf9\u6027\u80fd\u6709\u975e\u5e38\u79ef\u6781\u7684\u5f71\u54cd\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_9","title":"\u533a\u522b\u603b\u7ed3","text":"Chromium Firefox \u6d4f\u89c8\u5668\u5185\u6838 Chromium Gecko \u6e32\u67d3\u5f15\u64ce Blink Gecko \u56fe\u5f62\u6e32\u67d3\u5f15\u64ce Skia WebRender \u5e03\u5c40 \u8f93\u51fa\u5e03\u5c40\u6811 \u8f93\u51fa\u663e\u793a\u5217\u8868 \u7ed8\u5236 \u7531CPU \u5b8c\u6210 \u7531GPU + CPU \u5171\u540c\u5b8c\u6210 \u5408\u6210 \u8d1f\u8d23\u5212\u5206\u56fe\u5757\u3001\u5408\u6210\u7b49 \u53ea\u8d1f\u8d23\u540c\u6b65\u5e27\u7387\u548c\u8f6c\u53d1 CPU\u7ebf\u7a0b \u4e3b\u7ebf\u7a0b+\u5408\u6210\u7ebf\u7a0b \u4e3b\u7ebf\u7a0b+RenderBackend \u7ebf\u7a0b+\u5408\u6210\u7ebf\u7a0b \u4f18\u5316\u7b56\u7565 \u5212\u5206\u56fe\u5c42\uff0c\u56fe\u5c42\u95f4\u7684\u56de\u6d41\u91cd\u7ed8\u4e92\u4e0d\u5f71\u54cd \u91c7\u75283D \u5750\u6807\u7cfb\uff0c\u5c06\u66f4\u591a\u4efb\u52a1\u4ea4\u7ed9 GPU \u6027\u80fd\u7279\u70b9 \u5728\u590d\u6742 DOM \u573a\u666f\u4e0b\u53ef\u80fd\u66f4\u5feb\uff08\u5206\u5757\u6e32\u67d3\uff09\u3002\u4f46\u662f\u5927\u91cf\u52a8\u753b\u573a\u666f\u4e0b\u53ef\u80fd\u51fa\u73b0\u6027\u80fd\u60ac\u5d16\u3002 \u5728 GPU \u52a0\u901f\u573a\u666f\uff08\u5982\u5927\u91cf\u52a8\u753b\uff09\u4e2d\u66f4\u7a33\u5b9a\u3002"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20III%EF%BC%9AChromium%E5%88%86%E5%B1%82%E5%90%88%E6%88%90%20vs%20Firefox%20WebRender%E7%9A%84GPU%E9%9D%A9%E5%91%BD/#_10","title":"\u53c2\u8003","text":"<p>Life of a Pixel https://developer.chrome.com/blog/inside-browser-part1?hl=zh-cn [The whole web at maximum FPS: How WebRender gets rid of jank)</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/","title":"\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce II\uff1aHTML \u89e3\u6790\u5168\u6d41\u7a0b\u2014\u2014\u4ece\u5b57\u8282\u6d41\u5230 DOM \u6784\u5efa","text":""},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#html","title":"HTML\u89e3\u6790\u5668","text":"<p>\u524d\u7aef\u7684\u6838\u5fc3\u5728\u4e8e\u00a0HTML\u3001CSS\u00a0\u548c\u00a0JavaScript\uff0c\u8fd9\u4e09\u8005\u5171\u540c\u6784\u6210\u4e86\u73b0\u4ee3\u524d\u7aef\u6280\u672f\u4f53\u7cfb\u3002\u5176\u4e2d\uff0cHTML\u00a0\u4f5c\u4e3a\u5165\u53e3\u6587\u4ef6\u901a\u5e38\u9996\u5148\u88ab\u6d4f\u89c8\u5668\u8bf7\u6c42\u52a0\u8f7d\uff0c\u56e0\u6b64\uff0c\u6d4f\u89c8\u5668\u6e32\u67d3\u9875\u9762\u7684\u9996\u8981\u4efb\u52a1\u5c31\u662f\u89e3\u6790\u00a0HTML\u00a0\u6587\u4ef6\u3002\u65e0\u8bba\u6d4f\u89c8\u5668\u91c7\u7528\u4f55\u79cd\u6e32\u67d3\u5f15\u64ce\uff0c\u90fd\u9700\u8981\u9075\u5faa\u00a0HTML\u00a0\u89c4\u8303\u3002\u6309\u7167\u00a0HTML\u00a0\u89e3\u6790\u5668\u7684\u89c4\u8303\uff0cHTML\u00a0\u89e3\u6790\u5668\u4f1a\u5c06\u00a0HTML\u00a0\u5b57\u8282\u6d41\u8f6c\u6362\u4e3a\u00a0DOM\u00a0\u6811\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u4e3b\u8981\u7ecf\u5386\u4e86\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <p></p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_1","title":"\u5b57\u8282\u6d41","text":"<p>\u5f53\u6211\u4eec\u8bbf\u95ee\u4e00\u4e2a\u9875\u9762\u65f6\uff0c\u672c\u8d28\u4e0a\u662f\u5b8c\u6210\u4e86\u4e00\u6b21\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002\u5728B/S\u67b6\u6784\u4e2d\uff0c\u6d4f\u89c8\u5668\u4f5c\u4e3a\u5ba2\u6237\u7aef\uff0c\u901a\u8fc7\u8ba1\u7b97\u673a\u7f51\u7edc\u534f\u8bae\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u6570\u636e\u4f20\u8f93\u3002\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u5c42\u9762\uff0c\u6d4f\u89c8\u5668\u9996\u5148\u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u968f\u540e\u57fa\u4e8eHTTP\u534f\u8bae\u53d1\u9001\u9875\u9762\u8bf7\u6c42\u3002\u670d\u52a1\u5668\u63a5\u6536\u5230\u8bf7\u6c42\u540e\u8fdb\u884c\u5904\u7406\u5e76\u8fd4\u56de\u54cd\u5e94\uff0c\u6d4f\u89c8\u5668\u5219\u8d1f\u8d23\u89e3\u6790\u54cd\u5e94\u5185\u5bb9\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0c\u9875\u9762\u6587\u4ef6\uff08\u5373HTML\u6587\u4ef6\uff09\u88ab\u7f16\u7801\u6210\u5b57\u8282\u6d41\u7684\u5f62\u5f0f\u4ece\u670d\u52a1\u5668\u4f20\u8f93\u5230\u6d4f\u89c8\u5668\u3002</p> <p>\u5728\u4e0a\u9762\u6240\u8ff0\u7684\u8fc7\u7a0b\u4e2d\uff0cHTML\u6587\u4ef6\u4ee5\u5b57\u8282\u6d41\u7684\u5f62\u5f0f\u4f20\u8f93\u5230\u6d4f\u89c8\u5668\uff0c\u6d4f\u89c8\u5668\u7b2c\u4e00\u6b65\u7684\u5de5\u4f5c\u662f\u89e3\u7801\u5b57\u8282\u6d41\uff0c\u4e5f\u5c31\u662f\u5c06\u5b57\u8282\u6d41\u91cd\u65b0\u8f6c\u6362\u6210HTML\u6587\u4ef6\u6e90\u4ee3\u7801\uff0c\u5373\u5c06\u5b57\u8282\u6d41\u8f6c\u6362\u4e3a\u5b57\u7b26\u6d41\u3002\u89e3\u7801\u524d\u9700\u8981\u786e\u5b9a\u7f16\u7801\u683c\u5f0f\uff0c\u56e0\u4e3a\u4e0d\u540c\u7684\u7f16\u7801\u683c\u5f0f\u5bf9\u5e94\u4e0d\u540c\u7684\u5b57\u7b26\u96c6\u3002\u5e38\u89c1\u7684\u7f16\u7801\u683c\u5f0f\u5305\u62ecUTF-8\u3001GBK\u3001GB2312\u7b49\u3002\u6d4f\u89c8\u5668\u4f1a\u901a\u8fc7\u4e00\u5957\u7f16\u7801\u68c0\u6d4b\u673a\u5236\u6765\u786e\u5b9a\u5b57\u8282\u6d41\u7684\u7f16\u7801\u683c\u5f0f\uff0c\u4f8b\u5982\u901a\u8fc7HTTP\u54cd\u5e94\u5934\u4e2d\u7684`Content-Type`\u5b57\u6bb5\u83b7\u53d6\u7f16\u7801\u4fe1\u606f\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_2","title":"\u9884\u5904\u7406","text":"<p>\u5728\u6b63\u5f0f\u5904\u7406\u5b57\u7b26\u6d41\u524d\u9700\u8981\u5148\u5bf9\u9f50\u8fdb\u884c\u9884\u5904\u7406\uff0c\u9884\u5904\u7406\u7684\u6838\u5fc3\u6d41\u7a0b\u662f\u89c4\u8303\u5316\u6362\u884c\u7b26\uff08normalize\u00a0newlines\uff09\uff0c\u8fd9\u662f\u7531\u4e8e\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u6362\u884c\u7b26\u7684\u5b9a\u4e49\u4e0d\u540c\u3002</p> \u64cd\u4f5c\u7cfb\u7edf \u6362\u884c\u7b26 \u8bf4\u660e Linux <code>\\n</code> \u4f7f\u7528\u00a0LF\uff08Line\u00a0Feed\uff0c\u6362\u884c\u7b26\uff09\u8868\u793a\u6362\u884c\u3002ASCII\u00a0\u7f16\u7801\u4e3a\u00a010\u3002 Windows <code>\\r\\n</code> \u4f7f\u7528\u00a0CRLF\uff08Carriage\u00a0Return\u00a0+\u00a0Line\u00a0Feed\uff0c\u56de\u8f66+\u6362\u884c\uff09\u8868\u793a\u6362\u884c\u3002ASCII\u00a0\u7f16\u7801\u4e3a\u00a013\u00a0\u548c\u00a010\u00a0\u7684\u7ec4\u5408\u3002 macOS\u00a0(\u65e7\u7248) <code>\\r</code> \u65e9\u671f\u7684\u00a0macOS\uff08\u57fa\u4e8e\u7ecf\u5178\u00a0Mac\u00a0OS\uff09\u4f7f\u7528\u00a0CR\uff08Carriage\u00a0Return\uff0c\u56de\u8f66\u7b26\uff09\u8868\u793a\u6362\u884c\u3002ASCII\u00a0\u7f16\u7801\u4e3a\u00a013\u3002 macOS\u00a0(\u73b0\u4ee3) <code>\\n</code> \u73b0\u4ee3\u00a0macOS\uff08\u57fa\u4e8e\u00a0Unix\u00a0\u7684\u00a0macOS\u00a0X\u00a0\u53ca\u4e4b\u540e\u7248\u672c\uff09\u4e0e\u00a0Linux\u00a0\u4e00\u81f4\uff0c\u4f7f\u7528\u00a0LF\u00a0\u8868\u793a\u6362\u884c\u3002 <p>HTML\u89c4\u8303\u4e2d\u5bf9\u89c4\u8303\u6362\u884c\u7b26\u7684\u64cd\u4f5c\u5f88\u7b80\u5355\uff0c\u4e3b\u8981\u662f\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u66ff\u6362\u6240\u6709\\r\\n\u4e3a\\n</li> <li>\u66ff\u6362\u6240\u6709\u7684\\r\u4e3a\\n</li> </ol> <p>To\u00a0normalize\u00a0newlines\u00a0in\u00a0a\u00a0string,\u00a0replace\u00a0every\u00a0U+000D\u00a0CR\u00a0U+000A\u00a0LF\u00a0code\u00a0point\u00a0pair\u00a0with\u00a0a\u00a0single\u00a0U+000A\u00a0LF\u00a0code\u00a0point,\u00a0and\u00a0then\u00a0replace\u00a0every\u00a0remaining\u00a0U+000D\u00a0CR\u00a0code\u00a0point\u00a0with\u00a0a\u00a0U+000A\u00a0LF\u00a0code\u00a0point.</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_3","title":"\u6807\u8bb0\u5316\uff08\u8bcd\u6cd5\u5206\u6790\uff09","text":"<p>\u5728\u5b8c\u6210\u5b57\u8282\u6d41\u7684\u8f6c\u6362\u4e0e\u9884\u5904\u7406\u540e\uff0cHTML\u89e3\u6790\u8fc7\u7a0b\u8fdb\u5165\u4e86\u6807\u8bb0\u5316\uff08Tokenization\uff09\u9636\u6bb5\u3002\u6807\u8bb0\u5316\u7c7b\u4f3c\u4e8e\u7f16\u8bd1\u539f\u7406\u4e2d\u7684\u8bcd\u6cd5\u5206\u6790\uff0c\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0cHTML\u89e3\u6790\u5668\u4f1a\u5c06\u5b57\u7b26\u6d41\u9010\u6b65\u8f6c\u6362\u4e3a\u4e00\u7cfb\u5217\u7684Token\u3002Token\u662f\u8bcd\u6cd5\u5206\u6790\u7684\u8f93\u51fa\u7ed3\u679c\uff0c\u662f\u63cf\u8ff0HTML\u6587\u6863\u4e2d\u57fa\u672c\u7ed3\u6784\u5355\u5143\u3002</p> <p>HTML\u4f5c\u4e3a\u4e00\u79cd\u5177\u6709\u7279\u5b9a\u8bed\u6cd5\u89c4\u5219\u7684\u8bed\u8a00\uff0c\u5176\u89e3\u6790\u4f9d\u8d56\u4e8e\u8fd9\u4e9b\u89c4\u5219\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u6807\u51c6\u7684\u5143\u7d20\u8282\u70b9\u603b\u662f\u4ee5<code>&lt;</code>\u7b26\u53f7\u5f00\u59cb\uff0c\u5e76\u8ddf\u968f\u6807\u7b7e\u540d\uff08\u901a\u5e38\u7531\u82f1\u6587\u5b57\u6bcd\u7ec4\u6210\uff09\uff0c\u63a5\u7740\u53ef\u4ee5\u6709\u82e5\u5e72\u4e2a\u7531\u7a7a\u683c\u5206\u9694\u7684\u5c5e\u6027\u3002\u82e5<code>&lt;</code>\u540e\u7d27\u8ddf\u7684\u662f<code>!</code>\uff0c\u5219\u8fd9\u53ef\u80fd\u8868\u793a\u4e00\u4e2aHTML\u6ce8\u91ca\u6216DOCTYPE\u58f0\u660e\u7b49\u7279\u6b8a\u60c5\u51b5\u3002</p> <p>\u6574\u4e2a\u89e3\u6790\u8fc7\u7a0b\u901a\u8fc7\u5b9a\u4e49\u591a\u79cd\u72b6\u6001\u6765\u5b9e\u73b0\u3002\u6bcf\u6b21\u8bfb\u53d6\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u201c\u5f53\u524d\u8f93\u5165\u5b57\u7b26\u201d\uff0c\u5e76\u8003\u8651\u5176\u540e\u7684\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u201c\u4e0b\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\u201d\u3002\u4f9d\u636e\u5f53\u524d\u5b57\u7b26\u7684\u7279\u5f81\uff0c\u89e3\u6790\u5668\u4f1a\u8fdb\u5165\u76f8\u5e94\u72b6\u6001\uff0c\u5e76\u7ee7\u7eed\u68c0\u67e5\u540e\u7eed\u5b57\u7b26\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u76f4\u5230\u9047\u5230\u9519\u8bef\u6216\u6587\u4ef6\u7ed3\u675f\u7b26\uff08EOF\uff09\u3002\u8fd9\u79cd\u673a\u5236\u4f7f\u5f97\u89e3\u6790\u5668\u53ef\u4ee5\u5728\u4e0d\u540c\u72b6\u6001\u4e0b\u7075\u6d3b\u5207\u6362\uff0c\u786e\u4fdd\u6b63\u786e\u8bc6\u522b\u5404\u79cdHTML\u7ed3\u6784\u3002</p> <p>\u4ee5\u7b80\u5355\u7684HTML\u4ee3\u7801\u793a\u4f8b\u00a0<code>&lt;div&gt;1&lt;/div&gt;</code>\u00a0\u6765\u8bf4\u660e\u8fd9\u4e00\u8fc7\u7a0b\uff1a</p> <ol> <li>\u5f53\u524d\u8f93\u5165\u5b57\u7b26\u662f<code>&lt;</code>\uff0c\u89e3\u6790\u5668\u8bc6\u522b\u5230\u8fd9\u662f\u4e00\u4e2a\u6807\u7b7e\u7684\u5f00\u59cb\uff0c\u8fdb\u5165\u201c\u5f00\u653e\u6807\u7b7e\u5f00\u59cb\u72b6\u6001\u201d\uff1b</li> <li>\u5c06\u4e0b\u4e00\u4e2a\u8f93\u5165\u5b57\u7b26\uff08\u5373<code>d</code>\uff09\u8bbe\u4e3a\u65b0\u7684\u5f53\u524d\u8f93\u5165\u5b57\u7b26\uff0c\u51c6\u5907\u8fdb\u4e00\u6b65\u89e3\u6790\uff1b</li> <li>\u56e0\u4e3a\u5f53\u524d\u5b57\u7b26\u662f<code>d</code>\u800c\u975e<code>!</code>\uff0c\u6240\u4ee5\u786e\u5b9a\u8fd9\u662f\u4e00\u4e2a\u666e\u901a\u6807\u7b7e\u800c\u975e\u6ce8\u91ca\uff0c\u7ee7\u7eed\u8bfb\u53d6\u76f4\u81f3\u6807\u7b7e\u540d\u5b8c\u6574\uff0c\u6b64\u65f6\u5df2\u786e\u8ba4\u4e3a<code>div</code>\uff1b</li> <li>\u9047\u5230<code>&gt;</code>\uff0c\u8868\u660e\u6807\u7b7e\u5b9a\u4e49\u7ed3\u675f\uff0c\u8fdb\u5165\u201c\u5f00\u653e\u6807\u7b7e\u7ed3\u675f\u72b6\u6001\u201d\u3002\u7531\u4e8e\u672a\u53d1\u73b0\u81ea\u95ed\u5408\u6807\u7b7e\u7684\u5f62\u5f0f<code>/&gt;</code>\uff0c\u9884\u671f\u540e\u7eed\u5e94\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u95ed\u5408\u6807\u7b7e\uff1b</li> <li>\u63a5\u4e0b\u6765\u8bfb\u53d6\u5230\u6570\u5b57<code>1</code>\uff0c\u8fdb\u5165\u201c\u6587\u672c\u72b6\u6001\u201d\uff0c\u5904\u7406\u6807\u7b7e\u5185\u7684\u6587\u672c\u5185\u5bb9\uff1b</li> <li>\u518d\u6b21\u9047\u5230<code>&lt;</code>\uff0c\u68c0\u67e5\u5176\u540e\u7684\u5b57\u7b26\u4e3a<code>/</code>\uff0c\u5224\u5b9a\u8fd9\u662f\u95ed\u5408\u6807\u7b7e\u7684\u5f00\u59cb\uff0c\u8fdb\u5165\u201c\u95ed\u5408\u6807\u7b7e\u5f00\u59cb\u72b6\u6001\u201d\uff1b</li> <li>\u6309\u7167\u76f8\u540c\u903b\u8f91\u4f9d\u6b21\u5904\u7406\u5b57\u7b26<code>d</code>,\u00a0<code>i</code>,\u00a0<code>v</code>\uff0c\u6700\u7ec8\u5728\u9047\u5230\u7b2c\u4e8c\u4e2a<code>&gt;</code>\u65f6\uff0c\u786e\u8ba4\u95ed\u5408\u6807\u7b7e\u89e3\u6790\u5b8c\u6bd5\uff0c\u8fdb\u5165\u201c\u95ed\u5408\u6807\u7b7e\u7ed3\u675f\u72b6\u6001\u201d\u3002</li> </ol> <p>\u6700\u7ec8\u751f\u6210\u7684Token\u5e8f\u5217\u5982\u4e0b\uff1a</p> <pre><code>[\n  { type: \"StartTag\", name: \"div\" },  // &lt;div&gt;\n  { type: \"Character\", data: \"1\" },   // 1\n  { type: \"EndTag\", name: \"div\" }     // &lt;/div&gt;\n]\n</code></pre>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_4","title":"\u6811\u6784\u9020\uff08\u8bed\u6cd5\u5206\u6790\uff09","text":"<p>\u6811\u6784\u9020\u9636\u6bb5\uff08Tree\u00a0Construction\uff09\u7684\u8f93\u5165\u662f\u6807\u8bb0\u5316\u7684\u8f93\u51fa\uff0c\u8f93\u51fa\u5c31\u662f\u6587\u6863\u5bf9\u8c61\u6a21\u578bDOM\u6811\uff0c\u4e5f\u5c31\u662f\u8bf4\u6811\u6784\u9020\u9636\u6bb5\u5176\u5b9e\u5c31\u662f\u6784\u9020DOM\u6811\u3002\u6811\u6784\u9020\u9636\u6bb5\u7c7b\u4f3c\u4e8e\u7f16\u8bd1\u539f\u7406\u4e2d\u7684\u8bed\u6cd5\u5206\u6790\u3002\u6811\u6784\u9020\u8fc7\u7a0b\u901a\u8fc7\u6808\u7ed3\u6784\uff08\u5f00\u653e\u5143\u7d20\u6808\uff09\u548c\u72b6\u6001\u673a\u52a8\u6001\u6784\u5efa\u8282\u70b9\u95f4\u7684\u7236\u5b50\u5173\u7cfb\uff0c\u6700\u7ec8\u5f62\u6210\u5b8c\u6574\u7684\u6587\u6863\u5bf9\u8c61\u6a21\u578b\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#open-element-stack","title":"\u5f00\u653e\u5143\u7d20\u6808\uff08Open\u00a0Element\u00a0Stack\uff09","text":"<p>\u6808\u7528\u4e8e\u8ddf\u8e2a\u5f53\u524d\u672a\u95ed\u5408\u7684\u6807\u7b7e\u8282\u70b9\u3002\u5f53\u89e3\u6790\u5230\u5f00\u59cb\u6807\u7b7eToken\u65f6\uff0c\u521b\u5efa\u5bf9\u5e94\u5143\u7d20\u8282\u70b9\u5e76\u5165\u6808\uff1b\u9047\u5230\u7ed3\u675f\u6807\u7b7eToken\u65f6\uff0c\u5c06\u6808\u9876\u5143\u7d20\u51fa\u6808\uff0c\u5b8c\u6210\u95ed\u5408\u64cd\u4f5c\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#insertion-modes","title":"\u63d2\u5165\u6a21\u5f0f\uff08Insertion\u00a0Modes\uff09","text":"<p>\u63d2\u5165\u6a21\u5f0f \u662f HTML \u89e3\u6790\u5668\u7684\u6838\u5fc3\u673a\u5236\u4e4b\u4e00\uff0c\u5b83\u51b3\u5b9a\u4e86\u5f53\u524d\u89e3\u6790\u5668\u5904\u4e8e\u54ea\u79cd\u4e0a\u4e0b\u6587\uff0c\u4ece\u800c\u5f71\u54cd\u5982\u4f55\u5904\u7406\u540e\u7eed\u7684 Token\u3002\u63d2\u5165\u6a21\u5f0f\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a \u72b6\u6001\u673a\uff0c\u4e0d\u540c\u6a21\u5f0f\u5bf9\u5e94\u4e0d\u540c\u7684 DOM \u6784\u5efa\u89c4\u5219\u3002HTML\u89c4\u8303\u5b9a\u4e49\u4e8612\u79cd\u63d2\u5165\u6a21\u5f0f\uff08\u5982<code>in body</code>\u3001<code>in table</code>\u3001<code>in head</code>\u7b49\uff09\uff0c\u7528\u4e8e\u5904\u7406\u4e0d\u540c\u4e0a\u4e0b\u6587\u73af\u5883\u4e0b\u7684\u89e3\u6790\u89c4\u5219\u3002\u4f8b\u5982\uff1a<code>&lt;table&gt;</code>\u6807\u7b7e\u4f1a\u89e6\u53d1\"in table\"\u6a21\u5f0f\uff0c\u786e\u4fdd\u8868\u683c\u5185\u5143\u7d20\uff08<code>&lt;tr&gt;</code>\u3001<code>&lt;td&gt;</code>\uff09\u6309\u7279\u5b9a\u89c4\u5219\u89e3\u6790\uff1b<code>&lt;svg&gt;</code>\u6216<code>&lt;math&gt;</code>\u6807\u7b7e\u4f1a\u5207\u6362\u81f3\"in foreign content\"\u6a21\u5f0f\uff0c\u542f\u7528XML\u89e3\u6790\u89c4\u5219\u3002</p> <p>\u6211\u4eec\u4ecd\u7136\u4ee5<code>&lt;div&gt;1&lt;/div&gt;</code>\u4e3a\u4f8b\u6765\u8bf4\u660e\u8fd9\u6811\u6784\u9020\u8fc7\u7a0b\uff1a 1. \u89e3\u6790\u5668\u63a5\u6536<code>TokenStart Tag: &lt;div&gt;</code>\uff0c\u521b\u5efa\u4e00\u4e2aHTMLDivElement\u8282\u70b9\uff0c\u8282\u70b9\u5165\u6808\uff08\u5f00\u653e\u5143\u7d20\u6808\uff0c\u4e0b\u540c\uff09\u3002 2. \u89e3\u6790\u5668\u63a5\u6536Token Character: \"1\"\uff0c\u521b\u5efa\u4e00\u4e2a\u5185\u5bb9\u662f1\u7684Text\u8282\u70b9\uff0c\u8bbe\u7f6e\u4e3a\u6808\u9876\u8282\u70b9\uff08\u5373\u524d\u9762\u7684HTMLDivElement\u8282\u70b9\uff09\u7684\u5b50\u8282\u70b9\u3002 3. \u89e3\u6790\u5668\u63a5\u6536<code>Token End Tag: &lt;/div&gt;</code>\uff0c\u6808\u9876\u8282\u70b9\u51fa\u6808\u3002</p> <p>\u6700\u7ec8\u751f\u6210\u7684DOM\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>Document\n\u2514\u2500\u2500 html\n    \u2514\u2500\u2500 body\n        \u2514\u2500\u2500 div\n            \u2514\u2500\u2500 \"1\"\n</code></pre>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_5","title":"\u4f18\u5316","text":"<p>HTML\u89e3\u6790\u5668\u5728\u5f02\u5e38\u5904\u7406\u3001\u6027\u80fd\u7b49\u65b9\u9762\u505a\u4e86\u8bb8\u591a\u4f18\u5316\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_6","title":"\u5f02\u5e38\u517c\u5bb9\u673a\u5236","text":"<p>HTML\u89e3\u6790\u5668\u5177\u5907\u5f3a\u5927\u7684\u5bb9\u9519\u80fd\u529b\uff0c\u53ef\u81ea\u52a8\u4fee\u590d\u5e38\u89c1\u8bed\u6cd5\u9519\u8bef\u3002</p> <p>\u6bd4\u5982\uff1a 1. \u7f3a\u5c11\u95ed\u5408\u6807\u7b7e\uff0c\u5982 <code>&lt;p&gt;&lt;span&gt;123&lt;/p&gt;</code> 2. \u5d4c\u5957\u9519\u8bef\uff0c\u5982 <code>&lt;b&gt;1&lt;p&gt;2&lt;/b&gt;3&lt;/p&gt;</code></p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#streaming-parsing","title":"\u6d41\u5f0f\u5904\u7406\uff08Streaming\u00a0Parsing\uff09","text":"<p>\u6d4f\u89c8\u5668\u91c7\u7528**\u6d41\u5f0f\u89e3\u6790**\u7b56\u7565\uff1a\u65e0\u9700\u7b49\u5f85\u6574\u4e2aHTML\u6587\u4ef6\u4e0b\u8f7d\u5b8c\u6210\uff0c\u800c\u662f\u8fb9\u4e0b\u8f7d\u8fb9\u89e3\u6790\uff1a 1. \u7f51\u7edc\u7ebf\u7a0b\u6301\u7eed\u63a5\u6536\u5b57\u8282\u6d41\u5e76\u4f20\u9012\u7ed9\u89e3\u6790\u5668\u3002  2.\u00a0\u89e3\u6790\u5668\u9010\u5757\u5904\u7406Token\u5e76\u6784\u5efa\u90e8\u5206DOM\u6811\u3002  3.\u00a0\u9047\u5230 <code>script</code> \u6807\u7b7e\u65f6\u6682\u505c HTML\u89e3\u6790\uff0c\u4f18\u5148\u52a0\u8f7d\u5e76\u6267\u884c\u811a\u672c\uff08\u9664\u975e\u6807\u8bb0<code>async/defer</code>\uff09\u3002  4.\u00a0\u6784\u5efa\u7684DOM\u5206\u7247\u53ef\u63d0\u524d\u89e6\u53d1\u6e32\u67d3\uff0c\u52a0\u901f\u9996\u5c4f\u663e\u793a\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_7","title":"\u9884\u89e3\u6790\u5668","text":"<p>HTML \u89e3\u6790\u5668\u89c4\u5219\u4e2d\u8fd8\u5b9a\u4e49\u4e86\u9884\u6d4b\u6027 HTML \u89e3\u6790\u5668\uff08Speculative HTML parsing\uff09\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u9884\u89e3\u6790\u5668\u3002\u6839\u636e HTML \u89c4\u8303\uff0c\u6bcf\u4e2a HTML \u89e3\u6790\u5668\u90fd\u53ef\u4ee5\u6709\u4e00\u4e2a HTML \u9884\u89e3\u6790\u5668\uff0c\u5b83\u4f1a\u548c HTML \u89e3\u6790\u5668\u4e00\u8d77\u5de5\u4f5c\u3002</p> <p>\u9884\u89e3\u6790\u5668\u7684\u4e3b\u8981\u804c\u8d23\u662f\u63a8\u6d4b\u6027\u53bb\u52a0\u8f7d HTML \u53ef\u80fd\u9700\u8981\u7684\u8d44\u6e90\uff08\u5982\u56fe\u7247\u3001\u6837\u5f0f\u8868\u7b49\uff09\u3002\u5b83\u4e0d\u4ec5\u4f1a\u5728 HTML \u89e3\u6790\u5668\u6b63\u5e38\u5de5\u4f5c\u65f6\u53bb\u63a8\u6d4b\u6027\u7684\u52a0\u8f7d\u8d44\u6e90\uff08\u4f8b\u5982 HTML \u89e3\u6790\u5668\u5728\u4e3a <code>&lt;img</code> \u521b\u5efa token \u65f6\uff0c\u9884\u52a0\u8f7d\u5668\u5c31\u4f1a\u63a8\u6d4b\u6027\u7684\u52a0\u8f7d\u56fe\u50cf\u8d44\u6e90\uff09\uff0c\u4e5f\u4f1a\u5728 HTML \u89e3\u6790\u5668\u88ab <code>script</code> \u963b\u585e\u65f6\uff0c\u53bb\u52a0\u8f7d\u540e\u9762\u53ef\u80fd\u7528\u5230\u7684\u8d44\u6e90\u3002</p> <p>User agents may implement an optimization, as described in this section, to speculatively fetch resources that are declared in the HTML markup while the HTML parser is waiting for a pending parsing-blocking script to be fetched and executed, or during normal parsing, at the time an element is created for a token. </p> <p>\u901a\u8fc7\u9884\u52a0\u8f7d\u5668\uff0cHTML \u80fd\u591f\u5c3d\u5feb\u5730\u52a0\u8f7d\u6240\u9700\u8981\u7684\u8d44\u6e90\uff0c\u5c24\u5176\u662f\u5728 HTML \u89e3\u6790\u5668\u88ab\u963b\u585e\u65f6\uff08\u4f8b\u5982\u9047\u5230Script\uff09\uff0c\u53ef\u4ee5\u5c3d\u5feb\u52a0\u8f7d\u540e\u9762\u7684\u8d44\u6e90\uff0c\u63d0\u9ad8\u6e32\u67d3\u901f\u5ea6\u3002</p> <p>\u4e0d\u8fc7\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u9884\u89e3\u6790\u5668\u53ea\u4f1a\u52a0\u8f7d\u6587\u6863\u4e2d\u7684\u8d44\u6e90\u3002\u8fd9\u610f\u5473\u7740\u901a\u8fc7 JS \u521b\u5efa\u7684 <code>&lt;img&gt;</code> \u548c <code>&lt;script&gt;</code> \u7b49\u5143\u7d20\u8282\u70b9\u6240\u9700\u8981\u52a0\u8f7d\u7684\u8d44\u6e90\u4e0d\u4f1a\u88ab\u9884\u89e3\u6790\u5668\u52a0\u8f7d\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_8","title":"\u963b\u585e","text":""},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#script","title":"Script\u963b\u585e","text":"<p>HTML \u89c4\u8303\u5c06 script \u5206\u4e3a\u7ecf\u5178Script\uff08classic script\uff09 \u548c\u6a21\u5757Script\uff08module script\uff09\u3002</p> <pre><code>&lt;!-- \u7ecf\u5178Script --&gt;\n&lt;script&gt; /* \u5167\u8054js */ &lt;/script&gt;\n&lt;script scr=\"xxx\"&gt; &lt;/script&gt;\n\n&lt;!-- \u6a21\u5757Script --&gt;\n&lt;script type=\"module\"&gt; /* \u5167\u8054js */ &lt;/script&gt;\n&lt;script scr=\"xxx\" type=\"module\"&gt; &lt;/script&gt;\n</code></pre> <p>\u7ecf\u5178Script \u7684\u52a0\u8f7d\u548c\u6267\u884c\u901a\u5e38\u4f1a\u963b\u585e HTML \u89e3\u6790\uff0c\u9664\u975e\u8bbe\u7f6e\u4e86 <code>async</code> \u6216 <code>async</code> \u5c5e\u6027\uff0c\u4e24\u79cd\u5c5e\u6027\u5bfc\u81f4\u7ecf\u5178Script\u7684\u52a0\u8f7d\u65b9\u5f0f\u4f1a\u53d8\u4e3a\u5e76\u884c\u52a0\u8f7d\uff0c\u8fd9\u80fd\u907f\u514d\u963b\u585e HTML \u89e3\u6790\u3002</p> <p>\u6a21\u5757Script \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5ef6\u8fdf\u6267\u884c\uff0c\u5373\u5e76\u884c\u52a0\u8f7d\uff0c\u5728\u9875\u9762\u89e3\u6790\u5b8c\u6bd5\u540e\u6267\u884c\uff0c\u56e0\u6b64\u624b\u52a8\u5bf9\u6a21\u5757Script\u8bbe\u7f6e <code>defer</code> \u5c5e\u6027\u662f\u6ca1\u6709\u4efb\u4f55\u6548\u679c\u7684\u3002\u5982\u679c\u8bbe\u7f6e\u4e86 async \u5c5e\u6027\uff0c\u90a3\u4e48\u6a21\u5757Script \u5219\u4ecd\u7136\u662f\u5e76\u884c\u52a0\u8f7d\uff0c\u4f46\u662f\u4f1a\u5728 Script \u53ef\u7528\u65f6\u7acb\u5373\u6267\u884c\u3002</p> \u7ecf\u5178 Script \u52a0\u8f7d \u6267\u884c \u52a0\u8f7d\u662f\u5426\u963b\u585e HTML\u89e3\u6790 \u6267\u884c\u662f\u5426\u963b\u585e HTML\u89e3\u6790 <code>&lt;script async&gt;</code> \u5e76\u884c \u811a\u672c\u53ef\u7528\u65f6 \u274c \u2705 <code>&lt;script defer&gt;</code> \u5e76\u884c \u9875\u9762\u89e3\u6790\u5b8c\u6bd5\u540e \u274c \u2705 <code>&lt;script&gt;</code> \u7acb\u5373 \u811a\u672c\u53ef\u7528\u65f6 \u2705 \u2705 <code>&lt;script type=\"module\"&gt;</code> \u5e76\u884c \u9875\u9762\u89e3\u6790\u5b8c\u6bd5\u540e\u6267\u884c \u274c \u2705 <code>&lt;script type=\"module\" async&gt;</code> \u5e76\u884c \u5728\u53ef\u7528\u65f6\u7acb\u5373\u6267\u884c \u274c \u2705 &gt;  \u6ce8\u610f\uff1a\u6839\u636e HTML \u89c4\u8303\uff0c\u6d4f\u89c8\u5668\u4f1a\u5728\u811a\u672c\u53ef\u7528\u65f6\u5c31\u7acb\u5373\u6267\u884c\uff0c\u800c\u4e0d\u662f\u5fc5\u987b\u7b49\u5230 JS\u811a\u672c\u5168\u90e8\u52a0\u8f7d\u5b8c\u6bd5\u3002 <p>\u4e0b\u9762\u793a\u610f\u56fe\u5bf9\u4ee5\u4e0a\u5185\u5bb9\u8fdb\u884c\u4e86\u603b\u7ed3\uff1a</p> <p>![[asyncdefer.png]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#stylesheet","title":"StyleSheet \u963b\u585e","text":"<p>HTML\u89c4\u8303\u4e2d\u660e\u786e\u89c4\u5b9a\u4e86 HTML \u89e3\u6790\u5668\u9700\u8981\u5982\u4f55\u5904\u7406\u5f15\u5165\u5916\u90e8\u6837\u5f0f\u8868\u7684 link \u5143\u7d20\uff1a</p> <p>A\u00a0link\u00a0element of this type is\u00a0implicitly potentially render-blocking\u00a0if the element was created by its\u00a0node document 's parser.</p> <p>\u8fd9\u53e5\u8bdd\u6709\u51e0\u4e2a\u5173\u952e\u672f\u8bed\uff1a</p> \u672f\u8bed \u89e3\u91ca A\u00a0link\u00a0element of this type\uff08\u6307\u5177\u6709<code>rel=stylesheet</code>\u7684<code>&lt;link&gt;</code>\u5143\u7d20\uff09 \u6307\u5177\u6709<code>rel=stylesheet</code>\u7684<code>&lt;link&gt;</code>\u5143\u7d20\uff08\u5373CSS\u6837\u5f0f\u8868\u94fe\u63a5\uff09 created by its\u00a0node document 's parser\uff08\u7531node\u6587\u6863\u89e3\u6790\u5668\u521b\u5efa\uff09 \u7531 HTML \u89e3\u6790\u5668\u521b\u5efa\u7684 Link \u5143\u7d20\u8282\u70b9\uff0c\u800c\u4e0d\u662f JS \u52a8\u6001\u63d2\u5165\u7684\u3002 implicitly potentially render-blocking\uff08\u9690\u5f0f\u6f5c\u5728\u7684\u6e32\u67d3\u963b\u585e\uff09 \u53ef\u80fd\uff08\u4f46\u4e0d\u4e00\u5b9a\uff09\u963b\u585e\u6e32\u67d3\uff0c\u9700\u8981\u6d4f\u89c8\u5668\u6309\u89c4\u5219\u5904\u7406 \u8fd9\u53e5\u8bdd\u7684\u610f\u601d\u662f\uff1a\u5f53\u6587\u6863\u89e3\u6790\u5668\u5728\u89e3\u6790HTML\u65f6\u9047\u5230 <code>&lt;link rel=\"stylesheet\"&gt;</code> \u5143\u7d20\uff0c\u8fd9\u4e2a\u6837\u5f0f\u8868\u8d44\u6e90\u4f1a\u88ab\u89c6\u4e3a\u6f5c\u5728\u7684\u6e32\u67d3\u963b\u585e\u8d44\u6e90\uff0c\u6d4f\u89c8\u5668\u53ef\u80fd\u9700\u8981\u6682\u505c\u6e32\u67d3\u76f4\u5230\u8be5\u6837\u5f0f\u8868\u52a0\u8f7d\u5e76\u89e3\u6790\u5b8c\u6210\u3002 <p>\u6b64\u5916\uff0cHTML \u89c4\u8303 \u8fd8\u660e\u786e\u4e86 <code>stylesheet</code> \u963b\u585e script \u6267\u884c\u7684\u573a\u666f\uff0c\u539f\u6587\u5982\u4e0b\uff1a</p> <p>If the style sheet referenced no other resources (e.g., it was an internal style sheet given by a style element with no @import rules), then the style rules must be immediately made available to script; otherwise, the style rules must only be made available to script once the event loop reaches its update the rendering step.</p> <p>An element el in the context of a Document of an HTML parser or XML parser contributes a script-blocking style sheet if all of the following are true:</p> <ol> <li>el was created by that Document's parser.</li> <li>el is either a style element or a link element that was an external resource link that contributes to the styling processing model when the el was created by the parser.</li> <li>el's media attribute's value matches the environment.</li> <li>el's style sheet was enabled when the element was created by the parser.</li> <li>The last time the event loop reached step 1, el's root was that Document.</li> <li>The user agent hasn't given up on loading that particular style sheet yet. A user agent may give up on loading a style sheet at any time.</li> </ol> <p>\u6839\u636e\u89c4\u8303\uff0c\u5982\u679c\u6ca1\u6709\u5f15\u7528\u5176\u4ed6\u8d44\u6e90\uff08\u4f8b\u5982 <code>@import</code>\uff09\uff0c\u90a3\u4e48 style \u4f1a\u7acb\u5373\u53ef\u7528\u4e8e script \u811a\u672c\uff0c\u5426\u5219\u9700\u8981\u7b49\u5230\u4e8b\u4ef6\u5faa\u73af\u7684\"\u66f4\u65b0\u6e32\u67d3\"\u9636\u6bb5\u624d\u53ef\u7528\u3002</p> <p>\u5982\u679c\u6ee1\u8db3\u4e0b\u9762\u6240\u6709\u60c5\u51b5\uff0c\u90a3\u4e48 Script \u6267\u884c\u5c06\u4f1a\u88ab\u963b\u585e\u3002</p> \u6761\u4ef6\u5e8f\u53f7 \u5fc5\u8981\u6761\u4ef6\u63cf\u8ff0 \u793a\u4f8b\uff08\u6ee1\u8db3\uff09 \u793a\u4f8b\uff08\u4e0d\u6ee1\u8db3\uff09 1 \u7531\u6587\u6863\u89e3\u6790\u5668\u521b\u5efa\u7684\u5143\u7d20 html \u4e2d\u7684 <code>style</code> \u6807\u7b7e js \u52a8\u6001\u521b\u5efa\u7684 <code>style</code> \u5143\u7d20\u8282\u70b9 2 HTML \u6587\u6863\u4e2d\u7684 <code>style</code> \u6807\u7b7e\u6216 <code>link</code> \u6807\u7b7e\u5f15\u5165\u7684\u6837\u5f0f\u8868(rel=\"stylesheet\")\uff0c\u800c\u4e0d\u662f JS \u52a8\u6001\u521b\u5efa\u7684 <code>&lt;style&gt;</code>\u6216<code>&lt;link rel=\"stylesheet\" href=\"a.css\"&gt;</code> <code>&lt;link rel=\"preload\" href=\"a.css\"&gt;</code> 3 media\u5c5e\u6027\u5339\u914d\u5f53\u524d\u73af\u5883 <code>&lt;style&gt;</code> <code>media</code> \u5c5e\u6027\u9ed8\u8ba4\u65f6 auto\uff0c\u4e0e <code>&lt;style media=\"auto\"&gt;</code> \u7b49\u4ef7 <code>&lt;style media=\"print\"&gt;</code> 4 \u6837\u5f0f\u8868\u5df2\u542f\u7528 \u00b7 <code>&lt;style&gt;</code> <code>&lt;style disabled&gt;</code> 5 \u5c5e\u4e8e\u5f53\u524d\u6587\u6863 \u672a\u8c03\u7528 <code>element.remove()</code> \u6e38\u79bb\u7684\u5143\u7d20\u8282\u70b9 6 \u6d4f\u89c8\u5668\u672a\u653e\u5f03\u52a0\u8f7d \u6b63\u5e38\u52a0\u8f7d\u4e2d\u7684\u6837\u5f0f\u8868 404 \u6216\u5176\u4ed6\u9519\u8bef\u5bfc\u81f4\u52a0\u8f7d\u5931\u8d25"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#html_1","title":"HTML \u89e3\u6790\u5668\u7684\u5e94\u7528","text":"<p>\u5b66\u4e60HTML\u89e3\u6790\u89c4\u8303\u7684\u610f\u4e49\u4e0d\u4ec5\u5728\u4e8e\u4e86\u89e3\u6d4f\u89c8\u5668\u5185\u90e8\u5de5\u4f5c\u8fd0\u884c\u65b9\u5f0f\uff0c\u66f4\u6709\u52a9\u4e8e\u6211\u4eec\u4e86\u89e3\u73b0\u4ee3\u524d\u7aef\u6846\u67b6\u7684\u5e95\u5c42\u5de5\u4f5c\u539f\u7406\uff0c\u4f8b\u5982Vue\u7684\u6a21\u677f\u8bed\u6cd5\u672c\u8d28\u4e0a\u5c31\u662f\u5bf9HTML\u8bed\u6cd5\u7684\u589e\u5f3a\uff0c\u5176\u5e95\u5c42\u5b9e\u73b0\u65b9\u5f0f\u662f\u5bf9HTML\u89e3\u6790\u6d41\u7a0b\u7684\u6269\u5c55\uff0c\u7b80\u8981\u6765\u8bf4\u7531\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a</p> <pre><code>\u6a21\u677f\u8bed\u6cd5\n  \u2193   (\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790)\nTemplate AST\n  \u2193   (transform)\nCodegen\n  \u2193   (\u904d\u5386\u6811\u751f\u6210)\n\u6e32\u67d3\u51fd\u6570\n</code></pre> <p>\u7b14\u8005\u66fe\u57fa\u4e8e\u5bf9HTML\u89e3\u6790\u89c4\u5219\u548cVue\u6a21\u677f\u89e3\u6790\u7684\u7406\u89e3\uff0c\u5f00\u53d1\u4e86\u4e00\u6b3eMarkdown\u7f16\u8bd1\u5668\u3002\u5176\u5e95\u5c42\u5de5\u4f5c\u539f\u7406\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u501f\u9274\u4e86\u4e0a\u8ff0\u601d\u60f3\uff0c\u6709\u5174\u8da3\u7684\u8bfb\u8005\u53ef\u4ee5\u6df1\u5165\u63a2\u7a76\u4e00\u4e0b\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20II%EF%BC%9AHTML%20%E8%A7%A3%E6%9E%90%E5%85%A8%E6%B5%81%E7%A8%8B%E2%80%94%E2%80%94%E4%BB%8E%E5%AD%97%E8%8A%82%E6%B5%81%E5%88%B0%20DOM%20%E6%9E%84%E5%BB%BA/#_9","title":"\u53c2\u8003","text":"<p>https://html.spec.whatwg.org/multipage/parsing.html</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/","title":"\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce IV\uff1aV8 \u5783\u573e\u56de\u6536\u673a\u5236","text":""},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_1","title":"\u5f15\u8a00","text":"<p>\u4e0e\u67d0\u4e9b\u8bed\u8a00\u4e0d\u540c\uff0cJavaScript\u00a0\u91c7\u7528\u9690\u5f0f\u5783\u573e\u56de\u6536\u673a\u5236\u3002\u8fd9\u610f\u5473\u7740\u00a0JavaScript\u00a0\u65e0\u6cd5\u901a\u8fc7\u00a0API\u00a0\u76f4\u63a5\u89e6\u53d1\u5783\u573e\u56de\u6536\u64cd\u4f5c\uff0c\u7531JavaScript\u5f15\u64ce\u5185\u90e8\u5b8c\u6210\u5783\u573e\u56de\u6536\u5de5\u4f5c\u3002\u6b64\u5916\uff0c\u7531\u4e8eGC\u901a\u5e38\u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u4f1a\u963b\u585eJS\u6267\u884c\uff0c\u56e0\u6b64\u5bf9GC\u6027\u80fd\u8981\u6c42\u975e\u5e38\u9ad8\u3002\u5f53\u4e3b\u7ebf\u7a0b\u672a\u80fd\u5728\u00a016.66\u00a0\u6beb\u79d2\u5185\u5b8c\u6210\u6e32\u67d3\u5e27\u65f6\uff0c\u5c31\u4f1a\u5bfc\u81f4\u4e22\u5e27\u73b0\u8c61\uff0c\u8868\u73b0\u4e3a\u9875\u9762\u5361\u987f\u3001\u6e32\u67d3\u5ef6\u8fdf\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u73b0\u4ee3\u6d4f\u89c8\u5668\u5f15\u64ce\u6765\u8bf4\uff0c\u5783\u573e\u56de\u6536\uff08GC\uff09\u7684\u6027\u80fd\u4f18\u5316\u663e\u5f97\u5c24\u4e3a\u91cd\u8981\u3002\u672c\u6587\u5c06\u4ecb\u7ecd\u00a0V8\u00a0\u6240\u91c7\u7528\u7684\u5783\u573e\u56de\u6536\u5668\u00a0Orinoco\u00a0\u53ca\u5176\u76f8\u5173\u4f18\u5316\u6280\u672f\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_2","title":"\u672f\u8bed\u8868","text":"<ul> <li>V8\uff1aJS\u5f15\u64ce\uff0c\u88ab\u5e7f\u6cdb\u8fd0\u7528\u5728\u00a0Chrome\u00a0\u548c\u00a0Edge\u00a0\u6d4f\u89c8\u5668\u4e2d\u3002</li> <li>\u9875\uff08Page\uff09\uff1aV8\u00a0\u5c06\u5176\u5806\u5185\u5b58\u5212\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\uff0c\u79f0\u4e3a\u9875\u3002</li> <li>\u6839\uff08Root\uff09\uff1aGC\u7684\u8d77\u70b9\uff0c\u5305\u62ec\u6267\u884c\u4e0a\u4e0b\u6587\u3001\u5168\u5c40\u5bf9\u8c61\u548cDOM\u6811\u6839\u8282\u70b9\u7b49\u3002</li> <li>Orinoco\uff1aV8\u00a0\u7684\u73b0\u4ee3\u5316\u5783\u573e\u56de\u6536\u5668\uff0c\u91c7\u7528\u5e76\u884c\u3001\u589e\u91cf\u3001\u5e76\u53d1\u6280\u672f\u4f18\u5316\u00a0GC\u00a0\u6027\u80fd\u3002</li> <li>\u7a7a\u95f2\u5217\u8868\uff08free-list\uff09\uff1a\u8bb0\u5f55\u8001\u751f\u4ee3\u4e2d\u5185\u5b58\u788e\u7247\u7684\u4f4d\u7f6e\uff0c\u4f9b\u540e\u7eed\u5206\u914d\u590d\u7528\u3002</li> <li>\u7a7a\u95f2\u65f6\u95f4\uff1a\u4e3b\u7ebf\u7a0b\u63d0\u524d\u5b8c\u6210\u6e32\u67d3\u5e27\u5269\u4e0b\u7684\u65f6\u95f4\u3002</li> </ul>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_3","title":"\u4f20\u7edf\u5783\u573e\u56de\u6536\u673a\u5236","text":""},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_4","title":"\u5f15\u7528\u8ba1\u6570\u6cd5","text":"<p>\u4f20\u7edfJS\u5f15\u64ce\u91c7\u7528\u5f15\u7528\u8ba1\u6570\u6cd5\uff0c\u5f15\u7528\u8ba1\u6570\u6cd5\u901a\u8fc7\u8ba1\u6570\u5bf9\u8c61\u88ab\u5f15\u7528\u7684\u60c5\u51b5\u6765\u51b3\u5b9a\u662f\u5426\u56de\u6536\u3002\u5b83\u7684\u57fa\u672c\u601d\u60f3\u662f\uff1a\u6bcf\u4e2a\u5bf9\u8c61\u7ef4\u62a4\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\u5668\uff0c\u8bb0\u5f55\u6709\u591a\u5c11\u4e2a\u5f15\u7528\u6307\u5411\u5b83\uff1b\u5f53\u5f15\u7528\u8ba1\u6570\u5f52\u96f6\u65f6\uff0c\u8bf4\u660e\u8be5\u5bf9\u8c61\u4e0d\u518d\u88ab\u4f7f\u7528\uff0c\u53ef\u4ee5\u88ab\u91ca\u653e\u3002</p> <pre><code>let a = {} // \u8ba1\u65701\nlet o = {}\n\no.a = a // \u88ab\u5f15\u7528\uff0c\u8ba1\u65702\n\na = null // \u89e3\u9664\u5f15\u7528\uff0c\u8ba1\u65701\no = null // \u7531\u4e8eo\u5f15\u7528\u4e86a\uff0c\u6240\u4ee5a\u5bf9\u8c61\u8ba1\u6570\u51cf1\uff0c\u5f53\u524d\u4e3a0\uff0c\u540e\u7eed\u5c06\u4f1a\u88ab\u56de\u6536\n</code></pre> <p>\u8fd9\u4e00\u65b9\u6cd5\u5728\u73b0\u4ee3JS\u5f15\u64ce\u4e2d\u5df2\u7ecf\u88ab\u5e9f\u5f03\uff0c\u5176\u6700\u5927\u7684\u95ee\u9898\u5728\u4e8e\u5f15\u7528\u8ba1\u6570\u6cd5\u65e0\u6cd5\u89e3\u51b3\u5faa\u73af\u5f15\u7528\u7684\u95ee\u9898\u3002</p> <pre><code>function fn(){\n  const a = {} // a\u8ba1\u65701\n  const b = {} // b\u8ba1\u65701\n\n  a.target = b // b\u8ba1\u65702\n  b.target = a // a\u8ba1\u65702\n}\n\nfn()\n</code></pre> <p>\u5f53\u51fd\u6570\u7ed3\u675f\u65f6\u5c40\u90e8\u5bf9\u8c61a\u548cb\u88ab\u9500\u6bc1\uff0ca\u7684\u5f15\u7528\u8ba1\u6570\u4ece2\u51cf\u52301\uff08\u56e0\u4e3a\u00a0b.target\u00a0\u4ecd\u5f15\u7528\u5b83\uff09\uff0cb\u7684\u5f15\u7528\u8ba1\u6570\u4ece2\u51cf\u52301\uff08\u56e0\u4e3a\u00a0a.target\u00a0\u4ecd\u5f15\u7528\u5b83\uff09\uff0c\u7531\u4e8e\u4e24\u8005\u5f15\u7528\u6570\u90fd\u662f1\uff0c\u6240\u4ee5\u65e0\u6cd5\u88ab\u56de\u6536\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_5","title":"\u6807\u8bb0\u6e05\u9664\u6cd5","text":"<p>\u73b0\u4ee3\u6d4f\u89c8\u5668\u901a\u5e38\u91c7\u7528\u6807\u8bb0\u6e05\u9664\u6cd5\u4ee5\u907f\u514d\u5f15\u7528\u8ba1\u6570\u6cd5\u81ea\u8eab\u7f3a\u9677\u6240\u5e26\u6765\u7684\u5185\u5b58\u6cc4\u9732\u95ee\u9898\u3002\u6807\u8bb0\u6e05\u9664\u6cd5\u548c\u5f15\u7528\u8ba1\u6570\u6cd5\u601d\u8def\u4e0d\u540c\uff0c\u5f15\u7528\u8ba1\u6570\u6cd5\u662f\u8bb0\u5f55\u6bcf\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u6570\uff0c\u800c\u6807\u8bb0\u6e05\u9664\u6cd5\u91c7\u7528\u201c\u53ef\u8fbe\u6027\u201d\u7684\u601d\u60f3\uff0c\u5373\u5982\u679c\u4e00\u4e2a\u5bf9\u8c61\u5982\u679c\u201c\u4e0d\u53ef\u8fbe\u201d\uff0c\u90a3\u4e48\u5c31\u5e94\u8be5\u88ab\u56de\u6536\u3002\u5177\u4f53\u5b9e\u73b0\u662fGC\u4ece\u4e00\u7ec4\u6839\uff08\u5305\u62ecDOM\u6811\u6839\u8282\u70b9\u3001\u6267\u884c\u4e0a\u4e0b\u6587\u548c\u5168\u5c40\u5bf9\u8c61\u7b49\uff09\u51fa\u53d1\uff0c\u8ffd\u8e2aJavaScript\u5bf9\u8c61\u7684\u6bcf\u4e2a\u6307\u9488\uff0c\u5e76\u5c06\u8be5\u5bf9\u8c61\u6807\u8bb0\u4e3a\u53ef\u8bbf\u95ee\uff0c\u9012\u5f52\u6b64\u8fc7\u7a0b\uff0c\u76f4\u5230\u627e\u5230\u5e76\u6807\u8bb0\u4e86\u6240\u6709\u53ef\u8fbe\u7684\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u53ef\u8fbe\u7684\u5bf9\u8c61\u5c31\u662f\u6d3b\u5bf9\u8c61\uff0c\u800c\u4e0d\u53ef\u8fbe\u7684\u5bf9\u8c61\u5c31\u662f\u6b7b\u5bf9\u8c61\uff0c\u63a5\u4e0b\u6765GC\u4f1a\u56de\u6536\u6240\u6709\u6b7b\u5bf9\u8c61\u3002</p> <p>\u6807\u8bb0\u6e05\u9664\u6cd5\u603b\u4f53\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u6807\u8bb0\u6d3b\u5bf9\u8c61\uff08\u53ef\u8fbe\u7684\u5bf9\u8c61\uff09</li> <li>\u6e05\u9664\u6b7b\u5bf9\u8c61\uff08\u4e0d\u53ef\u8fbe\u7684\u5bf9\u8c61\uff09</li> <li>\u538b\u7f29\u6574\u7406\u5185\u5b58\uff08\u53ef\u9009\uff09</li> </ol> <p>\u6807\u8bb0\u6e05\u9664\u6cd5\u5f25\u8865\u4e86\u5f15\u7528\u8ba1\u6570\u6cd5\u5728\u5904\u7406\u5faa\u73af\u5f15\u7528\u65f6\u7684\u7f3a\u9677\u3002\u7531\u4e8e\u65e0\u9700\u9891\u7e41\u66f4\u65b0\u5f15\u7528\u8ba1\u6570\uff0c\u8be5\u65b9\u6cd5\u7684\u6027\u80fd\u5f00\u9500\u76f8\u5bf9\u8f83\u5c0f\u3002\u7136\u800c\uff0c\u5728\u73b0\u4ee3\u6d4f\u89c8\u5668\u4e2d\uff0c\u5b83\u4ecd\u7136\u5b58\u5728\u4e00\u4e9b\u4e0d\u8db3\u4e4b\u5904\u3002\u8fd9\u91cc\u7684\u4e0d\u8db3\u5e76\u975e\u6307\u7b97\u6cd5\u672c\u8eab\u7684\u7f3a\u9677\uff0c\u800c\u662f\u56e0\u4e3a\u5783\u573e\u56de\u6536\u5668\uff08GC\uff09\u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u4e0a\uff0c\u53ef\u80fd\u4f1a\u5f15\u53d1\u6027\u80fd\u95ee\u9898\uff0c\u6240\u4ee5\u73b0\u4ee3\u6d4f\u89c8\u5668\u5f15\u64ce\u901a\u5e38\u4f1a\u91c7\u7528\u4e00\u4e9b\u65b9\u5f0f\u6765\u4f18\u5316GC\u7684\u6027\u80fd\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_6","title":"\u4ee3\u9645\u5047\u8bf4","text":"<p>\u5728\u5783\u573e\u56de\u6536\u4e2d\uff0c\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u672f\u8bed\uff1a\u201c\u4ee3\u9645\u5047\u8bf4\u201d\uff0c\u5176\u89c2\u70b9\u8ba4\u4e3a\u7edd\u5927\u591a\u6570\u7684\u5bf9\u8c61\u90fd\u662f\u201c\u671d\u751f\u66ae\u6b7b\u201d\u7684\uff0c\u5373\u5927\u90e8\u5206\u7684\u5bf9\u8c61\u88ab\u521b\u5efa\u540e\u90fd\u5c06\u5f88\u5feb\u6b7b\u4ea1\u3002\u57fa\u4e8e\u8fd9\u4e2a\u89c2\u70b9\uff0c\u5bf9\u8c61\u53ef\u4ee5\u88ab\u5206\u4e3a\u201c\u65b0\u751f\u4ee3\u201d\u548c\u201c\u8001\u751f\u4ee3\u201d\uff0c\u4e00\u4e2a\u521a\u88ab\u521b\u5efa\u7684\u5bf9\u8c61\u5c5e\u4e8e\u201c\u65b0\u751f\u4ee3\u201d\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u4f1a\u5f88\u5feb\u6b7b\u4ea1\uff0c\u5982\u679c\u5728\u7ecf\u5386\u8fc7\u51e0\u6b21GC\u540e\u8be5\u5bf9\u8c61\u4ecd\u7136\u5b58\u6d3b\uff0c\u90a3\u4e48\u5b83\u5c31\u4f1a\u88ab\u201c\u63d0\u5347\u201d\u81f3\u8001\u751f\u4ee3\u4e2d\u3002</p> <p>\u901a\u8fc7\u4ee3\u9645\u5047\u8bf4\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u65b0\u751f\u4ee3\u4e2d\u5bf9\u8c61\u6570\u91cf\u4f1a\u66f4\u591a\uff0c\u5e76\u4e14\u5927\u90e8\u5206\u5bf9\u8c61\u5f88\u5feb\u4f1a\u6b7b\u4ea1\uff0c\u56e0\u6b64\u9700\u8981\u4e00\u4e2a\u5783\u573e\u56de\u6536\u5668\u4e13\u95e8\u53bb\u9ad8\u6548\u5730\u56de\u6536\uff0c\u800c\u5927\u591a\u6570JS\u5f15\u64ce\u90fd\u4f1a\u91c7\u7528\u4e3b\u526fGC\u7ed3\u5408\u7684\u65b9\u5f0f\u6765\u8fdb\u884c\u5783\u573e\u56de\u6536\uff0c\u526fGC\uff08Scavenger\uff09\u53ea\u8d1f\u8d23\u65b0\u751f\u4ee3\u7684\u5783\u573e\u56de\u6536\uff0c\u5176\u6267\u884c\u66f4\u9891\u7e41\uff0c\u800c\u5f53\u5185\u5b58\u5360\u7528\u8fbe\u5230\u67d0\u4e2a\u4e34\u754c\u503c\u65f6\u5219\u4f1a\u89e6\u53d1\u4e3bGC\uff08Mark-Compact\uff09\uff0c\u5bf9\u6574\u4e2a\u5806\u5185\u5b58\u8fdb\u884c\u5783\u573e\u56de\u6536\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#minor-gc","title":"Minor\u00a0GC","text":"<p>Minor\u00a0GC\u53ea\u56de\u6536\u65b0\u751f\u4ee3\uff0c\u91c7\u7528\u201c\u534a\u7a7a\u95f4\u201d\u7684\u8bbe\u8ba1\uff0c\u4e00\u534a\u5b58\u653e\u5bf9\u8c61\uff0c\u53e6\u4e00\u534a\u662f\u7a7a\u7684\uff0c\u6700\u521d\u7684\u90a3\u4e00\u534a\u5b58\u653e\u5bf9\u8c61\u7684\u7a7a\u95f4\u79f0\u4e3a\u201cFrom-Space\u201d\uff0c\u800c\u53e6\u4e00\u534a\u7a7a\u95f4\u662f\u7a7a\u7684\uff0c\u79f0\u4e3a\u201cTo-Space\u201d\u3002\u5f53Minor\u00a0GC\u8fdb\u884c\u5783\u573e\u56de\u6536\u65f6\uff0c\u4f1a\u6267\u884c\u4e0b\u9762\u7684\u6b65\u9aa4\uff1a</p> <ol> <li>\u6807\u8bb0\uff1a\u627e\u5230\u6240\u6709\u53ef\u8fbe\u7684\u5bf9\u8c61\u5e76\u6807\u8bb0</li> <li>\u6e05\u9664\uff1a\u56de\u6536\u6b7b\u5bf9\u8c61<ol> <li>\u5c06\u201cFrom-Space\u201d\u7a7a\u95f4\u4e2d\u6d3b\u7684\u5bf9\u8c61\u590d\u5236\u5230\u201cTo-Space\u201d</li> <li>\u6e05\u7406\u201cFrom-Space\u201d\u7a7a\u95f4\u4e2d\u5269\u4f59\u7684\u5bf9\u8c61\uff0c\u5373\u4e0d\u53ef\u8fbe\u7684\u6b7b\u5bf9\u8c61</li> </ol> </li> <li>\u6307\u9488\u66f4\u65b0\uff1a\u66f4\u65b0\u539f\u59cb\u6307\u9488\u5230\u65b0\u4f4d\u7f6e</li> </ol> <p>\u5728\u6700\u540eV8\u4f1a\u5c06\u539f\u6765\u7684\u201cTo-Space\u201d\u4f5c\u4e3a\u201cFrom-Space\u201d\uff0c\u201cFrom-Space\u201d\u4f5c\u4e3a\u201cTo-Space\u201d\uff0c\u540e\u7eed\u91cd\u590d\u4ee5\u4e0a\u64cd\u4f5c\u3002</p> <p>\u4ece\u6574\u4f53\u4e0a\u6765\u770b\uff0cMInor\u00a0GC\u5783\u573e\u56de\u6536\u4e3b\u8981\u662f\u901a\u8fc7\u4e09\u4e2a\u6b65\u9aa4\u6765\u5b8c\u6210\u7684\uff1a\u6807\u8bb0\u3001\u6e05\u9664\u548c\u6307\u9488\u66f4\u65b0\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e09\u8005\u662f\u4ea4\u66ff\u6267\u884c\u7684\uff0c\u800c\u4e0d\u662f\u6309\u9636\u6bb5\u6267\u884c\uff0c\u5373\u53d1\u73b0\u4e00\u4e2a\u6d3b\u5bf9\u8c61\u5c31\u6807\u8bb0\u3001\u590d\u5236\uff0c\u7136\u540e\u66f4\u65b0\u6307\u9488\uff0c\u800c\u4e0d\u662f\u5168\u90e8\u6807\u8bb0\u540e\u518d\u6e05\u9664\u518d\u66f4\u65b0\u6307\u9488\u3002</p> <p>\u7531\u4e8e\u5927\u591a\u6570\u5bf9\u8c61\u7684\u5b58\u6d3b\u65f6\u95f4\u5f88\u77ed\u4e14Minor\u00a0GC\u6bcf\u6b21\u53ea\u590d\u5236\u6d3b\u7684\u5bf9\u8c61\uff0c\u6240\u4ee5Minor\u00a0GC\u7684\u6548\u7387\u975e\u5e38\u9ad8\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#major-gc","title":"Major\u00a0GC","text":"<p>\u5728\u591a\u6b21\u5783\u573e\u56de\u6536\u4e2d\u5b58\u6d3b\u7684\u65b0\u751f\u4ee3\u4f1a\u88ab\u63d0\u5347\u81f3\u8001\u751f\u4ee3\u4e2d\uff0c\u800cMinor\u00a0GC\u53ea\u5904\u7406\u65b0\u751f\u4ee3\uff0c\u4e0d\u4f1a\u5bf9\u8001\u751f\u4ee3\u8fdb\u884c\u5783\u573e\u56de\u6536\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u4e00\u4e2a\u4e3bGC\u6765\u5bf9\u6574\u4e2a\u5806\u8fdb\u884c\u5783\u573e\u56de\u6536\u3002</p> <p>Major\u00a0GC\u4e5f\u662f\u901a\u8fc7\u4e09\u4e2a\u6b65\u9aa4\u6765\u5b9e\u73b0\u5783\u573e\u56de\u6536\uff0c\u4e0d\u8fc7\u4e24\u8005\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u540c\uff0cMinor\u00a0GC\u662f\u901a\u8fc7\u201c\u534a\u7a7a\u95f4\u201d\u7684\u8bbe\u8ba1\u5b9e\u73b0\u6e05\u9664\u7684\uff0c\u5e76\u4e14\u5728\u79fb\u52a8\u65f6\u901a\u8fc7\u79fb\u52a8\u5230\u4e00\u4e2a\u8fde\u7eed\u7684\u5185\u5b58\u5757\u4e2d\u89e3\u51b3\u5185\u5b58\u95f4\u9699\u95ee\u9898\uff0c\u800cMajor\u00a0GC\u5219\u4e0d\u540c\u3002</p> <p>Major\u00a0GC\u7684\u4e3b\u8981\u6b65\u9aa4\uff1a</p> <ol> <li>\u6807\u8bb0\uff1a\u901a\u8fc7\u53ef\u8fbe\u6027\u6807\u8bb0\u6d3b\u5bf9\u8c61</li> <li>\u6e05\u9664\uff1a\u6e05\u9664\u6b7b\u5bf9\u8c61\uff0c\u540c\u65f6\u5c06\u6b7b\u5bf9\u8c61\u7559\u4e0b\u7684\u7a7a\u95f4\u95f4\u9699\u8bb0\u5f55\u5230\u4e00\u4e2a\u88ab\u79f0\u4e3a\u7a7a\u95f2\u5217\u8868\uff08free-list\uff09\u7684\u6570\u636e\u7ed3\u6784\u4e2d</li> <li>\u538b\u7f29\uff08\u4ec5\u5728\u9ad8\u5ea6\u788e\u7247\u5316\u65f6\uff09\uff1a\u501f\u52a9\u7a7a\u95f2\u5217\u8868\uff0c\u5c06\u5e78\u5b58\u7684\u6d3b\u5bf9\u8c61\u590d\u5236\u5230\u5176\u4ed6\u9875\u7684\u6b7b\u5bf9\u8c61\u7559\u4e0b\u7684\u7a7a\u95f4\u95f4\u9699\u4e2d</li> </ol> <p>Major\u00a0GC\u00a0\u5e76\u672a\u91c7\u7528\u7c7b\u4f3c\u00a0Minor\u00a0GC\u00a0\u7684\u534a\u7a7a\u95f4\u8bbe\u8ba1\u3002\u8fd9\u662f\u56e0\u4e3a\u00a0Major\u00a0GC\u00a0\u9700\u8981\u5904\u7406\u6240\u6709\u5bf9\u8c61\uff0c\u5305\u62ec\u65b0\u751f\u4ee3\u548c\u8001\u751f\u4ee3\u3002\u800c\u8001\u751f\u4ee3\u4e2d\u5305\u542b\u5927\u91cf\u957f\u5bff\u547d\u5468\u671f\u7684\u5b58\u6d3b\u5bf9\u8c61\uff0c\u590d\u5236\u8fd9\u4e9b\u5bf9\u8c61\u4f1a\u5bfc\u81f4\u6781\u9ad8\u7684\u6027\u80fd\u5f00\u9500\u3002\u5c3d\u7ba1\u00a0Major\u00a0GC\u00a0\u4f1a\u6267\u884c\u538b\u7f29\u64cd\u4f5c\uff0c\u4f46\u8fd9\u79cd\u64cd\u4f5c\u4ec5\u9650\u4e8e\u9ad8\u5ea6\u788e\u7247\u5316\u7684\u9875\uff0c\u4ee5\u5c3d\u91cf\u51cf\u5c11\u5176\u5bf9\u7cfb\u7edf\u6027\u80fd\u7684\u8d1f\u9762\u5f71\u54cd\u3002</p> <p>Major\u00a0GC\u00a0\u91c7\u53d6\u7684\u7b56\u7565\u662f\uff0c\u5c06\u6b7b\u4ea1\u5bf9\u8c61\u7559\u4e0b\u7684\u7a7a\u95f4\u95f4\u9699\u8bb0\u5f55\u5230\u4e00\u4e2a\u540d\u4e3a\u201c\u7a7a\u95f2\u5217\u8868\u201d\uff08free-list\uff09\u7684\u6570\u636e\u7ed3\u6784\u4e2d\u3002\u5f53\u540e\u7eed\u9700\u8981\u5206\u914d\u5185\u5b58\u65f6\uff0c\u4f1a\u67e5\u8be2\u7a7a\u95f2\u5217\u8868\uff0c\u4ece\u800c\u5feb\u901f\u627e\u5230\u5408\u9002\u5927\u5c0f\u7684\u5185\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#orinoco","title":"Orinoco","text":"<p>\u4e0a\u9762\u7684\u7b56\u7565\u5df2\u7ecf\u5b9e\u73b0\u4e86\u4e00\u5b9a\u7a0b\u5ea6\u7684\u4f18\u5316\uff0c\u4f46\u662f\u73b0\u4ee3\u6d4f\u89c8\u5668\u5f15\u64ce\u6240\u505a\u7684\u8fd8\u4e0d\u6b62\u4e8e\u6b64\uff0c\u4ee5\u6211\u4eecV8\u5f15\u64ce\u4f7f\u7528\u7684\u5783\u573e\u56de\u6536\u5668Orinoco\u4e3a\u4f8b\uff0c\u5b83\u5229\u7528\u6700\u65b0\u7684\u5e76\u884c\u3001\u589e\u91cf\u3001\u5e76\u53d1\u7b49\u6280\u672f\u6765\u4f18\u5316GC\uff0c\u4ee5\u91ca\u653e\u4e3b\u7ebf\u7a0b\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_7","title":"\u5e76\u884c","text":"<p>\u5728\u4e3b\u7ebf\u7a0b\u6267\u884cGC\u671f\u95f4\uff0cV8\u53ef\u4ee5\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\u6765\u8f85\u52a9\u5b8c\u6210GC\u5de5\u4f5c\uff0c\u6b64\u65f6JS\u6267\u884c\u88ab\u6682\u505c\uff0cJS\u5806\u4e2d\u4e0d\u4f1a\u4ea7\u751f\u65b0\u7684\u5bf9\u8c61\uff0c\u4e3b\u7ebf\u7a0b\u548c\u8f85\u52a9\u7ebf\u7a0b\u4e00\u540c\u5b8c\u6210\u5783\u573e\u56de\u6536\u5de5\u4f5c\uff0c\u8fd9\u4f1a\u76f4\u63a5\u51cf\u5c11GC\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u7684\u65f6\u95f4\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_8","title":"\u589e\u91cf","text":"<p>V8\u53ef\u4ee5\u5c06GC\u4efb\u52a1\u5206\u6210\u591a\u4e2a\u5c0f\u4efb\u52a1\uff0c\u5e76\u95f4\u9699\u6027\u5730\u63d2\u5165\u5230\u4e3b\u7ebf\u7a0b\u4e2d\u6267\u884c\uff0c\u4ece\u800c\u907f\u514dGC\u957f\u65f6\u95f4\u5360\u7528\u4e3b\u7ebf\u7a0b\u3002\u8fd9\u79cd\u65b9\u5f0f\u76f8\u8f83\u4e8e\u76f4\u63a5\u5360\u7528\u4e3b\u7ebf\u7a0b\u6267\u884cGC\u6027\u80fd\u8981\u597d\u5f97\u591a\uff0c\u4f46\u66f4\u52a0\u590d\u6742\u3002\u56e0\u4e3a\u5728\u95f4\u9694JS\u6267\u884c\u671f\u95f4\uff0cJS\u5806\u7684\u72b6\u6001\u53ef\u80fd\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u5bfc\u81f4\u4e4b\u524d\u589e\u91cf\u5f0f\u7684\u5de5\u4f5c\u5931\u6548\u3002\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u4f1a\u51cf\u5c11GC\u6240\u7528\u7684\u65f6\u957f\uff0c\u53cd\u800c\u4f1a\u7565\u5fae\u589e\u52a0\uff0c\u4f46\u5b83\u5bf9\u89e3\u51b3GC\u957f\u65f6\u95f4\u5360\u7528\u4e3b\u7ebf\u7a0b\u5bfc\u81f4\u7684\u9875\u9762\u5361\u987f\u95ee\u9898\u5177\u6709\u91cd\u8981\u610f\u4e49\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_9","title":"\u5e76\u53d1","text":"<p>\u5e76\u53d1\u662f\u6307JS\u5728\u4e3b\u7ebf\u7a0b\u4e2d\u6b63\u5e38\u6267\u884c\uff0c\u901a\u8fc7\u8f85\u52a9\u7ebf\u7a0b\u5728\u540e\u53f0\u5b8c\u6210GC\u5de5\u4f5c\uff0c\u4e24\u8005\u540c\u65f6\u8fdb\u884c\u3002\u8fd9\u79cd\u65b9\u5f0f\u7684\u96be\u70b9\u5728\u4e8e\uff1aJS\u6267\u884c\u8fc7\u7a0b\u4e2d\u5806\u7684\u72b6\u6001\u53ef\u80fd\u4f1a\u4e0d\u65ad\u53d8\u5316\uff0c\u5bfc\u81f4\u4e4b\u524d\u7684\u5de5\u4f5c\u5931\u6548\uff1b\u6b64\u5916\uff0c\u4e3b\u7ebf\u7a0b\u7684JS\u548c\u8f85\u52a9\u7ebf\u7a0b\u7684GC\u53ef\u80fd\u4f1a\u540c\u65f6\u8bbf\u95ee\u6216\u4fee\u6539\u67d0\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u7ade\u6001\u95ee\u9898\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u7684\u597d\u5904\u4e5f\u5f88\u660e\u663e\uff0c\u4e3b\u7ebf\u7a0b\u53ef\u4ee5\u5b8c\u5168\u81ea\u7531\u5730\u6267\u884cJS\uff0cGC\u5bf9\u6027\u80fd\u7684\u5f71\u54cd\u5f88\u5c0f\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#gc","title":"\u7a7a\u95f2\u65f6\u95f4GC","text":"<p>\u663e\u793a\u5668\u5e38\u89c1\u7684\u5237\u65b0\u7387\u662f60Hz\uff0c\u4e5f\u5c31\u662f\u8bf4\u9700\u8981\u572816.66ms\u5185\u5b8c\u6210\u6e32\u67d3\u5e27\u3002\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u5c31\u4f1a\u5bfc\u81f4\u201c\u4e22\u5e27\u201d\uff0c\u5728\u9875\u9762\u4e2d\u4f53\u73b0\u4e3a\u5361\u987f\u6216\u5ef6\u8fdf\u3002\u800c\u5982\u679c\u4e3b\u7ebf\u7a0b\u5728\u8fd9\u4e2a\u65f6\u95f4\u5185\u63d0\u524d\u5b8c\u6210\u4e86\u6e32\u67d3\u5e27\uff0c\u90a3\u4e48\u5269\u4f59\u7684\u65f6\u95f4\u5c31\u88ab\u79f0\u4e3a\u7a7a\u95f2\u65f6\u95f4\u3002V8\u53ef\u80fd\u4f1a\u5728\u4e3b\u7ebf\u7a0b\u7a7a\u95f2\u65f6\u4e3b\u52a8\u585e\u5165GC\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u5fc5\u987b\u7b49\u5230\u5185\u5b58\u5360\u7528\u8fbe\u5230\u4e34\u754c\u503c\u65f6\u624d\u8fdb\u884cGC\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_10","title":"\u603b\u7ed3","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u4e86\u89e3\u4e86\u4e24\u79cd\u5e38\u89c1\u7684\u5783\u573e\u56de\u6536\u673a\u5236\u5f15\u7528\u8ba1\u6570\u6cd5\u548c\u6807\u8bb0\u6e05\u9664\u6cd5\uff0c\u5e76\u4e14\u4e86\u89e3\u5230\u5f15\u7528\u8ba1\u6570\u6cd5\u5728\u5faa\u73af\u5f15\u7528\u4e0a\u7684\u7f3a\u9677\u4ee5\u53ca\u73b0\u4ee3\u6d4f\u89c8\u5668\u901a\u5e38\u91c7\u7528\u7684\u662f\u6807\u8bb0\u6e05\u9664\u6cd5\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u4e86\u89e3\u4e86GC\u4e2d\u7684\u4e13\u4e1a\u672f\u8bed\u201c\u4ee3\u9645\u5047\u8bf4\u201d\uff0c\u5176\u6838\u5fc3\u89c2\u70b9\u662f\u5927\u591a\u6570\u5bf9\u8c61\u90fd\u662f\u201c\u671d\u751f\u66ae\u6b7b\u201d\uff0c\u5b58\u6d3b\u65f6\u95f4\u5f88\u77ed\uff0c\u56e0\u6b64V8\u4f1a\u5c06\u5bf9\u8c61\u5206\u4e3a\u201c\u65b0\u751f\u4ee3\u201d\u548c\u201c\u8001\u751f\u4ee3\u201d\uff0c\u526fGC\u4e13\u95e8\u5904\u7406\u65b0\u751f\u4ee3\uff0c\u91c7\u7528\u534a\u7a7a\u95f4\u7684\u8bbe\u8ba1\u901a\u8fc7\u6807\u8bb0\u3001\u6e05\u9664\u3001\u6307\u6807\u66f4\u65b0\u4e09\u4e2a\u6b65\u9aa4\u6765\u5b9e\u73b0\u5783\u573e\u56de\u6536\uff0c\u6bcf\u6b21\u6e05\u9664\u90fd\u662f\u4e00\u6b21\u6d3b\u5bf9\u8c61\u7684\u590d\u5236\uff0c\u4e3bGC\u8d1f\u8d23\u6574\u4e2a\u5806\u7684\u5783\u573e\u56de\u6536\uff0c\u5176\u4e3b\u8981\u6b65\u9aa4\u662f\u6807\u8bb0\u3001\u6e05\u9664\u548c\u538b\u7f29\uff0c\u5728\u6e05\u9664\u4e2d\u4f1a\u5c06\u6b7b\u5bf9\u8c61\u7684\u5185\u5b58\u95f4\u9699\u4fdd\u5b58\u5728\u7a7a\u95f2\u5217\u8868\uff0c\u4ee5\u4fbf\u540e\u7eed\u5206\u914d\u65b0\u5bf9\u8c61\u65f6\u4f7f\u7528\u3002</p> <p>\u6700\u540e\uff0c\u7531\u4e8eGC\u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u4f1a\u963b\u585eJS\u6267\u884c\u4e0e\u9875\u9762\u6e32\u67d3\uff0c\u56e0\u6b64\u73b0\u4ee3\u6d4f\u89c8\u5668\u5f15\u64ce\u8fd8\u5728\u5e95\u5c42\u505a\u4e86\u5f88\u591a\u6027\u80fd\u4f18\u5316\u5de5\u4f5c\uff0c\u6bd4\u5982\u5e76\u884c\u3001\u589e\u91cf\u3001\u5e76\u53d1\u548c\u7a7a\u95f2\u65f6\u95f4GC\u3002\u5e76\u884c\u662f\u6307\u5728\u4e3b\u7ebf\u7a0b\u8fd0\u884cGC\u65f6\u901a\u8fc7\u521b\u5efa\u8f85\u52a9\u7ebf\u7a0b\u534f\u52a9\u5b8c\u6210GC\u5de5\u4f5c\uff0c\u8fd9\u4f1a\u76f4\u63a5\u51cf\u5c11GC\u65f6\u95f4\uff0c\u589e\u91cf\u662f\u6307\u5c06GC\u5212\u5206\u6210\u591a\u4e2a\u5c0f\u4efb\u52a1\u95f4\u9699\u6027\u5730\u63d2\u5165\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u4ece\u800c\u907f\u514d\u56e0GC\u957f\u65f6\u95f4\u6301\u7eed\u6027\u5730\u5360\u7528\u4e3b\u7ebf\u7a0b\u5bfc\u81f4\u9875\u9762\u5361\u987f\uff0c\u5e76\u53d1\u662f\u6307\u5728\u4e3b\u7ebf\u7a0b\u6267\u884cJS\u65f6\uff0c\u901a\u8fc7\u8f85\u52a9\u7ebf\u7a0b\u5e76\u53d1\u5f0f\u5730\u6267\u884cGC\uff0cGC\u51e0\u4e4e\u4e0d\u4f1a\u5360\u7528\u4e3b\u7ebf\u7a0b\uff0c\u6027\u80fd\u5f00\u9500\u5f88\u5c0f\uff0c\u6b64\u5916V8\u8fd8\u4f1a\u5728\u4e3b\u7ebf\u7a0b\u7684\u7a7a\u95f2\u65f6\u95f4\u91cc\u4e3b\u52a8\u6267\u884cGC\uff0c\u5408\u7406\u5730\u8fd0\u7528\u8fd9\u4e9b\u7a7a\u95f2\u65f6\u95f4\u6765\u4f18\u5316\u6027\u80fd\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20IV%EF%BC%9AV8%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/#_11","title":"\u53c2\u8003\u8d44\u6599","text":"<p>Trash\u00a0talk:\u00a0the\u00a0Orinoco\u00a0garbage\u00a0collector\u00a0\u00b7\u00a0V8</p> <p>Tracing\u00a0from\u00a0JS\u00a0to\u00a0the\u00a0DOM\u00a0and\u00a0back\u00a0again\u00a0\u00b7\u00a0V8</p> <p>Concurrent\u00a0marking\u00a0in\u00a0V8\u00a0\u00b7\u00a0V8</p> <p>Idle-Time\u00a0Garbage-Collection\u00a0Scheduling\u00a0-\u00a0ACM\u00a0Queue</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/","title":"\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce I\uff1a\u4ece\u591a\u8fdb\u7a0b\u67b6\u6784\u5230\u6e32\u67d3\u5f15\u64ce","text":""},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/#_1","title":"\u6d4f\u89c8\u5668\u7684\u591a\u8fdb\u7a0b\u67b6\u6784","text":"<p>\u6d4f\u89c8\u5668\u672c\u8eab\u662f\u7531\u591a\u4e2a\u8fdb\u7a0b\u5171\u540c\u7ec4\u6210\u7684\u7cfb\u7edf\uff0c\u6d4f\u89c8\u5668\u7684\u591a\u8fdb\u7a0b\u67b6\u6784\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u90e8\u5206\uff1a</p> <ol> <li>\u6e32\u67d3\u5668\u8fdb\u7a0b\uff1a\u8d1f\u8d23\u5c06\u7f51\u9875\u5185\u5bb9\u7ed8\u5236\u5230\u5c4f\u5e55\u4e0a\uff0c\u8fd9\u662f\u524d\u7aef\u5f00\u53d1\u8005\u6700\u5e38\u63a5\u89e6\u7684\u90e8\u5206\u3002</li> <li>GPU\u8fdb\u7a0b\uff1a\u4e13\u6ce8\u4e8e\u56fe\u5f62\u6e32\u67d3\u4efb\u52a1\uff0c\u63d0\u5347\u52a8\u753b\u548c\u89c6\u89c9\u6548\u679c\u7684\u6027\u80fd\u3002</li> <li>\u6d4f\u89c8\u5668\u8fdb\u7a0b\uff1a\u4f5c\u4e3a\u603b\u6307\u6325\uff0c\u534f\u8c03\u5176\u4ed6\u8fdb\u7a0b\u5e76\u7ba1\u7406\u7528\u6237\u754c\u9762\u3002</li> <li>\u63d2\u4ef6\uff1a\u63a7\u5236\u7f51\u7ad9\u4f7f\u7528\u7684\u6240\u6709\u63d2\u4ef6\uff0c\u4f8b\u5982\u00a0Flash\u3002</li> </ol> <p>\u8fd9\u79cd\u591a\u8fdb\u7a0b\u8bbe\u8ba1\u7684\u597d\u5904\u5728\u4e8e\u63d0\u9ad8\u5b89\u5168\u6027\u4e0e\u7a33\u5b9a\u6027\u3002\u5373\u4f7f\u67d0\u4e2a\u8fdb\u7a0b\u5d29\u6e83\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u6574\u4e2a\u6d4f\u89c8\u5668\u7684\u8fd0\u884c\u3002\u4f8b\u5982\uff0c\u5f53\u4f60\u6253\u5f00\u591a\u4e2a\u6807\u7b7e\u9875\u65f6\uff0c\u6bcf\u4e2a\u6807\u7b7e\u9875\u90fd\u6709\u72ec\u7acb\u7684\u6e32\u67d3\u5668\u8fdb\u7a0b\uff0c\u907f\u514d\u4e86\u56e0\u5355\u4e00\u9875\u9762\u9519\u8bef\u5bfc\u81f4\u6574\u4e2a\u6d4f\u89c8\u5668\u5d29\u6e83\u7684\u95ee\u9898\u3002</p> <p>\u4e0d\u4ec5\u4ec5\u662f\u6807\u7b7e\u9875\uff0c\u6807\u7b7e\u9875\u4e2d\u53ef\u80fd\u4f1a\u901a\u8fc7<code>&lt;iframe&gt;</code>\u5d4c\u5165\u6587\u6863\uff0c\u6211\u4eec\u5c06\u6807\u7b7e\u9875\u548cFrame\u90fd\u7edf\u79f0\u4e3a\u6d4f\u89c8\u4e0a\u4e0b\u6587\uff08Browsing\u00a0Context\uff09\u3002\u6bcf\u4e2a\u6d4f\u89c8\u4e0a\u4e0b\u6587\u81f3\u5c11\u6709\u4e00\u4e2a\u6e32\u67d3\u5668\u8fdb\u7a0b\uff0c\u4f46\u662f\u5728\u5185\u5b58\u4e0d\u8db3\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3a\u6bcf\u4e2a\u6d4f\u89c8\u4e0a\u4e0b\u6587\u90fd\u521b\u5efa\u4e00\u4e2a\u6e32\u67d3\u5668\u8fdb\u7a0b\u662f\u975e\u5e38\u5962\u4f88\u7684\uff0c\u56e0\u6b64\u6b64\u65f6\u4e00\u4e2a\u6e32\u67d3\u5668\u8fdb\u7a0b\u53ef\u4ee5\u4f1a\u8d1f\u8d23\u591a\u4e2a\u6d4f\u89c8\u4e0a\u4e0b\u6587\uff0c\u901a\u8fc7\u6c99\u7bb1\u673a\u5236\u9694\u79bb\u6765\u786e\u4fdd\u5b89\u5168\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/#_2","title":"\u6e32\u67d3\u5f15\u64ce","text":""},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/#blink","title":"Blink\u5f15\u64ce","text":"<p>\u5728\u524d\u7aef\u5f00\u53d1\u9886\u57df\uff0c\u5f00\u53d1\u8005\u4e0e\u6d4f\u89c8\u5668\u7684\u4ea4\u4e92\u4e3b\u8981\u96c6\u4e2d\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e0a\u3002\u4ee5\u57fa\u4e8e\u00a0Chromium\u00a0\u7684\u6d4f\u89c8\u5668\u4e3a\u4f8b\uff0c\u6e32\u67d3\u8fdb\u7a0b\u626e\u6f14\u7740\u81f3\u5173\u91cd\u8981\u7684\u89d2\u8272\uff0c\u800c\u8fd9\u4e00\u8fc7\u7a0b\u7684\u6838\u5fc3\u7ec4\u4ef6\u5219\u662f\u00a0Blink\u00a0\u5f15\u64ce\u3002Blink\u00a0\u5f15\u64ce\u7684\u4e3b\u8981\u804c\u8d23\u6db5\u76d6\u4e86\u8bf8\u591a\u65b9\u9762\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a</p> <ol> <li>\u8bf7\u6c42\u8d44\u6e90\uff1a\u8bf7\u6c42\u7f51\u7edc\u8d44\u6e90\u3002</li> <li>\u6267\u884cJS\uff1a\u5176\u5185\u90e8\u7684V8\u5f15\u64ce\u627f\u62c5\u6267\u884cJS\u7684\u4efb\u52a1\u3002</li> <li>\u5b9e\u73b0Web\u5e73\u53f0\u89c4\u8303\uff1a\u4f8b\u5982\u5b9e\u73b0HTML\u89e3\u6790\u5668\uff0c\u5c06HTML\u8f6c\u6362\u6210DOM\u3002</li> <li>\u5b9e\u73b0\u6e32\u67d3\u7ba1\u7ebf\uff1a\u5176\u5185\u90e8\u4e3b\u7ebf\u7a0b\u3001\u5408\u6210\u7ebf\u7a0b\u5171\u540c\u627f\u62c5\u6e32\u67d3\u7ba1\u7ebf\u4e2d\u6837\u5f0f\u8ba1\u7b97\u3001\u5e03\u5c40\u3001\u9884\u7ed8\u5236\u7b49\u5de5\u4f5c\u3002</li> </ol> <p>\u4ece\u672c\u8d28\u4e0a\u8bb2\uff0cBlink\u662f\u4e00\u6b3e\u4e3aWeb\u5e73\u53f0\u63d0\u4f9b\u670d\u52a1\u7684\u6e32\u67d3\u5f15\u64ce\uff0c\u5b83\u88ab\u5e7f\u6cdb\u5730\u5e94\u7528\u4e8eChromium\u3001Opera\u3001WebView\u7b49\u9879\u76ee\u4e2d\u3002Blink\u7531\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\u3001\u591a\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\u4ee5\u53ca\u4e00\u7ec4\u5185\u90e8\u7ebf\u7a0b\u7ec4\u6210\u3002\u5176\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u8d1f\u8d23\u6267\u884cJavaScript\u4ee3\u7801\u3001\u8fdb\u884cUI\u6e32\u67d3\u4ee5\u53ca\u5904\u7406\u5783\u573e\u56de\u6536\u7b49\u4efb\u52a1\u3002\u800c\u5de5\u4f5c\u7ebf\u7a0b\u5219\u5305\u62ecService\u00a0Worker\u3001Worklet\u548cWeb\u00a0Worker\u8fd9\u4e09\u7c7b\u7ebf\u7a0b\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/#gecko","title":"Gecko","text":"<p>\u53e6\u4e00\u6b3e\u4e3b\u6d41\u7684\u6e32\u67d3\u5f15\u64ce\u662f Mozilla \u5f00\u53d1\u7684 Gecko \u6e32\u67d3\u5f15\u64ce\uff0c\u5b83\u88ab\u7528\u4e8e Firefox \u6d4f\u89c8\u5668\u4e2d\u3002\u548c Blink \u4e00\u6837\uff0c\u5b83\u7684\u4e3b\u8981\u804c\u8d23\u4e5f\u662f\u6267\u884c JS\u3001\u8bf7\u6c42\u7f51\u7edc\u8d44\u6e90\u3001\u5b9e\u73b0\u6e32\u67d3\u7b49\uff0c\u4f46\u662f\u5728\u6e32\u67d3\u65b9\u5f0f\u4e0a\u3002Gecko \u548c Blink \u6709\u7740\u6bd4\u8f83\u5927\u7684\u533a\u522b\uff0c\u5177\u4f53\u53ef\u4ee5\u67e5\u770b[[\u6df1\u5165\u6d4f\u89c8\u5668\u5f15\u64ce III\uff1aChromium\u5206\u5c42\u5408\u6210 vs Firefox WebRender\u7684GPU\u9769\u547d]]</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/#_3","title":"\u4e3b\u7ebf\u7a0b","text":"<p>\u4e3b\u7ebf\u7a0b\u53ef\u4ee5\u770b\u4f5c\u662f\u6574\u4e2a\u7cfb\u7edf\u7684\u5927\u8111\uff0c\u6240\u6709\u7684\u5173\u952e\u51b3\u7b56\u90fd\u7531\u5b83\u6765\u5b8c\u6210\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\uff0c\u4e3b\u7ebf\u7a0b\u627f\u62c5\u4e86\u8bb8\u591a\u91cd\u8981\u4efb\u52a1\uff0c\u5176\u4e2d\u5305\u62ec\u4e8b\u4ef6\u5faa\u73af\u3001\u811a\u672c\u6267\u884c\u4ee5\u53ca\u7528\u6237\u4ea4\u4e92\u5904\u7406\u7b49\u3002</p> <p>\u4ee5\u4e8b\u4ef6\u5faa\u73af\u4e3a\u4f8b\uff0c\u4e3b\u7ebf\u7a0b\u4f1a\u4e0d\u65ad\u68c0\u67e5\u662f\u5426\u6709\u5f85\u5904\u7406\u7684\u4efb\u52a1\uff0c\u5e76\u6309\u987a\u5e8f\u9010\u4e00\u6267\u884c\u3002\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u4e3b\u7ebf\u7a0b\u4f1a\u63a5\u6536\u5230\u8fd9\u4e2a\u4e8b\u4ef6\uff0c\u7136\u540e\u8c03\u7528\u76f8\u5e94\u7684JavaScript\u51fd\u6570\u6765\u54cd\u5e94\u64cd\u4f5c\u3002\u7136\u800c\uff0c\u5982\u679c\u4e3b\u7ebf\u7a0b\u88ab\u957f\u65f6\u95f4\u5360\u7528\uff08\u6bd4\u5982\u6267\u884c\u590d\u6742\u7684\u8ba1\u7b97\u6216\u963b\u585e\u7684\u4ee3\u7801\uff09\uff0c\u5c31\u4f1a\u5bfc\u81f4\u9875\u9762\u5361\u987f\u751a\u81f3\u5931\u53bb\u54cd\u5e94\u3002</p> <p>\u4e3a\u4e86\u8bf4\u660e\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u8c61\u4e00\u8f86\u516c\u4ea4\u8f66\u6b63\u5728\u8fd0\u9001\u4e58\u5ba2\u3002\u5982\u679c\u53f8\u673a\uff08\u4e3b\u7ebf\u7a0b\uff09\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\u505c\u4e0b\u6765\u5904\u7406\u5176\u4ed6\u4e8b\u60c5\uff0c\u8f66\u4e0a\u7684\u4e58\u5ba2\uff08\u4efb\u52a1\u961f\u5217\uff09\u5c31\u4f1a\u88ab\u8feb\u7b49\u5f85\uff0c\u4ece\u800c\u5f71\u54cd\u6574\u4f53\u6548\u7387\u3002\u56e0\u6b64\uff0c\u5728\u524d\u7aef\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u5e94\u8be5\u5c3d\u91cf\u51cf\u5c11\u4e3b\u7ebf\u7a0b\u7684\u8d1f\u62c5\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u963b\u585e\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/#blink_1","title":"Blink\u4e0e\u4e3b\u7ebf\u7a0b\u7684\u534f\u4f5c\u673a\u5236","text":"<p>Blink\u548c\u4e3b\u7ebf\u7a0b\u4e4b\u95f4\u7684\u534f\u4f5c\u5c31\u50cf\u4e00\u573a\u63a5\u529b\u8d5b\uff0c\u6bcf\u4e00\u68d2\u90fd\u9700\u8981\u7cbe\u786e\u914d\u5408\u624d\u80fd\u4fdd\u8bc1\u6548\u7387\u3002\u5728\u5b9e\u9645\u573a\u666f\u4e2d\uff0cBlink\u5f15\u64ce\u8d1f\u8d23\u5904\u7406\u7f51\u9875\u5185\u5bb9\u7684\u751f\u6210\u4e0e\u66f4\u65b0\uff0c\u800c\u4e3b\u7ebf\u7a0b\u5219\u8d1f\u8d23\u7ba1\u7406\u548c\u8c03\u5ea6\u8fd9\u4e9b\u4efb\u52a1\u3002</p> <p>\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u6eda\u52a8\u9875\u9762\u65f6\uff0cBlink\u4f1a\u8ba1\u7b97\u65b0\u7684\u53ef\u89c6\u533a\u57df\u5e76\u751f\u6210\u5bf9\u5e94\u7684\u5e03\u5c40\u4fe1\u606f\uff0c\u968f\u540e\u5c06\u8fd9\u4e9b\u6570\u636e\u4f20\u9012\u7ed9\u4e3b\u7ebf\u7a0b\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\u3002\u4e3b\u7ebf\u7a0b\u5219\u6839\u636e\u4f18\u5148\u7ea7\u5b89\u6392\u4efb\u52a1\u6267\u884c\u987a\u5e8f\uff0c\u786e\u4fdd\u7528\u6237\u64cd\u4f5c\u5f97\u5230\u53ca\u65f6\u54cd\u5e94\u3002\u4e3a\u4e86\u907f\u514d\u963b\u585e\uff0c\u6d4f\u89c8\u5668\u8fd8\u5f15\u5165\u4e86\u4efb\u52a1\u8c03\u5ea6\u673a\u5236\uff0c\u5141\u8bb8\u4f4e\u4f18\u5148\u7ea7\u4efb\u52a1\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u540c\u65f6\u8ba9\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u4f18\u5148\u5b8c\u6210\u3002</p> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5e38\u89c1\u7684\u4f18\u5316\u7b56\u7565\u53ef\u4ee5\u5e2e\u52a9\u6539\u5584\u4e24\u8005\u4e4b\u95f4\u7684\u534f\u4f5c\u3002\u4f8b\u5982\uff1a</p> <ul> <li>\u4f7f\u7528Web\u00a0Workers\u5c06\u8017\u65f6\u4efb\u52a1\u79fb\u51fa\u4e3b\u7ebf\u7a0b\uff1b</li> <li>\u5229\u7528requestAnimationFrame\u4f18\u5316\u52a8\u753b\u6e32\u67d3\uff1b</li> <li>\u907f\u514d\u9891\u7e41\u7684DOM\u64cd\u4f5c\uff0c\u51cf\u5c11\u91cd\u6392\u4e0e\u91cd\u7ed8\u5f00\u9500\u3002</li> </ul> <p>\u901a\u8fc7\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u7f51\u9875\u6027\u80fd\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u66f4\u52a0\u6d41\u7545\u7684\u4f53\u9a8c\u3002</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8E%20I%EF%BC%9A%E4%BB%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B%E6%9E%B6%E6%9E%84%E5%88%B0%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/#_4","title":"\u53c2\u8003","text":"<p>\u591a\u8fdb\u7a0b\u67b6\u6784\u00a0|\u00a0chromium</p> <p>How\u00a0Blink\u00a0works\u00a0-\u00a0Google\u00a0\u6587\u6863</p> <p>Mozilla - Gecko</p> <p>Chromium\u00a0Docs\u00a0-\u00a0Threading\u00a0and\u00a0Tasks\u00a0in\u00a0Chrome</p> <p>\u6df1\u5165\u4e86\u89e3\u73b0\u4ee3\u7f51\u7edc\u6d4f\u89c8\u5668\uff08\u7b2c\u00a01\u00a0\u90e8\u5206\uff09\u00a0\u00a0|\u00a0\u00a0Blog\u00a0\u00a0|\u00a0\u00a0Chrome\u00a0for\u00a0Developers</p>"},{"location":"%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87/%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%95%E6%93%8EV%EF%BC%9AJavaScript%E7%BC%96%E8%AF%91%E5%99%A8/","title":"\u53c2\u8003","text":"<p>Compiler Compiler - Part 1: Fixing a bug</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20II%EF%BC%9A%E4%BB%8EJS%E5%BC%95%E6%93%8E%E7%9C%8BJS%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%8E%E4%BC%98%E5%8C%96/","title":"\u6df1\u5165JavaScript II\uff1a\u4eceJS\u5f15\u64ce\u770bJS\u7684\u8fd0\u884c\u4e0e\u4f18\u5316","text":"<p>JavaScript \u662f\u4e00\u4e2a\u57fa\u4e8e\u5355\u7ebf\u7a0b\u3001\u5f31\u7c7b\u578b\u7684\u89e3\u91ca\u578b\u8bed\u8a00\uff0cJS \u5f15\u64ce\u901a\u8fc7\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790\u548c\u8bed\u4e49\u5206\u6790\u5c06\u6e90\u4ee3\u7801\u8f6c\u6362\u6210 AST\uff08\u62bd\u8c61\u8bed\u6cd5\u6811\uff09\uff0c\u4e4b\u540e\u7531\u89e3\u91ca\u5668\u89e3\u91ca\u6210\u5b57\u8282\u7801\u6267\u884c\uff0c\u5bf9\u4e8e\u9891\u7e41\u6267\u884c\u7684\"\u70ed\u70b9\"\u4ee3\u7801\u4f1a\u901a\u8fc7 JIT \uff08just-in-time\uff09\u7f16\u8bd1\u5668\u7f16\u8bd1\u6210\u673a\u5668\u7801\uff0c\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\uff0c\u7531\u4e8e JavaScript \u7684\"\u52a8\u6001\u6027\"\uff0c\u5f53\u67d0\u4e9b\u4f18\u5316\u5931\u6548\u65f6\uff0cJS \u5f15\u64ce\u4f1a\u53bb\u4f18\u5316\u4ee5\u56de\u9000\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20II%EF%BC%9A%E4%BB%8EJS%E5%BC%95%E6%93%8E%E7%9C%8BJS%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%8E%E4%BC%98%E5%8C%96/#v-8","title":"V 8 \u7684\u6267\u884c\u4e0e\u4f18\u5316","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20II%EF%BC%9A%E4%BB%8EJS%E5%BC%95%E6%93%8E%E7%9C%8BJS%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%8E%E4%BC%98%E5%8C%96/#js","title":"\u6267\u884c JS \u8fc7\u7a0b","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20II%EF%BC%9A%E4%BB%8EJS%E5%BC%95%E6%93%8E%E7%9C%8BJS%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%8E%E4%BC%98%E5%8C%96/#jit","title":"JIT \u7f16\u8bd1\u5668","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20II%EF%BC%9A%E4%BB%8EJS%E5%BC%95%E6%93%8E%E7%9C%8BJS%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%8E%E4%BC%98%E5%8C%96/#_1","title":"\u9690\u85cf\u7c7b","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20II%EF%BC%9A%E4%BB%8EJS%E5%BC%95%E6%93%8E%E7%9C%8BJS%E7%9A%84%E8%BF%90%E8%A1%8C%E4%B8%8E%E4%BC%98%E5%8C%96/#_2","title":"\u5167\u8054\u7f13\u5b58","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/","title":"\u540c\u6b65\uff1a\u6267\u884c\u6808\u4e0e\u6267\u884c\u4e0a\u4e0b\u6587","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#execution-contexts-and-execution-contexts-stack","title":"\u6267\u884c\u6808\u4e0e\u6267\u884c\u4e0a\u4e0b\u6587\uff08Execution Contexts and Execution Contexts Stack\uff09","text":"<p>JavaScript \u6267\u884c\u4e0a\u4e0b\u6587\uff08Execution Contexts\uff09\u662f JavaScript \u8fd0\u884c\u65f6\u7684\u4e00\u79cd\u73af\u5883\u6982\u5ff5\uff0c\u5305\u542b\u5f53\u524d\u4ee3\u7801\u8fd0\u884c\u7684\u6240\u6709\u4fe1\u606f\uff0c\u6267\u884c\u6808\uff08\u4e5f\u79f0\u8c03\u7528\u6808\uff0c\u5168\u79f0\u6267\u884c\u4e0a\u4e0b\u6587\u6808\uff09\u65f6\u4e00\u79cd\u540e\u8fdb\u5148\u51fa\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7528\u4e8e\u7ba1\u7406\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u5176\u6808\u9876\u751f\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u4e24\u8005\u5171\u540c\u914d\u5408\u5b9e\u73b0 JavaScript \u4ee3\u7801\u7684\u8fd0\u884c\u3002 \u6267\u884c\u4e0a\u4e0b\u6587\u6709\u4e09\u79cd\u7c7b\u578b\uff1a</p> \u7c7b\u578b \u63cf\u8ff0 \u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587 \u51fd\u6570\u6267\u884c\u65f6\u4f1a\u521b\u5efa\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u5176\u5305\u62ec\u53c2\u6570\u3001\u5c40\u90e8\u53d8\u91cf\u3001this \u7b49\u6570\u636e\u3002 \u5168\u5c40\u6267\u884c\u4e0a\u4e0b\u6587 \u5f53\u6267\u884c Script \u6216 Module \u4e2d\u7684\u4ee3\u7801\u65f6\u4f1a\u521b\u5efa\u5168\u5c40\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u5176\u5305\u62ec\u5168\u5c40\u5bf9\u8c61\u7b49\u6570\u636e\uff0c\u901a\u5e38\u88ab\u538b\u5728\u6808\u5e95\u3002 eval \u6267\u884c\u4e0a\u4e0b\u6587 eval \u6267\u884c\u65f6\u521b\u5efa eval \u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u7531\u4e8e\u5b89\u5168\u6027\u95ee\u9898\uff0c\u5176\u4f7f\u7528\u7684\u6bd4\u8f83\u5c11\u3002 <p>\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684 JS \u4ee3\u7801\u4e3a\u4f8b\uff1a</p> <pre><code>&lt;script&gt;\nfunction fn(a){\n  // ...\n}\nfn()\n&lt;/script&gt;\n</code></pre> <p>JS \u5f15\u64ce\u6267\u884c\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u8fc7\u7a0b\uff1a  1. \u6267\u884c\u5230 script \u65f6\uff0c\u521b\u5efa\u5168\u5c40\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u5e76\u538b\u5165\u6808\u4e2d\u3002  2. \u6267\u884c fn \u51fd\u6570\u65f6\uff0c\u521b\u5efa\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u538b\u5165\u6808\u4e2d\uff0c\u6b64\u65f6\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u662f\u6808\u9876\uff0c\u5168\u5c40\u6267\u884c\u4e0a\u4e0b\u6587\u662f\u6808\u5e95\u3002</p> <p>\u5bf9\u4e8e\u5927\u90e8\u5206\u51fd\u6570\u6765\u8bf4\uff08\u6709\u4e00\u4e9b\u51fd\u6570\u4f8b\u5916\uff0c\u5982\u95ed\u5305\u3001\u751f\u6210\u5668\u51fd\u6570\u7b49\uff09\uff0c\u5f53\u51fd\u6570\u6267\u884c\u65f6\uff0cJS \u5f15\u64ce\u4f1a\u4e3a\u5176\u521b\u5efa\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u5e76\u538b\u5165\u6267\u884c\u4e0a\u4e0b\u6587\u6808\u4e2d\uff0cJS \u5f15\u64ce\u4f1a\u6267\u884c\u6267\u884c\u6808\u6808\u9876\u7684\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u5f53\u6267\u884c\u5b8c\u540e\uff0c\u6808\u9876\u6267\u884c\u4e0a\u4e0b\u6587\u4f1a\u4ece\u6267\u884c\u6808\u4e2d\u51fa\u6808\uff0c\u5e76\u88ab\u5783\u573e\u56de\u6536\u3002</p> <p>\u6267\u884c\u4e0a\u4e0b\u6587\u5305\u62ec\u4ee5\u4e0b\u72b6\u6001\u7ec4\u4ef6\uff1a - Code evaluation state\uff1a\u6267\u884c\u3001\u6682\u505c\u548c\u6062\u590d\u4e0e\u6b64\u6267\u884c\u4e0a\u4e0b\u6587\u5173\u8054\u7684\u4ee3\u7801\u7684\u8ba1\u7b97\u6240\u9700\u7684\u4efb\u4f55\u72b6\u6001\u3002 - Function\uff1a\u5982\u679c\u662f\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u6587\u65f6\uff0cFunction \u5b57\u6bb5\u7684\u503c\u662f\u51fd\u6570\u5bf9\u8c61\uff0c\u5426\u5219\u503c\u4e3a null\u3002 - Realm\uff1a\u9886\u57df\u8bb0\u5f55\uff0c\u8fd9\u91cc\u4e0d\u5c55\u5f00\u3002 - ScriptOrModule\uff1a\u5173\u8054\u4ee3\u7801\u6e90\u81ea\u7684 Module Record \u6216 Script Record\u3002 - LexicalEnvironment\uff1a\u8bcd\u6cd5\u73af\u5883\u8bb0\u5f55\uff0c\u4fdd\u5b58\u6807\u8bc6\u7b26\u4e0e\u5b9e\u9645\u503c\u7684\u5173\u7cfb\u3002 - VariableEnvironment\uff1a\u53d8\u91cf\u73af\u5883\u8bb0\u5f55\uff0c\u4fdd\u5b58\u901a\u8fc7 var \u58f0\u660e\u7684\u6807\u8bc6\u7b26\u4e0e\u6307\u7684\u5173\u7cfb\u3002 - PrivateEnvironment\uff1a\u79c1\u6709\u73af\u5883\u8bb0\u5f55\uff0c\u7528\u4e8e\u7c7b\u7684\u79c1\u6709\u53d8\u91cf\u4e2d\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#environment-records","title":"\u73af\u5883\u8bb0\u5f55\uff08Environment Records\uff09","text":"<p>\u5728\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\uff0c\u73af\u5883\u8bb0\u5f55\uff08Environment Records\uff09\u626e\u6f14\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u89d2\u8272\uff0c\u5b83\u8d1f\u8d23\u4fdd\u5b58\u6807\u8bc6\u7b26\u4e0e\u53d8\u91cf\u6216\u51fd\u6570\u5b9e\u9645\u503c\u7684\u5173\u8054\u5173\u7cfb\u3002\u6bcf\u4e2a\u73af\u5883\u8bb0\u5f55\u90fd\u6709\u4e00\u4e2a <code>[[outerEnv]]</code> \u7684\u5185\u90e8\u5c5e\u6027\uff0c\u6307\u5411\u5916\u5c42\u73af\u5883\u8bb0\u5f55\uff0c\u5982\u679c\u6ca1\u6709\u5916\u5c42\u73af\u5883\u8bb0\u5f55\uff0c\u5219\u4e3a null\u3002 \u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u6709\u4e09\u79cd\u73af\u5883\u8bb0\u5f55\uff1a</p> \u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u7684\u73af\u5883\u8bb0\u5f55 \u63cf\u8ff0 VariableEnvironment \u4fdd\u5b58\u901a\u8fc7 var \u58f0\u660e\u7684\u53d8\u91cf\u6807\u8bc6\u7b26\u4e0e\u5b9e\u9645\u503c\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb PrivateEnvironment \u4fdd\u5b58\u79c1\u6709\u53d8\u91cf\u6807\u8bc6\u7b26\u4e0e\u5b9e\u9645\u503c\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb\uff0c\u901a\u5e38\u4f5c\u7528\u4e8e\u7c7b\u4e2d LexicalEnvironment \u4fdd\u5b58\u9664\u4e86\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\u4e4b\u5916\u7684\u6807\u8bc6\u7b26\u4e0e\u5b9e\u9645\u503c\u4e4b\u95f4\u7684\u5173\u7cfb \u53ef\u4ee5\u7528\u4e00\u6bb5\u4ee3\u7801\u6765\u63cf\u8ff0\uff1a <pre><code>function fn(a){\n  var va = 1\n  let b = 2\n  const c = 3\n}\n</code></pre> <p>\u5728\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf va \u4fdd\u5b58\u5728 <code>VariableEnvironment</code> \u4e2d\uff0c\u5176\u4ed6\u53d8\u91cf\u6807\u8bc6\u7b26\u4fdd\u5b58\u5728 <code>LexicalEnvironment</code> \u4e2d</p> \u73af\u5883\u8bb0\u5f55 \u6807\u8bc6\u7b26 VariableEnvironment va LexicalEnvironment a\u3001b\u3001c <pre><code>\nsequenceDiagram\n\n\u5168\u5c40\u4e0a\u4e0b\u6587-&gt;&gt;\u51fd\u6570\u4e0a\u4e0b\u6587: fn()\u8c03\u7528\n\n\u51fd\u6570\u4e0a\u4e0b\u6587--&gt;&gt;\u5168\u5c40\u4e0a\u4e0b\u6587: \u6267\u884c\u5b8c\u6bd5\u51fa\u6808\n\n</code></pre> <p>\u73af\u5883\u8bb0\u5f55\u53ef\u4ee5\u770b\u4f5c\u662f\u4f5c\u7528\u57df\u5728\u8fd0\u884c\u65f6\u7684\u8868\u73b0\u5f62\u5f0f\uff1a\u5f53\u8bbf\u95ee\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u4f1a\u4ece\u5f53\u524d\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u73af\u5883\u8bb0\u5f55\u4e2d\u8fdb\u884c\u67e5\u627e\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5219\u4f1a\u901a\u8fc7\u73af\u5883\u8bb0\u5f55\u7684 <code>[[outerEnv]]</code> \u5c5e\u6027\u8bbf\u95ee\u5230\u5916\u5c42\u73af\u5883\u8bb0\u5f55\u7ee7\u7eed\u67e5\u627e\uff0c\u8fd9\u79cd\u673a\u5236\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u4f5c\u7528\u57df\u94fe\u3002</p> <p>\u867d\u7136\u6240\u6709\u6267\u884c\u4e0a\u4e0b\u6587\u90fd\u6709\u73af\u5883\u8bb0\u5f55\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u53ea\u6709\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u6267\u884c\u4e0a\u4e0b\u6587\uff08\u5373\u6808\u9876\uff09\u4e2d\u7684\u73af\u5883\u8bb0\u5f55\u624d\u662f\u201c\u6fc0\u6d3b\u7684\u201d\uff0c\u4e5f\u5c31\u662f\u8bf4 JS \u53ea\u4f1a\u76f4\u63a5\u64cd\u4f5c\u6808\u9876\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u73af\u5883\u8bb0\u5f55\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7 <code>[[outerEnv]]</code> \u5c5e\u6027\u8bbf\u95ee\u5230\u5916\u5c42\u73af\u5883\u8bb0\u5f55\uff0c\u4ece\u800c\u8bbf\u95ee\u5230\u6574\u4e2a\u73af\u5883\u8bb0\u5f55\u94fe\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_2","title":"\u95ed\u5305","text":"<p>\u6709\u6743\u8bbf\u95ee\u53e6\u4e00\u4e2a\u51fd\u6570\u4f5c\u7528\u57df\u4e2d\u7684\u53d8\u91cf\u7684\u51fd\u6570\u79f0\u4e3a\u95ed\u5305                                    \u2014\u2014\u300aJavaScript \u9ad8\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1\u7b2c\u4e09\u7248\u300b</p> <p>\u524d\u9762\u63d0\u8fc7\uff1a\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u5165\u6808\u6267\u884c\uff0c\u6267\u884c\u5b8c\u6bd5\u540e\u51fa\u6808\u88ab GC \u5783\u573e\u56de\u6536\uff0c\u4f46\u662f\u95ed\u5305\u6bd4\u8f83\u7279\u6b8a\uff0c\u6211\u4eec\u4ee5\u4e00\u6bb5\u4ee3\u7801\u4e3a\u4f8b\uff1a</p> <pre><code>function outerFn(){\n    let a = 1\n    return function innerFn(){\n        console.log(a)\n    }\n}\n\nconst f = outerFn()\nf()\n</code></pre> <p>\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u7edf\u4e00\u79f0 <code>outerFn</code> \u4e3a\u5916\u5c42\u51fd\u6570\uff0c<code>innerFn</code> \u4e3a\u5185\u5c42\u51fd\u6570\u3002\u5bf9\u4e8e\u95ed\u5305\u800c\u8a00\uff0c\u5f53\u5916\u5c42\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5185\u5c42\u51fd\u6570\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u5916\u5c42\u51fd\u6570\u4e2d\u7684\u53d8\u91cf\u3002</p> <p>\u8fd9\u79cd\u73b0\u8c61\u662f\u56e0\u4e3a\u5783\u573e\u56de\u6536\u673a\u5236\u662f\u91c7\u7528\"\u53ef\u8fbe\u6027\"\u5b9e\u73b0\u7684\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662fGC \u4f1a\u4ece\u4e00\u7ec4\u6839\uff08\u6267\u884c\u4e0a\u4e0b\u6587\u3001DOM \u8ddf\u8282\u70b9\u3001\u5168\u5c40\u5bf9\u8c61\u7b49\uff09\u5f00\u59cb\u6df1\u5ea6\u904d\u5386\uff0c\u4e0d\u80fd\u8bbf\u95ee\u5230\u7684\u5bf9\u8c61\u4f1a\u88ab\u8ba4\u4e3a\u6b7b\u5bf9\u8c61\u4ece\u800c\u88ab\u5783\u573e\u56de\u6536\uff0c\u4f46\u662f\u5bf9\u4e8e\u95ed\u5305\u800c\u8a00\uff0c\u5f53\u5916\u5c42\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5176\u5bf9\u5e94\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u51fa\u6808\u9500\u6bc1\uff0c\u4f46\u662f\u5185\u5c42\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u7684\u73af\u5883\u8bb0\u5f55\u7684 <code>[[outerEnv]]</code> \u4ecd\u7136\u4fdd\u5b58\u7740\u5916\u5c42\u51fd\u6570\u7684\u73af\u5883\u8bb0\u5f55\uff0c\u8fd9\u4e5f\u5c31\u5bfc\u81f4\u4e86\u5916\u5c42\u51fd\u6570\u88ab\u5f15\u7528\u7684\u53d8\u91cf\u4ecd\u7136\u662f\"\u53ef\u8fbe\u7684\"\uff0c\u56e0\u6b64\u4e0d\u4f1a\u88ab\u5783\u573e\u56de\u6536\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u201c\u544a\u77e5\u201dJS \u5f15\u64ce\uff0c\u53ef\u4ee5\u56de\u6536\u95ed\u5305\u4e2d\u7684\u73af\u5883\u8bb0\u5f55\u4e86\uff1a</p> <pre><code>const f = outerFn()\nf()\n\nf = null // \u6267\u884c\u5b8c\u6bd5\u540e\u624b\u52a8\u91ca\u653e\n</code></pre>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_3","title":"\u751f\u6210\u5668\u51fd\u6570","text":"<p>\u53e6\u4e00\u4e2a\u6bd4\u8f83\u7279\u6b8a\u7684\u662f\u751f\u6210\u5668\u51fd\u6570\uff0c\u751f\u6210\u5668\u51fd\u6570\u5141\u8bb8\u5728\u51fd\u6570\u6267\u884c\u8fc7\u7a0b\u4e2d\u4e2d\u65ad\u9000\u51fa\uff0c\u5e76\u5728\u4e4b\u540e\u91cd\u65b0\u6062\u590d\u51fd\u6570\u6267\u884c\u3002</p> <p>JS \u4f1a\u5728\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u65f6\u521b\u5efa\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u4e5f\u5c5e\u4e8e\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u4f46\u662f\u4f1a\u591a\u4e00\u4e2a generator \u5185\u90e8\u5c5e\u6027\u6307\u5411\u751f\u6210\u5668\u5bf9\u8c61\u3002</p> \u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u7ec4\u4ef6 \u63cf\u8ff0 generator \u6307\u5411\u8be5\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u751f\u6210\u5668\u5bf9\u8c61 <p>\u751f\u6210\u5668\u51fd\u6570\u80fd\u5b9e\u73b0\u4e2d\u65ad\u548c\u6062\u590d\u7684\u6838\u5fc3\u5728\u4e8e\u6267\u884c\u4e0a\u4e0b\u6587\u72b6\u6001\u7684\u5b8c\u6574\u4fdd\u5b58\u4e0e\u6062\u590d\u3002\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a\u751f\u6210\u5668\u5bf9\u8c61\uff08GeneratorObject\uff09\uff0c\u5f53\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u9047\u5230 <code>yield</code> \u65f6\uff0c\u8be5\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u4ece\u6267\u884c\u6808\u9876\u51fa\u6808\uff0c\u4f46\u662f\u6b64\u65f6\u8be5\u6267\u884c\u4e0a\u4e0b\u6587\u4ecd\u7136\u4f1a\u88ab\u751f\u6210\u5668\u5bf9\u8c61\u4fdd\u5b58\uff0c\u5f53\u91cd\u65b0\u6267\u884c <code>iter.next()</code> \u65f6\uff0c\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u91cd\u65b0\u5165\u6808\u6267\u884c\u3002</p> \u751f\u6210\u5668\u5bf9\u8c61\u7ec4\u4ef6 \u63cf\u8ff0 GeneratorState \u751f\u6210\u5668\u7684\u72b6\u6001 GeneratorContext \u6307\u5411\u6267\u884c\u6b64\u751f\u6210\u5668\u7684\u6267\u884c\u4e0a\u4e0b\u6587 GeneratorBrand \u7531 ECMAScript \u6e90\u6587\u672c\u58f0\u660e\u7684\u751f\u6210\u5668\u7684 <code>[[GeneratorBrand]]</code> \u59cb\u7ec8\u4e3a\u7a7a\u3002 \u5f53\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff08ExecutionContext\uff09\u4e2d\u65ad\u51fa\u6808\u540e\uff0c\u751f\u6210\u5668\u5bf9\u8c61\uff08GeneratorObject\uff09\u4e2d\u7684 <code>[[GeneratorContext]]</code> \u5c5e\u6027\u4ecd\u7136\u4fdd\u5b58\u7740\u8be5\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u5f15\u7528\uff0c\u8fd9\u662f\u751f\u6210\u5668\u6267\u884c\u4e0a\u4e0b\u6587\u51fa\u6808\u540e\u4e0d\u4f1a\u88ab\u9500\u6bc1\u7684\u5173\u952e\u539f\u56e0\u3002 <p>\u6b64\u65f6\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u5185\u5b58\u7ed3\u6784\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>classDiagram\n  class GeneratorObject {\n    [[GeneratorState]]: String\n    [[GeneratorBrand]]: String\n    [[GeneratorContext]]: ExecutionContext\n    next(value) : IteratorResult\n  }\n\n  class ExecutionContext {\n    LexicalEnvironment\n    VariableEnvironment\n    InstructionPointer\n  }\n</code></pre> <p>\u7528\u4e00\u6bb5\u4ee3\u7801\u6765\u89e3\u91ca\u8fd9\u4e00\u8fc7\u7a0b\uff1a</p> <pre><code>function* fn(){\n   yield 1 // \u51fa\u6808\uff0c\u4f46\u662f\u6267\u884c\u4e0a\u4e0b\u6587\u4e0d\u4f1a\u88ab\u9500\u6bc1\n   yield 2 // \u51fa\u6808\uff0c\u4f46\u662f\u6267\u884c\u4e0a\u4e0b\u6587\u4e0d\u4f1a\u88ab\u9500\u6bc1\n}\n\nconst iter = fn() // \u521b\u5efa\u751f\u6210\u5668\u5bf9\u8c61\niter.next() // \u521b\u5efa\u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u5165\u6808\niter.next() // \u751f\u6210\u5668\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587\u91cd\u65b0\u5165\u6808\niter = null // \u91ca\u653e\u751f\u6210\u5668\u5bf9\u8c61\uff0c\u6b64\u65f6\u6267\u884c\u4e0a\u4e0b\u6587\u5c06\u4e0d\u53ef\u8fbe\uff0c\u4e5f\u4f1a\u88ab\u5783\u573e\u56de\u6536\n</code></pre> <pre><code>\nstateDiagram\n\n[*] --&gt; suspendedStart\n\nsuspendedStart --&gt; executing: next()\n\nexecuting --&gt; suspendedYield: yield\n\nsuspendedYield --&gt; executing: next()\n\nexecuting --&gt; completed: return\n\n</code></pre>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_4","title":"\u5f02\u6b65\uff1a\u4e8b\u4ef6\u5faa\u73af\u673a\u5236","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_5","title":"\u57fa\u4e8e\u4e8b\u4ef6\u5faa\u73af\u7684\u5f02\u6b65\u673a\u5236","text":"<p>JavaScript \u7684\u6838\u5fc3\u8bbe\u8ba1\u4e4b\u4e00\u662f\u5355\u7ebf\u7a0b\u6267\u884c\u6a21\u578b\u3002\u8fd9\u610f\u5473\u7740\u5b83\u53ea\u6709\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\uff08\u8c03\u7528\u6808\uff09\u6765\u5904\u7406\u4ee3\u7801\u6267\u884c\u3002\u7136\u800c\uff0c\u8bb8\u591a\u5173\u952e\u64cd\u4f5c\u2014\u2014\u5982\u7f51\u7edc\u8bf7\u6c42 (<code>fetch</code>)\u3001\u6587\u4ef6\u8bfb\u5199 (<code>fs</code>)\u3001\u7528\u6237\u4ea4\u4e92 (<code>click</code>)\u3001\u5b9a\u65f6\u5668 (<code>setTimeout</code>) \u751a\u81f3\u590d\u6742\u7684\u8ba1\u7b97\u2014\u2014\u5728\u5b8c\u6210\u65f6\u90fd\u53ef\u80fd\u9700\u8981\u663e\u8457\u7684\u65f6\u95f4\u5ef6\u8fdf\u3002</p> <p>\u5982\u679c\u4e3b\u7ebf\u7a0b\u505c\u4e0b\u6765\u00a0\u7b49\u5f85\u00a0\u8fd9\u4e9b\u8017\u65f6\u64cd\u4f5c\u7684\u5b8c\u6210\uff0c\u6574\u4e2a\u7a0b\u5e8f\u5c31\u4f1a\u9677\u5165\u505c\u6ede\u72b6\u6001\uff0c\u5373\u53d1\u751f\u201c\u963b\u585e\u201d\u3002\u00a0\u5728\u524d\u7aef\uff0c\u963b\u585e\u8868\u73b0\u4e3a\u9875\u9762\u65e0\u54cd\u5e94\u3001\u52a8\u753b\u5361\u987f\u3001\u7528\u6237\u4ea4\u4e92\u5931\u6548\uff1b\u5728 Node.js \u4e2d\uff0c\u5219\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u65e0\u6cd5\u5904\u7406\u5176\u4ed6\u5e76\u53d1\u8bf7\u6c42\u3002</p> <p>\u4e3a\u4e86\u7f13\u89e3\u8fd9\u4e2a\u95ee\u9898\uff0cJavaScript \u8bbe\u8ba1\u5b9e\u73b0\u4e86\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u5c31\u7c7b\u4f3c\u4e00\u4e2a <code>while(true)</code> \u7684\u6c38\u4e0d\u505c\u6b62\u7684\u4e00\u4e2a\u673a\u5236\uff0c\u5f53 JS \u5f15\u64ce\u6267\u884c\u5230\u5f02\u6b65\u4efb\u52a1\u65f6\uff0c\u4f1a\u5c06\u5176\u59d4\u6258\u7ed9\u5bbf\u4e3b\u73af\u5883\uff08\u6d4f\u89c8\u5668\u6216\u8005 Nodejs\uff09\u6267\u884c\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u5f53\u5f02\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u540e\u5bbf\u4e3b\u73af\u5883\u518d\u5c06\u5176\u56de\u8c03\u5165\u961f\u5230\u5bf9\u5e94\u961f\u5217\uff08\u4efb\u52a1\u961f\u5217\u6216\u5fae\u4efb\u52a1\u961f\u5217\uff09\u4e2d\uff0c\u7b49\u5230\u4e3b\u7ebf\u7a0b\u7a7a\u95f2\u65f6\uff0c\u5c06\u5176\u5165\u6808\u5230\u6267\u884c\u6808\u4e2d\u6267\u884c\u3002</p> <p>HTML \u89c4\u8303\u5c06\u5f02\u6b65\u4efb\u52a1\u5206\u4e3a\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1\uff0c\u5e76\u4e14\u5c06\u5b58\u50a8\u5b8f\u4efb\u52a1\u7684\u961f\u5217\u79f0\u4e3a\u5b8f\u4efb\u52a1\u961f\u5217\uff08task queue\uff09\uff0c\u5b58\u50a8\u5fae\u4efb\u52a1\u7684\u961f\u5217\u79f0\u4e3a\u5fae\u4efb\u52a1\u961f\u5217\uff08microtask queue\uff09\u3002\u5fae\u4efb\u52a1\u4f18\u5148\u7ea7\u6700\u9ad8\uff0c\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\u5468\u671f\u5185\u9700\u8981\u6267\u884c\u5b8c\u6240\u6709\u5fae\u4efb\u52a1\uff0c\u800c\u5b8f\u4efb\u52a1\u4f18\u5148\u7ea7\u8f83\u4f4e\uff0c\u6bcf\u4e2a\u5468\u671f\u53ea\u6267\u884c\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u4f46\u662f\u5728\u4e00\u4e2a\u5468\u671f\u4e2d\uff0c\u5b8f\u4efb\u52a1\u6267\u884c\u65f6\u673a\u65e9\u4e8e\u5fae\u4efb\u52a1\u6267\u884c\u3002</p> <p>\u5728 HTML \u89c4\u8303\u4e2d\u5c06\u4efb\u52a1\u5206\u4e3a\u4e86\u5fae\u4efb\u52a1(microtask)\u548c\u4efb\u52a1\uff08task\uff09\uff0c\u800c\u975e\u5b8f\u4efb\u52a1\uff08macrotask\uff09\uff0c\u4f46\u662f\u793e\u533a\u5e38\u5c06 task \u79f0\u4e3a\u5b8f\u4efb\u52a1\uff0c\u672c\u6587\u91c7\u7528\u793e\u533a\u5e38\u89c1\u53eb\u6cd5\uff0c\u5c06 task \u79f0\u4e3a\u5b8f\u4efb\u52a1\uff0ctask queue \u79f0\u4e3a\u5b8f\u4efb\u52a1\u961f\u5217\u3002</p> \u4efb\u52a1\u7c7b\u578b \u6267\u884c\u8005 \u4f18\u5148\u7ea7 \u6267\u884c\u65f6\u673a \u5e38\u89c1 API task \u5b8f\u4efb\u52a1 \u901a\u5e38\u662f\u5bbf\u4e3b\u73af\u5883 \u4f4e\uff0c\u4e00\u4e2a\u5468\u671f\u53ea\u6267\u884c\u4e00\u4e2a\u5b8f\u4efb\u52a1 \u8f83\u65e9 setTimeout\u3001MessageChannel \u7b49 microtask \u5fae\u4efb\u52a1 \u901a\u5e38\u662f JS \u9ad8\uff0c\u4e00\u4e2a\u5468\u671f\u6267\u884c\u5b8c\u6240\u6709\u5fae\u4efb\u52a1 \u8f83\u665a Promise\u3001queueMicrotask \u7b49"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_6","title":"\u6d4f\u89c8\u5668\u4e2d\u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_7","title":"\u4e8b\u4ef6\u5faa\u73af\u7c7b\u578b","text":"<p>\u5728\u6d4f\u89c8\u5668\u4e2d\uff0c\u6839\u636e\u8fd0\u884c\u73af\u5883\uff0c\u53ef\u4ee5\u5206\u4e3a\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u4e8b\u4ef6\u5faa\u73af</p> \u5faa\u73af\u7c7b\u578b \u8fd0\u884c\u73af\u5883 \u533a\u522b window \u4e8b\u4ef6\u5faa\u73af\uff08\u7a97\u53e3\u4e8b\u4ef6\u5faa\u73af\uff09 \u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u4e2d \u8d1f\u8d23\u6e32\u67d3\uff0c\u53ef\u4ee5\u64cd\u4f5c DOM worker \u4e8b\u4ef6\u5faa\u73af \u8fd0\u884c\u5728 service worker\u3001share worker \u7b49\u5de5\u4f5c\u7ebf\u7a0b\u4e2d \u4e0d\u53ef\u4ee5\u64cd\u4f5c DOM worklet \u4e8b\u4ef6\u5faa\u73af \u8fd0\u884c\u5728 worklet \u7ebf\u7a0b\u4e2d \u4e0d\u53ef\u4ee5\u64cd\u4f5c DOM &gt; worket \u7ebf\u7a0b\u662f\u4e00\u79cd\u4e13\u95e8\u7528\u4e8e\u56fe\u5f62\u548c\u97f3\u9891\u7684\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u5b83\u6bd4 web worker \u7ebf\u7a0b\u66f4\u52a0\u8f7b\u91cf\uff0c\u901a\u5e38\u88ab\u6d4f\u89c8\u5668\u5185\u90e8\u6240\u4f7f\u7528\u3002 <p>\u4e09\u79cd\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u4e2d\uff0c\u7a97\u53e3\u4e8b\u4ef6\u5faa\u73af\u6700\u4e3a\u5e38\u89c1\u4e5f\u6700\u4e3a\u91cd\u8981\uff0c\u56e0\u4e3a\u76f8\u8f83\u4e8e\u53e6\u5916\u4e24\u8005\uff0c\u7a97\u53e3\u4e8b\u4ef6\u5faa\u73af\u8d1f\u8d23\u63a7\u5236\u6d4f\u89c8\u5668\u6e32\u67d3\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_8","title":"\u7a97\u53e3\u4e8b\u4ef6\u5faa\u73af","text":"<p>\u7a97\u53e3\u4e8b\u4ef6\u5faa\u73af\u4e00\u4e2a\u5468\u671f\u7684\u4e3b\u8981\u6b65\u9aa4\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>stateDiagram\n\n[*] --&gt; \u6267\u884c\u4e00\u4e2a\u5b8f\u4efb\u52a1\n\u6267\u884c\u4e00\u4e2a\u5b8f\u4efb\u52a1 --&gt; \u6267\u884c\u6240\u6709\u5fae\u4efb\u52a1\n\u6267\u884c\u6240\u6709\u5fae\u4efb\u52a1 --&gt; \u68c0\u67e5\u662f\u5426\u9700\u8981\u91cd\u65b0\u6e32\u67d3\n\n\u68c0\u67e5\u662f\u5426\u9700\u8981\u91cd\u65b0\u6e32\u67d3 --&gt;\u8fdb\u5165\u4e0b\u4e00\u4e2a\u5468\u671f: no\n\u68c0\u67e5\u662f\u5426\u9700\u8981\u91cd\u65b0\u6e32\u67d3 --&gt; \u6267\u884crequestAnimationFrame\u56de\u8c03: yes\n\u6267\u884crequestAnimationFrame\u56de\u8c03 --&gt; \u6267\u884c\u91cd\u65b0\u6e32\u67d3\n\u6267\u884c\u91cd\u65b0\u6e32\u67d3 --&gt; \u68c0\u67e5\u5f53\u524d\u5e27\u662f\u5426\u6709\u7a7a\u95f2\u65f6\u95f4\n\u68c0\u67e5\u5f53\u524d\u5e27\u662f\u5426\u6709\u7a7a\u95f2\u65f6\u95f4 --&gt; \u6267\u884crequestIdleCallback\u56de\u8c03: yes\n\u68c0\u67e5\u5f53\u524d\u5e27\u662f\u5426\u6709\u7a7a\u95f2\u65f6\u95f4 --&gt; \u8fdb\u5165\u4e0b\u4e00\u4e2a\u5468\u671f: no\n\u6267\u884crequestIdleCallback\u56de\u8c03 --&gt; \u8fdb\u5165\u4e0b\u4e00\u4e2a\u5468\u671f\n\n\n</code></pre> <p>\u9875\u9762\u7684\u4ea4\u4e92\u3001\u52a8\u753b\u7b49\u672c\u8d28\u4e0a\u90fd\u662f\u7531\u4e00\u5e27\u5e27\u6e32\u67d3\u5e27\u7ec4\u6210\u7684\uff0c\u4ee5 60HZ \u7684\u5237\u65b0\u7387\u4e3a\u4f8b\uff0c\u4e00\u5e27\u7684\u6e32\u67d3\u65f6\u957f\u5e94\u5f53\u662f 16.66 ms \u5de6\u53f3\uff0c\u5982\u679c\u8d85\u8fc7\u8fd9\u6bb5\u65f6\u95f4\u6ca1\u6709\u7ed8\u5236\u5b8c\u6210\u6e32\u67d3\u5e27\uff0c\u90a3\u4e48\u5c31\u4f1a\u5bfc\u81f4\u201c\u4e22\u5e27\u201d\uff0c\u5728\u9875\u9762\u4e0a\u4f53\u73b0\u4e3a\u52a8\u753b\u5361\u987f\u3001\u8f93\u5165\u5ef6\u8fdf\u7b49\u95ee\u9898\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_9","title":"\u4e8b\u4ef6\u5faa\u73af\u4e2d\u7684\u963b\u585e","text":"<p>\u5728\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u4e2d\uff0c\u5e38\u89c1\u7684\u9020\u6210\u4e3b\u7ebf\u7a0b\u963b\u585e\u7684\u539f\u56e0\u6709\uff1a - \u957f\u4efb\u52a1\uff1a\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u540c\u6b65\u4efb\u52a1\uff0c\u4f1a\u963b\u585e\u4e3b\u7ebf\u7a0b\uff0c\u4ece\u800c\u963b\u585e\u6e32\u67d3 - \u5fae\u4efb\u52a1\uff1a\u7531\u4e8e\u4e00\u4e2a\u4e8b\u4ef6\u5faa\u73af\u5468\u671f\u5185\u9700\u8981\u6267\u884c\u5b8c\u6240\u6709\u5fae\u4efb\u52a1\uff0c\u56e0\u6b64\u8fc7\u591a\u7684\u5fae\u4efb\u52a1\u4e5f\u4f1a\u963b\u585e\u6e32\u67d3</p> <p>\u53ef\u4ee5\u601d\u8003\u4e0b\uff0c\u4e0b\u9762\u4e24\u79cd\u60c5\u51b5\u54ea\u79cd\u4f1a\u5bfc\u81f4\u9875\u9762\u5361\u987f\uff1a</p> <pre><code>function runMicrotask(){\n    Promise.resolve().then(res=&gt;{\n        runMicrotask()\n    })\n}\n\nfunction runMacrotask(){\n setTimeout(()=&gt;{\n     runMacrotask()\n }, 0)   \n}\n</code></pre> <p>\u7b54\u6848\u663e\u7136\u662f <code>runMicrotask</code>\uff0c\u800c <code>runMacrotask</code> \u51fd\u6570\u867d\u7136\u4f1a\u4e00\u76f4\u521b\u5efa\u5b8f\u4efb\u52a1\uff0c\u4f46\u662f\u7531\u4e8e\u6bcf\u4e2a\u5468\u671f\u53ea\u6267\u884c\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u56e0\u6b64\u5e76\u4e0d\u4f1a\u963b\u585e\u6e32\u67d3\u3002</p> <p>\u9898\u5916\u8bdd\uff1a\u6267\u884c <code>runMicrotask</code> \u540e\uff0c\u5f53\u524d\u6807\u7b7e\u9875\u51fa\u73b0\u5361\u987f\u751a\u81f3\u5361\u6b7b\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u5207\u6362\u5230\u53e6\u4e00\u4e2a tab \u5374\u53d1\u73b0\u9875\u9762\u6b63\u5e38\u4e14\u6d41\u7a0b\uff0c\u8fd9\u6b63\u597d\u4f53\u73b0\u4e86\u6211\u4eec\u524d\u9762\u7ae0\u8282\u6240\u8bf4\u7684\u6d4f\u89c8\u5668\u591a\u8fdb\u7a0b\u67b6\u6784\u7684\u4f18\u5f02\u6027\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u5bf9 <code>runMacrotask</code> \u7a0d\u52a0\u6539\u9020\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u7b80\u6613\u7684\u65f6\u95f4\u5207\u7247\uff0c\u65f6\u95f4\u5207\u7247\u5e38\u7528\u4e8e\u4f18\u5316\u957f\u4efb\u52a1\uff0c\u4f8b\u5982 React 18 \u7684\u8c03\u5ea6\u7cfb\u7edf\u5c31\u91c7\u7528\u65f6\u95f4\u5207\u7247\u6765\u4f18\u5316\u6027\u80fd\u3002</p> <p>\u4e0b\u9762\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u65f6\u95f4\u5207\u7247\u529f\u80fd\uff1a</p> <pre><code>function runMacrotask(callback){\n let startTime = Date.now()\n let currentTime = Date.now()\n let hasTask = true\n while(currentTime - startTime &lt; 5 &amp;&amp; hasTask){\n     currentTime = Date.now()\n     hasTask = callback()\n }  \n if(hasTask){\n     console.log('\u6682\u505c\u6267\u884c\uff0c\u91ca\u653e\u4e3b\u7ebf\u7a0b')\n     setTimeout(()=&gt;runMacrotask(callback), 10)\n }\n}\n\nlet i = 0\nrunMacrotask(()=&gt;{\n  i++\n  return i&lt;1e6\n})\n</code></pre> <p>\u65f6\u95f4\u5207\u7247\u5c06\u957f\u4efb\u52a1\u62c6\u5206\u6210\u591a\u4e2a\u5c0f\u4efb\u52a1\u5e76\u95f4\u9694\u6267\u884c\uff0c\u907f\u514d\u957f\u65f6\u95f4\u8fde\u7eed\u5730\u5360\u7528\u4e3b\u7ebf\u7a0b\uff0c\u5bfc\u81f4\u963b\u585e\u6e32\u67d3\u3002\u5f53\u7136\u4f18\u5316\u963b\u585e\u7684\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u6bd4\u5982\u4f7f\u7528 web worker\uff0c\u4f46\u662f\u6211\u4eec\u672c\u7ae0\u4e0d\u5173\u6ce8\u6027\u80fd\u4f18\u5316\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u800c\u662f\u5173\u6ce8\u4e8e\u6d4f\u89c8\u5668\u5e95\u5c42\u673a\u5236\uff0c\u6bd5\u7adf\u638c\u63e1\u597d\u5e95\u5c42\u539f\u7406\uff0c\u90a3\u4e48\u81ea\u7136\u5c31\u80fd\u5f88\u5bb9\u6613\u627e\u5230\u548c\u7406\u89e3\u5bf9\u5e94\u7684\u4f18\u5316\u65b9\u6cd5\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_10","title":"\u7a7a\u95f2\u65f6\u95f4","text":"<p>\u524d\u9762\u6211\u4eec\u603b\u7ed3\u4e86\u5e38\u89c1\u7684\u963b\u585e\u6e32\u67d3\u7684\u56e0\u7d20\uff0c\u8fd9\u4e9b\u56e0\u7d20\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u65e0\u6cd5\u53ca\u65f6\u5730\u7ed8\u5236\u6e32\u67d3\u5e27\uff0c\u90a3\u4e48\u5982\u679c\u6d4f\u89c8\u5668\u63d0\u524d\u7ed8\u5236\u597d\u4e86\u6e32\u67d3\u5e27\u5462\uff1f</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u6839\u636e HTML \u89c4\u8303\uff0c\u6d4f\u89c8\u5668\u4f1a\u8bb0\u5f55\u4e0a\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u95f4\uff0c\u5f53\u5f53\u524d\u5468\u671f\u7684\u6e32\u67d3\u5e27\u7ed8\u5236\u5b8c\u6210\u540e\uff0c\u4f1a\u5c06\u5f53\u524d\u65f6\u95f4\u548c\u4e0a\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u95f4\u90fd\u5dee\u503c\u4e0e\u5237\u65b0\u7387\u7684\u6e32\u67d3\u5e27\u65f6\u95f4\u6bd4\u8f83\u3002\u4f8b\u5982\u4e0a\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u95f4\u6233\u662f 5\uff0c\u5f53\u524d\u6e32\u67d3\u5b8c\u540e\u7684\u65f6\u95f4\u662f 15\uff0c\u7528\u6237\u5c4f\u5e55\u5237\u65b0\u7387\u662f 60 HZ\uff0c\u5373\u6e32\u67d3\u5e27\u65f6\u95f4\u662f 16.66 ms\uff0c\u90a3\u4e48\u5269\u4f59\u65f6\u95f4\u5c31\u6709 6.66 ms\uff0816.66 ms - \uff0815 ms - 5 ms\uff09 = 6.66 ms\uff09, \u90a3\u4e48\u8fd9 6.66 ms \u7684\u5269\u4f59\u65f6\u95f4\u5c31\u79f0\u4e3a\u7a7a\u95f2\u65f6\u95f4\u3002</p> <p>\u5982\u679c\u5f53\u524d\u5468\u671f\u5b58\u5728\u7a7a\u95f2\u65f6\u95f4\uff0c\u5e76\u4e14\u6267\u884c\u6808\u3001\u5b8f\u4efb\u52a1\u961f\u5217\u548c\u5fae\u4efb\u52a1\u961f\u5217\u90fd\u4e3a\u7a7a\uff0c\u90a3\u4e48\u6d4f\u89c8\u5668\u5c31\u4f1a\u5229\u7528\u8fd9\u6bb5\u65f6\u95f4\u505a\u4e00\u4e9b\u5185\u90e8\uff0c\u4f8b\u5982\u8fdb\u884c\u4e3b\u52a8 GC\uff0cJS \u4e5f\u53ef\u4ee5\u901a\u8fc7 <code>requestIdleCallback</code> \u6765\u5229\u7528\u8fd9\u6bb5\u65f6\u95f4\u6765\u6267\u884c\u4e00\u4e9b\u4f4e\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#nodejs","title":"NodeJs \u4e2d\u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236","text":""},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#libuv","title":"Libuv","text":"<p>Nodejs \u5e95\u5c42\u662f\u57fa\u4e8e C++\u548c V8 \u5f15\u64ce\u5b9e\u73b0\u7684\uff0c\u548c\u6d4f\u89c8\u5668\u4e00\u6837\uff0cNodejs \u4e5f\u662f\u4ee5\u5355\u7ebf\u7a0b\u7684\u65b9\u5f0f\u6267\u884c JS\uff0c\u4f46\u662f Nodejs \u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u4f1a\u662f\u57fa\u4e8e libuv \u5b9e\u73b0\u7684\u3002</p> <p>\u5728 Nodejs \u4e2d\uff0c\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u7684\u5f02\u6b65\u4efb\u52a1\u662f\u901a\u8fc7 libuv \u7684\u7ebf\u7a0b\u6c60\u6765\u5b9e\u73b0\u7684\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u5f53\u6267\u884c\u4e00\u4e2a\u5f02\u6b65 API \u65f6\uff0cNodejs \u4f1a\u4ea4\u7531 libuv \u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u6267\u884c\uff0c\u5f53\u5f02\u6b65 API \u6267\u884c\u5b8c\u6bd5\u65f6\u7ebf\u7a0b\u6c60\u5c06\u5176\u56de\u8c03\u5165\u961f\uff0c\u7b49\u5f85\u4e3b\u7ebf\u7a0b\u6267\u884c\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_11","title":"\u4e8b\u4ef6\u5faa\u73af\u673a\u5236","text":"<p>Nodejs \u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u548c\u6d4f\u89c8\u5668\u4e2d\u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u6709\u5f88\u5927\u7684\u4e0d\u540c\uff0cNodejs \u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u5206\u4e3a\u516d\u4e2a\u9636\u6bb5\u3002</p> <pre><code>   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u250c\u2500&gt;\u2502           timers          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502     pending callbacks     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2502       idle, prepare       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502   incoming:   \u2502\n\u2502  \u2502           poll            \u2502&lt;\u2500\u2500\u2500\u2500\u2500\u2524  connections, \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502   data, etc.  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u2502           check           \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2514\u2500\u2500\u2524      close callbacks      \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n</code></pre> \u9636\u6bb5 \u4f5c\u7528 timers \u6267\u884c <code>setTimeout</code>\u3001<code>setInterval()</code>\u00a0\u65f6\u95f4\u5230\u671f\u540e\u7684\u56de\u8c03\u3002 pending callback \u6267\u884c\u63a8\u8fdf\u5230\u4e0b\u4e00\u6b21\u5faa\u73af\u5468\u671f\u7684 I/O \u56de\u8c03 idle, prepare nodejs \u5185\u90e8\u4f7f\u7528 poll \u68c0\u7d22\u65b0\u7684 I/O \u4e8b\u4ef6\uff1b\u6267\u884c I/O \u76f8\u5173\u56de\u8c03\uff08\u51e0\u4e4e\u6240\u6709\u56de\u8c03\uff0c\u9664\u4e86\u5173\u95ed\u56de\u8c03\u3001\u7531\u5b9a\u65f6\u5668\u8c03\u5ea6\u7684\u56de\u8c03\u548c\u00a0<code>setImmediate()</code>\uff09\uff1bnode \u5c06\u5728\u9002\u5f53\u7684\u65f6\u5019\u5728\u6b64\u5904\u963b\u585e\u3002 check \u6267\u884c <code>setImmediate</code> \u7684\u56de\u8c03 close callback \u4e00\u4e9b\u5173\u95ed\u56de\u8c03\uff0c\u4f8b\u5982\u00a0<code>socket.on('close', ...)</code> timers timers \u9636\u6bb5\u4f1a\u6267\u884c\u5b9a\u65f6\u5668\u5230\u8fbe\u9608\u503c\u7684\u56de\u8c03\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u65e0\u8bba\u662f\u6d4f\u89c8\u5668\u73af\u5883\u8fd8\u662f Nodejs \u4e2d\uff0c\u5b9a\u65f6\u5668\u90fd\u4e0d\u662f\u4e00\u5b9a\u6309\u7167\u8bbe\u7f6e\u7684\u9608\u503c\u51c6\u65f6\u6267\u884c\u56de\u8c03\u7684\uff0c\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u5b9a\u65f6\u5668\u56de\u8c03\u7684\u6267\u884c\u53ef\u80fd\u4f1a\u88ab\u963b\u585e\u3002 <p>pending callback \u67d0\u4e9b\u7cfb\u7edf\u64cd\u4f5c\u7684\u56de\u8c03\u53ef\u80fd\u4f1a\u63a8\u8fdf\u5230\u4e0b\u4e00\u6b21\u5faa\u73af\u5468\u671f\u4e2d\u7684 pending callback \u9636\u6bb5\u6267\u884c\uff0c\u4f8b\u5982TCP \u5957\u63a5\u5b57\u9519\u8bef\u7684\u56de\u8c03\uff0c\u8fd9\u79cd\u65b9\u5f0f\u80fd\u591f\u8ba9\u56de\u8c03\u5728\u7a33\u5b9a\u7684\u73af\u5883\u4e2d\u6267\u884c\u3002</p> <p>poll\uff08\u8f6e\u8be2\uff09 poll\u9636\u6bb5\u6709\u4e24\u4e2a\u4e3b\u8981\u529f\u80fd\uff1a - \u8ba1\u7b97\u5b83\u5e94\u8be5\u963b\u585e\u548c\u8f6e\u8be2 I/O \u591a\u957f\u65f6\u95f4\uff0c\u7136\u540e - \u5904\u7406\u8f6e\u8be2\u961f\u5217\u4e2d\u7684\u4e8b\u4ef6\u3002 \u5927\u90e8\u5206\u7684\u56de\u8c03\u90fd\u5728\u8fd9\u4e2a\u9636\u6bb5\u6267\u884c\u3002</p> <p>check \u8fd9\u4e2a\u9636\u6bb5\u4e13\u95e8\u7528\u4e8e\u6267\u884c <code>setImmediate</code> \u7684\u56de\u8c03</p> <p>process.nextTick <code>process.nextTick</code> \u4e8b\u5b9e\u4e0a\u4f18\u5148\u7ea7\u975e\u5e38\u9ad8\uff0c\u6bd4 <code>setImmediate</code> \u8fd8\u9ad8\uff0c<code>nextTick</code> \u8fd9\u4e2a\u65b9\u6cd5\u540d\u5177\u6709\u4e00\u5b9a\u7684\u8bef\u5bfc\u6027\uff0c\u7136\u800c\u7531\u4e8e\u5386\u53f2\u7684\u539f\u56e0\u65e0\u6cd5\u4fee\u6539\u3002</p> <p><code>process.nextTick</code> \u7684\u56de\u8c03\u4e0d\u4f9d\u8d56\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u6267\u884c\uff0c\u4e8b\u5b9e\u4e0a\uff0c<code>process.nextTick</code> \u7684\u56de\u8c03\u4f1a\u5728\u5f53\u524d\u64cd\u4f5c\u6267\u884c\u5b8c\u540e\u7acb\u5373\u6267\u884c\uff0c\u65e0\u8bba\u5f53\u524d\u5904\u4e8e\u4e8b\u4ef6\u5faa\u73af\u7684\u54ea\u4e00\u4e2a\u9636\u6bb5\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_12","title":"\u4e8b\u4ef6\u5faa\u73af\u4e2d\u7684\u963b\u585e","text":"<p>\u57fa\u4e8e Nodejs \u4e8b\u4ef6\u5faa\u73af\u7684\u7279\u6027\uff0c\u5e38\u89c1\u7684\u963b\u585e\u573a\u666f\u6709\uff1a 1. \u540c\u6b65API \u5bfc\u81f4\u7684\u4e3b\u7ebf\u7a0b\u963b\u585e 2. \u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u88ab\u8017\u5c3d 3. \u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u88ab\u957f\u65f6\u95f4\u6267\u884c</p> <p>\u540c\u6b65API\uff08\u5982 fs. readFileSync\uff09\u4f1a\u76f4\u63a5\u963b\u585e Nodejs \u7684\u6267\u884c\uff0c\u56e0\u6b64\u901a\u5e38\u60c5\u51b5\u4e0b\u5e94\u5f53\u4f18\u5148\u91c7\u7528\u4e8b\u4ef6\u9a71\u52a8\u7684\u5f02\u6b65 API\u3002</p> <p>\u53e6\u5916\u4e24\u79cd\u5e38\u89c1\u7684\u963b\u585e\u573a\u666f\u662f\u7ebf\u7a0b\u6c60\u88ab\u963b\u585e\uff0c\u8fd9\u5f88\u597d\u7406\u89e3\uff0c\u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u662f\u6709\u9650\u7684\uff0c\u5982\u679c\u77ed\u65f6\u95f4\u5185\u4ea7\u751f\u5927\u91cf\u7684\u5f02\u6b65API\uff0c\u6216\u8005\u5f02\u6b65\u4efb\u52a1\u6267\u884c\u65f6\u95f4\u8fc7\u957f\uff0c\u90a3\u4e48\u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u5c31\u5f88\u5bb9\u6613\u88ab\u8017\u5c3d\uff0c\u672a\u88ab\u5206\u914d\u7684\u5f02\u6b65\u4efb\u52a1\u5c31\u9700\u8981\u6392\u961f\u7b49\u5f85\uff0c\u4ece\u800c\u5f71\u54cd Nodejs \u670d\u52a1\u5668\u7684\u541e\u5410\u6027\u80fd\u3002</p> <p>\u901a\u8fc7\u8fd9\u79cd\u57fa\u4e8e\u4e8b\u4ef6\u5faa\u73af\u7684\u5355\u7ebf\u7a0b\u6a21\u578b\uff0cNodejs \u53ef\u4ee5\u5f88\u597d\u5730\u5904\u7406 I/O \u5bc6\u96c6\u578b\u4efb\u52a1\uff0c\u4f46\u662f\u4e0d\u9002\u5408\u5904\u7406 CPU \u5bc6\u96c6\u578b\u4efb\u52a1\u3002\u4f46\u662f\u4f18\u5316\u7684\u529e\u6cd5\u8fd8\u662f\u6709\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7 child_process \u6765\u521b\u5efa\u5b50\u8fdb\u7a0b\u6216\u8005\u901a\u8fc7 web worker \u521b\u5efa\u5de5\u4f5c\u7ebf\u7a0b\u7684\u65b9\u5f0f\u6765\u4f18\u5316\u3002</p>"},{"location":"%E6%B7%B1%E5%85%A5JavaScript%E7%AF%87/%E6%B7%B1%E5%85%A5JavaScript%20I%EF%BC%9A%E4%BB%8E%E8%A7%84%E8%8C%83%E4%B8%AD%E7%9C%8BJavaScript%E8%BF%90%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%88%B6/#_13","title":"\u53c2\u8003","text":"<p>Node.js \u4e2d\u6587\u7f51 \u2014 \u4e0d\u8981\u963b\u585e\u4e8b\u4ef6\u5faa\u73af\uff08\u6216\u5de5\u4f5c\u6c60\uff09 https://html.spec.whatwg.org/multipage/parsing.html https://tc39.es/ecma262/</p>"}]}